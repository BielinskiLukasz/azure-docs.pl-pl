<properties
    pageTitle="VS を使用したリモート クラスターへのアプリの発行 |Microsoft Azure"
    description="Visual Studio を使用してリモートの Service Fabric クラスターにアプリケーションを発行するために必要な手順について説明します。"
    services="service-fabric"
    documentationCenter="na"
    authors="cawams"
    manager="timlt"
    editor="" />

<tags
    ms.service="multiple"
    ms.devlang="dotnet"
    ms.topic="article"
    ms.tgt_pltfrm="na"
    ms.workload="multiple"
    ms.date="12/06/2015"
    ms.author="cawa" />

# Visual Studio を使用してリモート クラスターにアプリケーションを発行する

Visual Studio の Service Fabric 拡張機能を使用すると、Service Fabric クラスターへのアプリケーションの発行を反復可能な方法で簡単に実行できるうえに、スクリプト化することもできます。

## 発行に必要な成果物の概要

### Deploy-FabricApplication.ps1

これは、Service Fabric アプリケーションを発行するためのパラメーターとして発行プロファイルのパスを使用する PowerShell スクリプトです。 このスクリプトはアプリケーションの一部であるため、アプリケーションに必要であれば修正できます。

### 発行プロファイル

Service Fabric アプリケーション プロジェクト内のフォルダーと呼ばれる **PublishProfiles** など、アプリケーションを発行するための重要な情報を格納する XML ファイルが含まれています。
- Service Fabric クラスターの接続パラメーター
- アプリケーション パラメーター ファイルへのパス
- アップグレード設定

既定では、アプリケーションには、Local.xml と Cloud.xml という 2 つの発行プロファイルが含まれています。 既定のファイルの 1 つをコピーして貼り付けることで、プロファイルを追加できます。

### アプリケーション パラメーター ファイル

Service Fabric アプリケーション プロジェクト内のフォルダーと呼ばれる **ApplicationParameters** ユーザー指定のアプリケーション マニフェストのパラメーターの値を XML ファイルが含まれています。 デプロイ設定に複数の値を使用できるように、アプリケーション マニフェスト ファイルをパラメーター化できます。 アプリケーションのパラメーター化の詳細については、「 [Service Fabric で複数環境を管理](service-fabric-manage-multiple-environment-app-configuration.md)します。

>[AZURE.NOTE] アクター サービスの場合に、マニフェスト ファイルでパラメーターを生成するには、まずプロジェクトをビルドする必要があります。

## [Service Fabric アプリケーションの発行] ダイアログ ボックスを使用してアプリケーションを発行する

以下の手順を使用するを使用してアプリケーションを発行する方法を示して、 **Service Fabric アプリケーションの発行** ダイアログが Visual Studio Service Fabric ツールによって提供されます。

1. Service Fabric アプリケーション プロジェクトのショートカット メニューを選択 **発行]** を表示する、 **Service Fabric アプリケーションの発行** ] ダイアログ ボックス。

    ![][0]

    選択されたファイル、 **profile を対象に** ボックスの一覧は、where すべての設定とを除く **マニフェストのバージョン**, 、保存されます。 既存のプロファイルを再利用するか、作成、新しいものを選択して **< プロファイルの管理] >** で、 **profile を対象に** ボックスの一覧です。 発行プロファイルを選択すると、その内容がダイアログ ボックスの対応するフィールドに表示されます。 いつでも変更を保存する、 **プロファイルの保存** リンクします。    

2.  **接続エンドポイント** セクションでは、ローカルまたはリモート Service Fabric クラスターの公開エンドポイントを指定することができます。 接続エンドポイントを追加または、変更、選択、 **Select…** ] ボタンをクリックします。  **Service Fabric クラスターの選択** ダイアログ ボックスに表示、利用可能な Service Fabric クラスター Azure サブスクリプションに基づく接続のエンドポイントは公開することができます。 Visual Studio にまだログインしていない場合、ログインするように求められます。

    クラスターの選択ダイアログで、利用可能なサブスクリプションとクラスターのセットから選択できます。

    ![][1]

    >[AZURE.NOTE] (サードパーティ製のクラスター) などの任意のエンドポイントに公開する場合を参照してください、 **任意のクラスター エンドポイントへの発行** 以下のセクションです。

    エンドポイントを選択すると、選択した Service Fabric クラスターへの接続が Visual Studio によって検証されます。 クラスターがセキュリティで保護されていない場合、Visual Studio はすぐにエンドポイントに接続できます。 しかし、クラスターがセキュリティで保護されている場合は、続行する前にローカル コンピューターに証明書をインストールする必要があります。 参照してください [をセキュリティで保護された接続を構成する方法](service-fabric-visualstudio-configure-secure-connections.md) の詳細。 完了したら、選択、 **OK** ] ボタンをクリックします。 選択したクラスターが表示される、 **Service Fabric アプリケーションの発行** ダイアログ。

3.  **アプリケーション パラメーター ファイル** ボックスの一覧を使用して、アプリケーション パラメーター ファイルに移動できます。 アプリケーション パラメーター ファイルには、アプリケーション マニフェスト ファイル内のパラメーターにユーザーが指定した値が保持されています。 パラメーターを変更または追加を選択、 **編集** ] ボタンをクリックします。 入力するかのパラメーターの値を変更、 **パラメーター** グリッドです。 完了したら、選択、 **保存** ] ボタンをクリックします。

    ![][2]

4.  **アプリケーションをアップグレード** ] チェック ボックスを使用して、アクションは、アップグレード、これを発行するかどうかを指定できます。 アップグレードの発行操作は、通常の発行操作とは異なります。 参照してください [Service Fabric アプリケーションのアップグレード](service-fabric-application-upgrade.md) 違いの一覧についてです。 アップグレードの設定を構成するには、選択、 **アップグレード設定を構成する** リンクします。 アップグレード パラメーター エディターが表示されます。 参照してください [Service Fabric アプリケーションのアップグレードを構成する](service-fabric-visualstudio-configure-upgrade.md) をアップグレード パラメーターの詳細を参照してください。

5. 選択、 **マニフェストのバージョン]** を表示するボタン、 **編集バージョン** ダイアログ。 更新を実行するには、アプリケーションとサービスのバージョンをアップグレードする必要があります。 参照してください [Service Fabric アプリケーションのアップグレード チュートリアル](service-fabric-application-upgrade-tutorial.md) をアプリケーションとサービス マニフェストのバージョンによるアップグレードのプロセスへの影響を参照してください。

    ![][3]

    アプリケーションとサービスのバージョン 1.0.0.0 の形式で 1.0.0 や数値など、セマンティック バージョニングを使用して場合、は、選択、 **アプリケーションとサービスのバージョンを自動的に更新** オプション。 このオプションをオンにすると、コード、構成、またはデータのパッケージ バージョンが更新されたときに、サービスとアプリケーションのバージョン番号が自動的に更新されます。 バージョンを手動で編集する場合は、チェック ボックスをオフにして、この機能を無効にします。

    >[AZURE.NOTE] アクター プロジェクト用に表示されるすべてのパッケージ エントリは、最初にサービス マニフェスト ファイル内のエントリを生成するプロジェクトをビルドします。

6. 終了したらすべての必要な設定を指定するには、選択、 **発行** 選択されている Service Fabric クラスターにアプリケーションを発行する] ボタンをクリックします。 指定した設定が、発行プロセスに適用されます。

## (パーティ クラスターを含む) 任意のクラスター エンドポイントに発行する

Visual Studio の発行機能は、ご利用の Azure サブスクリプションの 1 つに関連付けられているリモート クラスターに発行するために最適化されています。 ただし、発行プロファイル XML を直接編集し、任意のエンドポイント (Service Fabric パーティ クラスターなど) に発行できます。 2 つの発行プロファイルを前述のように、既定で提供される **Local.xml** と **Cloud.xml** - いもの異なる環境でのプロファイルを追加作成へようこそ。 おそらくという名前のパーティのクラスターへの発行プロファイルを作成する、 **Party.xml**します。

保護されていないクラスターに接続する場合、必要なものは、`partycluster1.eastus.cloudapp.azure.com:19000` など、クラスター接続エンドポイントだけです。 その場合、発行プロファイルの接続エンドポイントは次のようになります。

```XML
<ClusterConnectionParameters ConnectionEndpoint="partycluster1.eastus.cloudapp.azure.com:19000" />
```

  保護されているクラスターに接続する場合、ローカル ストアからクライアント証明書の詳細を提供し、認証に使用する必要があります。 詳細については、次を参照してください。 [Service Fabric クラスターにセキュリティで保護された接続を構成する](service-fabric-visualstudio-configure-secure-connections.md)です。

  発行プロファイルが設定されたら、下の図のように発行ダイアログでそれを参照できます。

  ![発行ダイアログ ボックスの新しい発行プロファイル][4]

  この場合、新しい発行プロファイルは既定のアプリケーション パラメーター ファイルの 1 つを指すことに注意してください。 同じアプリケーション構成を複数の環境に公開する場合、これは適切です。 一方、公開する環境ごとに異なる構成を用意する場合、該当するアプリケーション パラメーター ファイルを作成すると合理的です。

## 次のステップ

継続的な統合環境での発行プロセスを自動化する方法については、次を参照してください。 [サービス ファブリック設定を継続的インテグレーション](service-fabric-set-up-continuous-integration.md)します。


[0]: ./media/service-fabric-publish-app-remote-cluster/PublishDialog.png
[1]: ./media/service-fabric-publish-app-remote-cluster/SelectCluster.png
[2]: ./media/service-fabric-publish-app-remote-cluster/EditParams.png
[3]: ./media/service-fabric-publish-app-remote-cluster/EditVersions.png
[4]: ./media/service-fabric-publish-app-remote-cluster/publish-to-party-cluster.png

