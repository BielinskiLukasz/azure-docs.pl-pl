<properties
   pageTitle="Visual Studio の Azure リソース グループ プロジェクトの作成とデプロイ | Microsoft Azure"
   description="Visual Studio を使用して、Azure リソース グループ プロジェクトを作成し、リソースを Azure にデプロイします。"
   services="visual-studio-online"
   documentationCenter="na"
   authors="TomArcher"
   manager="douge"
   editor="" />
<tags
   ms.service="azure-resource-manager"
   ms.devlang="multiple"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="11/13/2015"
   ms.author="tarcher" />

# Visual Studio での Azure リソース グループの作成とデプロイ

 **Azure リソース グループ** Azure SDK 2.6 がインストールされている場合は、デプロイ プロジェクト テンプレートを Visual Studio で使用できます。 Azure リソース グループ プロジェクトを使用すると、関連する複数の Azure リソースをグループ化し、1 回のデプロイ操作で発行することができます。 Azure リソース グループ プロジェクトと呼ばれるテクノロジを使用して **Azure リソース マネージャー** 作業を行います。 **Azure リソース マネージャー** REST API サービスを使用すると、よく一緒に使用される複数の Azure リソースを含む Azure のリソース グループを定義でき、同様のライフ サイクルとです。 リソース グループを使用すると、個々のリソースごとに異なる関数を呼び出すのではなく、単一の関数呼び出しでグループ内のすべてのリソースを操作できます。 Azure リソース グループの詳細については、次を参照してください。 [Azure リソースの管理を、Azure プレビュー ポータルを使用した](resource-group-portal.md)します。 より詳細なエンド ツー エンド Azure リソース グループに展開するシナリオを参照してください。 [Visual Studio の Azure リソース グループ](https://azure.microsoft.com/blog/azure-resource-manager-2-5-for-visual-studio/)します。

Azure リソース グループ プロジェクトには、リソース グループにデプロイされる要素を定義する Azure リソース マネージャー JSON テンプレートが含まれています。 参照してください [Azure リソース マネージャーの作成テンプレート](resource-group-authoring-templates.md) の詳細。

Azure リソース マネージャーには、使用可能なさまざまなリソース プロバイダーが用意されています。これらを使用すると、Ubuntu Server や Windows Server 2012 R2 などのリソースをデプロイすることができます。 このトピックでは、 **Web Apps** リソースで、基本的な空の web サイトを Azure に展開します。

## Azure リソース グループ プロジェクトの作成

この手順を使用した Azure リソース グループ プロジェクトを作成する方法を学習、 **Web アプリ** テンプレートです。

### Azure リソース グループ プロジェクトを作成するには

1. Visual Studio で、次のように選択します。 **ファイル**, 、**新しいプロジェクト**, 、選択 **c#** または **Visual Basic**します。 選択し、 **クラウド**, 、にして **Azure リソース グループ** プロジェクトです。

    ![Cloud Deployment プロジェクト](./media/vs-azure-tools-resource-groups-deployment-projects-create-deploy/IC796668.png)

1. Azure リソース マネージャーにデプロイするテンプレートを選択します。 この例を選びます、 **Web アプリ** テンプレートです。

    ![テンプレートの選択](./media/vs-azure-tools-resource-groups-deployment-projects-create-deploy/IC796669.png)

    リソースは、後でリソース グループにさらに追加することもできます。

    >[AZURE.NOTE] 使用可能なテンプレートの一覧は、オンラインが取得され、変更することがあります。

    Visual Studio では、Web アプリ用の Azure リソース グループ デプロイ プロジェクトが作成されます。

1. デプロイ プロジェクト内のノードを展開して、作成された内容を確認します。

    この例では [Web アプリ] テンプレートを選択したため、次のファイルが表示されます。 

  	|ファイル名|説明|
  	|---|---|
  	|Deploy-AzureResourceGroup.ps1|Azure リソース マネージャーにデプロイするために PowerShell コマンドを呼び出す PowerShell スクリプト。<br />**注** この PowerShell スクリプトは、テンプレートをデプロイする Visual Studio によって使用されます。 このスクリプトに変更を加えると Visual Studio でのデプロイにも影響するため、注意が必要です。|
    !WebSite.json|Azure にデプロイするインフラストラクチャを定義するテンプレート。|
  	|WebSite.param.dev.json|構成ファイルで必要な特定の値を含むパラメーター ファイル。|
  	|AzCopy.exe|ローカル ストレージのドロップ パスからファイルをストレージ アカウントのコンテナーにコピーする PowerShell スクリプトで使用されるツール。 このツールは、テンプレートと共にコードをデプロイするようデプロイ プロジェクトを構成する場合にのみ使用します。|

    すべての Azure リソース グループ デプロイ プロジェクトには、上記の 4 つの基本的なファイルが含まれます。 他のプロジェクトには、他の機能をサポートするために追加のファイルが含まれることがあります。

## Azure リソース グループ プロジェクトのカスタマイズ

デプロイする Azure リソースが記述されている JSON テンプレート ファイルを変更すると、デプロイ プロジェクトをカスタマイズできます。 JSON とは JavaScript Object Notation の略であり、操作が簡単なシリアル化されたデータ形式です。

Azure リソース グループ プロジェクトの下の 2 つのテンプレート ファイルがある、 **テンプレート** 変更可能なソリューション エクスプ ローラーでノード: Azure リソース マネージャーのテンプレート ファイルとパラメーター ファイル。

- **Azure リソース マネージャーのテンプレート ファイル** (である、拡張子は .json) サイトの名前や場所など、デプロイ プロジェクトに必要なパラメーターだけでなく、対象のリソースを含むファイルを指定します。 また、トリガーの名前、タグ、ルールなど、Azure リソース グループ内のコンポーネントとそのプロパティの依存関係も指定します。 このファイルを変更して独自の機能を追加できます。 たとえば、テンプレートにデータベースを追加できます。 指定する必要があるパラメーターを確認するには、各リソース プロバイダーのドキュメントを参照してください。 参照してください [リソース プロバイダー](https://msdn.microsoft.com/library/azure/dn790572.aspx) の詳細。

- **パラメーター ファイル** (拡張子が付いている `.param.*.json`) は各リソース プロバイダーに必要な構成ファイルで指定されたパラメーターの値が含まれています。 この例では、構成ファイル (WebSite.json) の web アプリの定義のパラメーター *siteName* と *siteLocation*します。 デプロイ時に、テンプレート ファイルのパラメーターの値を指定するように求められ、これらの値はパラメーター ファイルに格納されます。 パラメーター ファイルは、直接編集することもできます。

JSON ファイルは、Visual Studio エディターで編集できます。 インストールする場合、 [PowerShell Tools for Visual Studio](https://visualstudiogallery.msdn.microsoft.com/c9eb3ba8-0c59-4944-9a62-6eee37294597), 、構文の強調表示、かっこの一致、および読み取りおよび PowerShell スクリプトを編集しやすく IntelliSense を取得することもありますし、します。 PowerShell Tools がまだインストールされていない場合は、インストールするためのリンクがエディターの上部に表示されます。

![PowerShell Tools のインストール](./media/vs-azure-tools-resource-groups-deployment-projects-create-deploy/IC796671.png)

JSON ファイルでは、各ファイルの上部で参照されているスキーマが使用されます。 スキーマをより深く理解する場合は、スキーマをダウンロードして分析できます。 スキーマでは、許可される要素、フィールドの種類と形式、列挙値に使用できる値などが定義されています。

異なるコピーを作成するさまざまな構成に配置することも、多くの場合、設定を変更する場合、 *param* ファイルです。 すべての環境に同じテンプレートを使用してみてください。

## Azure リソース グループへの Azure リソース グループ プロジェクトのデプロイ

Azure リソース グループ プロジェクトをデプロイする場合は、Azure のリソース (Web アプリやデータベースなど) の単なる論理グループである Azure リソース グループにプロジェクトをデプロイします。

1. デプロイ プロジェクト ノードのショートカット メニューで **展開**, 、**新しい展開**します。

    ![メニュー項目 [配置]、[新しい配置]](./media/vs-azure-tools-resource-groups-deployment-projects-create-deploy/IC796672.png)

     **リソース グループにデプロイ** ] ダイアログ ボックスが表示されます。

    ![[リソース グループに配置する] ダイアログ ボックス](./media/vs-azure-tools-resource-groups-deployment-projects-create-deploy/IC796673.png)

1.  **リソース グループ** ドロップダウン ボックスで、既存のリソース グループを選択するか、新しいものを作成します。リソース グループを作成するには、開く、 **リソース グループ** ドロップダウン ボックスを選択 **<Create New...>**します。

     **リソース グループの作成** ] ダイアログ ボックスが表示されます。

    ![[リソース グループの作成] ダイアログ ボックス](./media/vs-azure-tools-resource-groups-deployment-projects-create-deploy/IC796674.png)

    >[AZURE.NOTE] 通常、新しいデプロイ プロジェクトを開始するを場合は、展開する新しいリソース グループを作成します。

1. リソース グループの場所と名前を入力し、[、 **作成** ] ボタンをクリックします。

    リソース グループの場所は、リソースの場所と同じである必要はありません。グループ内のリソースは、複数のリージョンにまたがっている場合があります。

1. このデプロイに使用するテンプレート構成ファイルとパラメーター ファイルを選択するか、既定値をそのまま使用します。

    リソースのプロパティを編集するにを選択して、 **パラメーターの編集** ] ボタンをクリックします。 必要な展開するときに、パラメーターが不足している場合、 **パラメーターの編集** それらを提供できるように、ダイアログ ボックスが表示されます。 パラメーターの値が欠落しているが **<null>** に表示される、 **値** それらの横のボックスです。 この例 (Web アプリ リソース) の場合、必要なパラメーターには、サイト名、ホスティング プラン、サイトの場所があります (取り消した場合、パラメーター ファイルのこれらのパラメーター値は既定で null に設定されます)。他のパラメーターには既定値が設定されています。

    ![[パラメーターの編集] ダイアログ ボックス](./media/vs-azure-tools-resource-groups-deployment-projects-create-deploy/IC796675.png)

1.  **パラメーターの編集** ] ダイアログ ボックスで、サイト名、サイトの場所、ホスティング プラン名を入力し、その他のプロパティの値を確認します。 完了したら、選択、 **保存** ] ボタンをクリックします。

    -  *SiteName* パラメーターは、web ページの URL の最初の部分です。 たとえば、mywebsitename.azurewebsites.net という URL、サイト名が **mywebsitename です**します。

    -  *HostingPlanName* パラメーターはホスティング プランを指定します。 この例では、"Free" を使用できます。 ホスティング プランの詳細については、次を参照してください [Azure App Service プランの詳細な概要。](http://azure.microsoft.com/documentation/articles/azure-web-sites-web-hosting-plans-in-depth-overview/)

    -  *SiteLocation* パラメーターは「米国西部」など、ホストされるように、サイトが Azure のリージョンを表します。 使用可能なリージョンの一覧は、次を参照してください。 [Azure のリージョン](http://azure.microsoft.com/regions/)します。

1. 選択、 **展開** プロジェクトを Azure にデプロイする] ボタンをクリックします。

    展開の進行状況を表示、 **出力** ウィンドウです。 デプロイは、構成に応じて、完了までに数分かかる場合があります。

    >[AZURE.NOTE] Microsoft Azure PowerShell コマンドレットをインストールする行うように求められる場合があります。 これらのコマンドレットは、Azure リソース グループをデプロイするために必要であるため、インストールする必要があります。

1. ブラウザーで開く、 [Azure プレビュー ポータル](https://portal.azure.com/)します。 これは新しい変更であるためにあります新しい通知メッセージで使用できる、 **通知** ] タブをクリックします。 通知メッセージを選択すると、新しい Azure リソース グループの詳細が表示されます。 すべての利用可能なリソース グループの一覧を表示することができます、 **参照** ] タブを開いて、 **リソース グループ**します。

    ![プロビジョニングされた Azure リソース グループ](./media/vs-azure-tools-resource-groups-deployment-projects-create-deploy/IC796676.png)

1. 変更を加え、プロジェクトを再デプロイする場合は、Azure リソース グループ プロジェクトのショートカット メニューから直接既存のリソース グループを選択できます。 ショートカット メニューで **展開**, 、デプロイ先のリソース グループを選択します。

    ![デプロイされた Azure リソース グループ](./media/vs-azure-tools-resource-groups-deployment-projects-create-deploy/IC796677.png)

    Azure リソース グループをデプロイすると、そのプロジェクトのみがデプロイされます。 ソリューションにコード プロジェクトまたはその他のプロジェクトがある場合は、個別にデプロイする必要があります。

## Azure SDK 2.6 での Azure SDK 2.5 クラウド デプロイ プロジェクトの使用

Azure SDK 2.5 で作成されたクラウド デプロイ プロジェクトを使用している場合は、Azure SDK 2.6 以降にアップグレードして、Azure リソース テンプレートを編集してデプロイするための新機能を使用できるようにする必要があります。 Azure SDK 2.5 で作成したテンプレートを再利用する最も簡単な方法では、Azure SDK 2.6 以降のバージョンのプロジェクトを作成し、そのプロジェクトにテンプレートを移動してからいくつかの変更を行います。

### Azure SDK 2.6 以降で Azure SDK 2.5 クラウド デプロイ プロジェクトを使用するには

1. 新しい Azure SDK 2.6 以降の Azure リソース グループ プロジェクトをソリューションに追加します。

    1. Azure SDK 2.5 クラウド デプロイ プロジェクトを含むソリューションを開きます。

    1.  **ファイル** ] メニューの [選択 **新規**, 、**プロジェクト**します。

    1.  **新しいプロジェクト** ダイアログ ボックスで、検索、 **Azure リソース グループ **プロジェクトの下 **Visual c#**/**クラウド** または **Visual Basic**/**クラウド**します。

         プロジェクト テンプレートの名前が変更された **クラウド デプロイ** Azure リソース グループにします。

    1. プロジェクトに名前を付けます。

    1. ソリューションのドロップ ダウン ボックスを **ソリューションに追加**します。

    1. 次に、テンプレートを選択するように求められます。 Azure SDK 2.5 のクラウド デプロイ プロジェクトから既存のテンプレートを移動するため、任意のテンプレートを選択できます。ここでは、一覧の下部にある空のテンプレートを選択します。

    1. 選択、 **OK** ] ボタンをクリックします。

        新しいプロジェクトがソリューションに追加されます。

1. テンプレート ファイルとパラメーター ファイルを、Azure SDK 2.5 のクラウド デプロイ プロジェクトから Azure SDK 2.6 以降のリソース グループ プロジェクトにコピーします。

    1. ソリューション エクスプローラーで、Azure SDK 2.5 のデプロイ プロジェクトでコピーするテンプレート ファイルとパラメーター ファイルを探して選択し、コピーします。

    2. ファイルを貼り付け、 **テンプレート** 、新しい Azure SDK 2.6 またはそれ以降のリソース グループ プロジェクトのフォルダーです。

1. ソリューション エクスプローラーで、Azure SDK 2.5 のデプロイ プロジェクトでコピーするテンプレート ファイルとパラメーター ファイルを探して選択し、コピーします。

1. コピーしたファイルを、新しい Azure SDK 2.6 以降のリソース グループ プロジェクトの Templates フォルダーに貼り付けます。

1. テンプレートと共に Web アプリケーションもデプロイする場合は、新しい Azure SDK 2.6 以降のリソース グループ プロジェクトから Web アプリケーションへの参照を作成する必要があります。

    1. コンテキスト メニューを開き、 **参照** 、新しい Azure SDK 2.6 またはソリューション エクスプ ローラーでの以降のリソース グループ プロジェクトのノードを選択 **参照の追加**します。

    1. プロジェクトの一覧で、Web アプリケーションの横にあるボックスをオンにして、 **OK** ] ボタンをクリックします。

1. ソリューション エクスプローラーで、新しい Azure SDK 2.6 リソース グループ プロジェクトの [参照設定] ノードのコンテキスト メニューにある [参照の追加] を選択します。

1. プロジェクトの一覧で Web アプリケーションの横にあるボックスをオンにして、[OK] をクリックします。

1. 出現するすべてのパラメーターの名前を変更 *dropLocation* と *dropLocationSasToken* に *_artifactsLocation* と *_artifactsLocationSasToken*します。

1. 使用する予定がない場合は、Azure SDK 2.6 以降のプロジェクトの作成時に自動的に追加された空のテンプレート ファイルとパラメーター ファイルを削除することができます。

    1. DeployTemplate.json ファイルを削除します。

    1. DeploymentTemplate.param.dev.json ファイルを削除します。

1. Azure SDK 2.5 プロジェクトの Publish-AzureResourceGroup.ps1 スクリプトに変更を加えた場合は、Azure SDK 2.6 以降のプロジェクトの Deploy-AzureResourceGroup.ps1 スクリプトにそれらの変更を移行する必要があります。

    これで、Azure SDK 2.6 以降の Azure リソース グループ プロジェクトでデプロイ コマンドを使用してテンプレートをデプロイし、Azure SDK 2.6 以降でテンプレートを編集するための新機能を利用できるようになりました。 2.6 以降のプロジェクトが思いどおりに動作している場合は、ソリューションから Azure SDK 2.5 プロジェクトを削除できます。

## プロジェクトの更新が必要な理由

テンプレートで行われたいくつかの変更が Azure SDK 2.6 でデプロイされると、Azure SDK 2.5 のデプロイ スクリプトとテンプレートに互換性がなくなります。 最も重要となる大きな変更が、デプロイの起動です。 Azure SDK 2.5 では、テンプレートをアップロードしてデプロイを開始するために Azure REST API を使用したコードをコンパイルしてきました。 多くの開発者からは、プロジェクトに含まれている PowerShell スクリプトを Visual Studio で起動するだけにしてほしいというフィードバックがありました。 そのため、Azure SDK 2.6 では、プロジェクトに含まれている PowerShell スクリプトをデプロイ コマンドで起動することで、テンプレートをデプロイできるようにしました。 これで、Azure PowerShell を使用してコマンド ラインからデプロイするか、デプロイ コマンドを使用して Visual Studio からデプロイするかに関係なく、デプロイをカスタマイズして、これらのカスタマイズをいつでも実行できるようになりました。 Visual Studio からデプロイするには、Azure SDK 2.6 以降がインストールされている場合に、Azure SDK 2.6 以降のデプロイ PowerShell スクリプトを使用する必要があります。

また、Microsoft 内の TFS 自動ビルドや他のプロジェクトでの命名規則により的確に合うように、いくつかの変数名とビルド タスクが調整されました。 PowerShell スクリプトの起動に必要な変数と値を収集する Visual Studio のコードによって、これらの新しい名前が検索されます。

## 次のステップ

Visual Studio で Azure リソース グループにリソースを追加する方法については、次を参照してください。 [Visual Studio で編集リソース マネージャー テンプレート](vs-azure-tools-resource-group-adding-resources.md)します。


