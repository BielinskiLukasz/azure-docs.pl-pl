<properties 
    pageTitle="Application Insights: プロアクティブな検出" 
    description="Application Insights は、アプリの製品利用統計情報の詳細な分析を実行し、潜在的なパフォーマンスの問題について警告します。" 
    services="application-insights" 
    documentationCenter="windows"
    authors="antonfrMSFT" 
    manager="douge"/>

<tags 
    ms.service="application-insights" 
    ms.workload="tbd" 
    ms.tgt_pltfrm="ibiza" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="11/17/2015" 
    ms.author="awills"/>


# Application Insights: プロアクティブな検出

*Application Insights はプレビュー段階です。*


Application Insights は、アプリの製品利用統計情報について詳細に分析し、潜在的なパフォーマンスの問題について警告できます。 この記事は、プロアクティブなアラートを電子メールで受信したユーザーを主に想定しています。

## プロアクティブな検出とは

プロアクティブな検出では、機械学習アルゴリズムとデータ マイニング アルゴリズムを使用して、アプリケーションのパフォーマンスに影響を与える異常パターンを検出します。 プロアクティブな検出により、Application Insights によって収集されたパフォーマンス テレメトリが自動的に分析されます。 アプリケーションの異常なパフォーマンスについて、電子メールが送信されます。 しきい値規則を設定する必要はありません。 プロアクティブな検出通知は、クイック トリアージと問題の診断を使用する Application Insights の分析機能と統合されます。

プロアクティブな検出はプレビュー段階であり、まだ Application Insights のすべてのユーザーが使用できる状態ではありません。 試してみる場合は、AppInsightsML@microsoft.com にお問い合わせくださいと私たちは連携を設定します。

## プロアクティブなアラートについて

* *この電子メールが送られてきたのはなぜですか。*
 * プロアクティブな検出によって、アプリケーションから Application Insights に送信されたテレメトリが分析され、アプリケーションでパフォーマンスの問題が検出されたからです。
* *この通知は、明らかに問題があることを意味していますか。*
 * 番号 単に提案ですれる何かについてより詳しく確認することができます。
* *どうすればよいですか。*
 * [記載されているデータを見て](#responding-to-an-alert)します。 メトリックス エクスプローラーを使用してパフォーマンスを経時的に見直し、その他のメトリックを調べます。 [検索] を使用して、根本原因の特定に役立つ特定のイベントを除外します。
* *私のデータはマイクロソフトからも見られるのですか。*
 * 番号 サービスは完全に自動化できます。 通知を受け取るだけです。 データが [プライベート](app-insights-data-retention-privacy.md)します。


## 検出プロセス

* *どのような異常が検出されますか。*
 * ユーザーご自身で確認するには時間がかかるようなパターンが検出されます。 たとえば、場所、時刻、プラットフォームといった特定の組み合わせにおけるパフォーマンスの低下などです。
* *Application Insights によって収集されたすべてのデータが分析されるのですか。*
 * 現時点ではすべてではありません。 現在は、要求の応答時間とページの読み込み時間が分析されます。 その他のメトリックの分析も間もなく行われる予定です。
* *独自の異常検出ルールを作成できますか。*
 * まだありません。 ただし、次のことができます。
 * [アラートを設定する](app-insights-alerts.md) メトリックがしきい値を超えたことを指示します)。
 * [テレメトリのエクスポート](app-insights-export-telemetry.md) に、 [データベース](app-insights-code-sample-export-sql-stream-analytics.md) または [power bi](app-insights-export-power-bi.md) または [他の](app-insights-code-sample-export-telemetry-sql-database.md) を分析できます、自己診断ツールです。
* *どのくらいの頻度で分析は実行されますか。*
 * 前日のテレメトリの分析が毎日実行されます。
* * も増えます。 この置換 [メトリック アラート](app-insights-alerts.md)でしょうか。
 * 番号 異常を検討するすべての動作を検出するために私たちをコミットしないようにします。

## 発生した問題をプロアクティブな検出によって調査する方法

異常レポートは、メールまたは異常リストから開きます。

![](./media/app-insights-anomaly/03.png)


* **[日時]** は、問題が検出された日時を示します。
* **[内容]** には、以下が示されます。
 * 検出された問題。
 * 問題の動作が見られたイベント セットの特性。
* パフォーマンスの低いセットと他のすべてのイベントの平均的な動作の比較表。

リンクをクリックしてメトリックス エクスプローラーを開き、パフォーマンスの低いセットの時間とプロパティでフィルターされた関連するレポートで検索を実行します。

時間の範囲とフィルターを変更して、製品利用統計情報を調べます。

## パフォーマンスを向上させるにはどうすればよいですか。

Web サイト ユーザーにとって最大の不満の 1 つは、自らの経験でわかるように、時間のかかる応答や応答障害です。 したがって、この問題に対処することが重要です。

### トリアージ

まず、それは重要なことですか。 ページの読み込みには常に時間がかかるが、そのページの閲覧を必要としているユーザーが 1 % にすぎない場合は、多分、他にもっと考えるべき重要なことがあります。 一方、ユーザーの 1% しかそのページを開いていないが、毎回例外がスローされる場合、調べてみる価値はあるでしょう。

一般的なガイドラインとして、電子メールで IMPACT ステートメントを使用します。ただし、それがすべてではありません。 確認すべきその他の証拠を収集します。

問題のパラメーターを検討します。 地理的な場所に依存している場合のセットアップ [可用性テスト](app-insights-monitor-web-app-availability.md) その領域を含む: 単にネットワーク上の問題あります領域にあります。

### 遅いページ読み込みの診断

どこに問題がありますか。 サーバーは応答するのに時間がかかりますか。ページはかなり長いですか。ページを表示するのにブラウザーは多くの処理を必要としますか。

ブラウザーのメトリック ブレードを開きます。  [ブラウザー ページの読み込み時間の表示をセグメント化](app-insights-javascript.md#explore-your-data) 時間のことを示しています。

* **[要求送信時間]** の値が大きい場合は、サーバーの応答に時間がかかっているか、または要求が大量のデータを伴う POST 要求です。 見て、 [パフォーマンス メトリック](app-insights-web-monitor-performance.md#metrics) 応答時間を調査します。
* セットアップ [依存関係の追跡](app-insights-dependencies.md) をかかっての外部のサービスまたはデータベースの原因であるかどうかを確認します。
* **[受信応答時間]** が大部分を占めている場合は、ページと、JavaScript、CSS、イメージなどのページの依存部分 (ただし、非同期で読み込まれるデータではない) が長くなっています。 セットアップ、 [可用性テスト](app-insights-monitor-web-app-availability.md), 、および依存する部分を読み込むオプションを設定してください。 いくつかの結果を取得したら、結果の詳細を開き展開して、各種ファイルの読み込み時間を表示します。
* **[クライアントの処理時間]** の値が大きい場合は、スクリプトの実行に時間がかかっています。 理由が明らかでない場合は、何らかのタイミング コードを追加することを検討し、trackMetric 呼び出しで時間を送信してください。

### 表示が遅いページの改善

サーバーの応答およびページ読み込み時間を短縮するためのアドバイスは Web に多数掲載されていますが、ここではその一部を取り上げます。 把握済みかもしれませんがいくつかのヒントを参考までに以下に示します。

* ファイルのサイズが大きいため読み込みに時間がかかる: スクリプトとその他の部分を非同期に読み込みます。 スクリプトのバンドルを使用します。 メイン ページをウィジェットに分割し、データを別々に読み込みます。 長いテーブルに対して古いプレーンな HTML が送信されない: スクリプトを使用してデータを JSON またはその他のコンパクトな形式で要求し、所定のテーブルに入力します。 このようなすべてにおいて有効な優れたフレームワークがあります  (これらはまた、当然ながら、大きなスクリプトを伴います)。
* サーバーの依存関係が低速: コンポーネントの地理的な場所について検討してください。 たとえば、Azure を使用している場合、Web サーバーとデータベースが同じリージョンにあることを確認します。 クエリで必要以上の情報が取得されませんか。 キャッシュまたはバッチは役に立ちますか。
* 容量の問題: 応答時間と要求数のサーバー メトリックを確認してください。 応答時間のピークと要求数のピークが合わない場合は、サーバーが拡大されている可能性があります。


## 通知メール

* *通知を受信するために、このサービスに登録する必要はありますか。*
 * 番号 ボットは定期的に Application Insights のすべてのユーザーからのデータを調査して、問題を検出した場合に通知を送信します。
* *登録を解除できますか。または、代わりに同僚に通知が送信されるように設定できますか。*
 * アラートまたはメールの登録解除リンクをクリックします。

    ある人に送信すること現在 [Application Insights のリソースへの書き込みアクセス](app-insights-resources-roles-access-control.md)します。
* *メッセージで受信ボックスをいっぱいにしたくありません。*
 * 1 日 1 通に制限されています。 どのメッセージも繰り返し送信されることはありません。
* *通知に対して何もしない場合、リマインダが送信されますか。*
 * いいえ。各問題についてのメッセージが送信されるのは 1 回のみです。
* * メールが消えました。 ポータルで通知を見つけ、ですか *。
 * アプリの Application Insights の概要で、**[プロアクティブな検出]** タイルをクリックします。


## 関連記事:

* [検出、トリアージ、診断](app-insights-detect-triage-diagnose.md)
* [メトリックの警告の設定](app-insights-alerts.md)
* [メトリックス エクスプ ローラー](app-insights-metrics-explorer.md)
* [エクスプ ローラーの検索](app-insights-diagnostic-search.md)





