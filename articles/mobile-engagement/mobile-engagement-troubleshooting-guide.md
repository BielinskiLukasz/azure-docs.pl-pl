<properties 
   pageTitle="Azure Mobile Engagement トラブルシューティング ガイド" 
   description="Azure Mobile Engagement 関連のトラブルシューティング ガイド" 
   services="mobile-engagement" 
   documentationCenter="" 
   authors="piyushjo" 
   manager="dwrede" 
   editor=""/>

<tags
   ms.service="mobile-engagement"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="mobile-multiple"
   ms.workload="mobile" 
   ms.date="10/22/2015"
   ms.author="piyushjo"/>

# Azure Mobile Engagement - トラブルシューティング ガイド

## はじめに
以下のトラブルシューティング ガイドは、よく発生するいくつかの問題について根本原因を理解するのに役立ちます。また、このガイドを参照することで、トラブルシューティングを自分で行うことができます。 

## 全般

一般に、次の項目を常に確認してください。

1. 」の説明に従って、統合に必要なすべての手順を終了したことを確認、 [入門チュートリアル](mobile-engagement-windows-store-dotnet-get-started.md)
2. 最新バージョンのプラットフォーム SDK を使用しています。 
3. エミュレーターのみに特有の問題もあるため、実際のデバイスとエミュレーターの両方でテストを行います。 
4. 任意の制限/スロットル モバイル エンゲージメントからこのドキュメントで説明に達したいない [ここで](azure-subscription-service-limits.md)
5. モバイル エンゲージメント サービスのバックエンドに接続できない、または表示ではない場合ロードされていない継続的に、データをチェックして継続的なサービスの問題がないことを確認 [ここで](https://azure.microsoft.com/status/)

## 「監視」に関する問題

### 目的のデバイスが [監視] タブに表示されません。
[監視] タブにはリアルタイムで Mobile Engagement プラットフォームに接続されているデバイスが表示されます。 エミュレーターとデバイスでデバッグしている場合は、ここにセッションが少なくとも 1 つ表示される必要があります。 アプリケーションが配布されると、リアルタイムでプラットフォームに接続されているデバイスがアクティブ セッション ゲージに示されます。 

[監視] タブにデバイスが表示されない場合、おそらくは SDK の統合に問題があります。 トラブルシューティングで一般的に使用する手順を次に示します。

1. モバイル アプリで正しい接続文字列が使用されていること、さらに、その接続文字列が [API キー] セクションからではなく、[SDK キー] セクションからのものであることを確認します。 この接続文字列はモバイル アプリを Mobile Engagement アプリのインスタンスに接続します。これにより、[監視] タブにデバイスが表示されます。 
2. Windows プラットフォームの場合 - ページが `OnNavigatedTo` メソッドより優先される場合は、必ず `base.OnNavigatedTo(e)` を呼び出します。
3. 既存のモバイル アプリにモバイル エンゲージメントを統合するかどうかは、高度な統合の手順で、手順を失われていないことも確認できます [ここで](mobile-engagement-windows-store-integrate-engagement.md)
4. 」の説明に従って作業しているプラットフォームに応じてのページをオーバーライドすることで、少なくとも 1 つの画面/アクティビティを送信することを確認、 [入門チュートリアル](mobile-engagement-windows-store-dotnet-get-started.md)します。

### アプリ/エミュレーターを切断または終了しても、[監視] タブにセッションが表示されています。 
この時点でプラットフォームに接続しているユーザーが 1 人だけであり、そのユーザーがエミュレーターを使用してアプリを開いている場合、この症状はエミュレーターの Quirks 動作によるものであると考えられます。 一般に、アプリ セッションが正常に切断されるためには、エミュレーターでホーム画面に戻っていることを確認する必要があります。 さらに、Windows プラットフォームで Visual Studio でのデバッグ中にする必要があります、Visual Studio に移動することを確認、 **ライフ サイクル イベント** のクリックしてメニュー バー **Suspend** を本当にセッションを閉じます。 参照してください [Windows チュートリアル](mobile-engagement-windows-store-dotnet-get-started.md) 詳細です。 

## 「分析」に関する問題

### [分析] タブにデータが何も表示されません。あるいは更新されたデータが表示されません。 
分析データは定期的に再計算されます。この更新には最大 24 時間かかる可能性があります。 このデータはリアルタイムのデータではありません。表示されるのは、この 24 時間の期間内に更新されるデータとなります。
ただし、少なくとも 1 つのページを `EngagementActivity` でオーバーライドするか、または `SendActivity` を明示的に呼び出すことによってプラットフォームのバックエンドに少なくとも 1 つの画面またはアクティビティを送信していることを確認してください。 

### [分析] タブに表示されるデバイスのキャプチャされた日付と時刻が正しくありません。
分析の期間は、ユーザーのデバイス設定からの日付に基づいています。 デバイスの日付が正しく設定されていることを確認してください。 

## 「セグメント」に関する問題

### セグメントを作成しましたが、セグメントがグレー表示となっています。または、セグメントにデータが表示されません。
現時点でセグメントの作成はリアルタイムで行われません。 セグメントの計算は、分析データの集計と同時に行われるので、最大で 24 時間かかる可能性があります。 後で確認する必要がありますが、一方で、セグメントを形成する際に使用するデータがモバイル アプリによって実際に送信されていることも確認してください。 例:  イベントと答えると、モバイル デバイスはありません"foo"を送信している EventName で作成されたセグメントのセグメント データでしょう場合は、foo を基準として = します。 また、SDK 統合をチェックして、モバイル アプリによってデータが正しく送信されていることを確認する必要があります。 

## 「リーチ」またはプッシュ通知に関する問題

### プッシュ メッセージが配信されません。 

1. すべてのコンポーネント (モバイル アプリ、SDK、およびサービス) が正しく接続されていて、プッシュ通知を配信できる状態にあることを確認するために、まず、テスト デバイスに通知を送信してみてください。 
2. 常に、スケジュールも対象ユーザー設定基準も指定されていないキャンペーンを経由して最も単純な 'アプリ外通知' を最初に送信します。 これは、もう一度、通知接続が正常に機能していることを証明するための作業です。 
3. アプリ内通知の配信に問題が生じている場合は、最初の手順としてまずアプリ外通知を送信してみるのも有効な手順です。 
4. モバイル アプリに対して 'ネイティブ プッシュ' が正しく構成されていることを確認します。 プラットフォームによって異なりますが、ネイティブ プッシュではキー (Android、Windows) または証明書 (iOS) のいずれかが必要となります。 参照してください [ユーザー インターフェイス - Settings](mobile-engagement-user-interface-settings.md)
5. ユーザーがモバイル OS を介してアプリ外通知をブロックしている場合もあります。この状況が発生していないことを確認します。 
6. 設定しないことを確認、 *無視の対象ユーザーでは、プッシュは、API を使用してユーザーに送信されます* オプション、 **キャンペーン** リーチの「キャンペーンのプッシュ通知 Api を使用して送信されるだけでしたがこうあるためです。 
7. 問題の原因になり得るネットワーク接続を排除するために、WIFI 経由で接続されているデバイスと電話オペレーター ネットワークの両方を使用してプッシュ キャンペーンがテストされていることを確認します。
8. 非同期デバイスもプッシュ通知サービスの通知配信機能を妨げるので、デバイス/エミュレーターのシステム日付/時刻が正しいことを確認します。 

さらに、プラットフォーム固有のトラブルシューティングの手順を以下に示します。

1. **iOS** 

    - iOS Push Notifications の証明書が有効であり、かつ期限切れになっていないことを確認します。 
    - 正しく構成することを確認、 *運用* モバイル エンゲージメント アプリ内の証明書。 
    - テストしていることを確認、 *物理デバイス。*IOS シミュレーターはプッシュ メッセージを処理できません。
    - モバイル アプリでバンドル識別子が正しく構成されていることを確認します。 手順を参照して [ここで](https://developer.apple.com/library/prerelease/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html#//apple_ref/doc/uid/TP40012582-CH26-SW6)
    - テストするときは、モバイル プロビジョニング プロファイルの "アドホック" ディストリビューションを使用します。 アプリが "デバッグ" を使用してコンパイルされている場合、通知は受信できません。

2. **Android**

    - モバイル アプリの AndroidManifest.xml ファイル内にプロジェクト番号 (文字 \n の後に続く) が正しく指定されていることを確認します。 
    
            <meta-data android:name="engagement:gcm:sender" android:value="************\n" />
        
    - Android マニフェスト ファイル内でアクセス許可が不足していないこと、または不適切な構成がないことを確認します。 
    - システムを受信している場合が、通知でのアプリケーションではなく、確認、 [通知] セクションのアイコンを指定](mobile-engagement-android-get-started.md) 可能性としては指定しません適切なアイコン Android マニフェスト ファイルにします。 
    - BigPicture 通知を送信する場合に、外部イメージ サーバーを使用する場合は、それらのサーバーが HTTP の "GET" と "HEAD" をサポートする必要があります。

3. **Windows**
    
    - アプリが有効な Windows ストア アプリに関連付けられていることを確認します。 Visual Studio - プロジェクトを右クリックし、[アプリとストアを関連付ける] オプションを選択し、Windows ストアで作成したアプリを選択する必要があります。 この Windows ストア アプリは、Mobile Engagement ポータルで構成されるネイティブ プッシュ資格情報を取得した場所にあるアプリと同じである必要があります。
    - `EngagementOverlay` 統合でアプリ外プッシュ通知を受信しているがアプリ内通知は受信していない場合は、ページ内にルートの Grid 要素が存在することを確認してください。 EngagementOverlay は、xaml ファイルで見つけた最初の「Grid」要素を使用し、ページに 2 つの Web ビューを追加します。 Web ビューの設定場所を特定する場合は、次のように "EngagementGrid" という名前のグリッドを定義することができます。ただし、通知と次のアナウンスをアプリ内通知として表示する後続の 2 つの Web ビューについて、高さと幅が十分であることを確認する必要があります。
        
            <Grid x:Name="EngagementGrid"></Grid>

### プッシュ通知/アナウンス/キャンペーンを作成しましたが、これらは私に通知を送信した後も、'Active' と表示されています。 これはどういうことですか? 
 **キャンペーン** ので、新しいデバイスがモバイル エンゲージメント プラットフォームに接続すると、実行時間の長いプッシュ通知の意味はであるため、自動的に送信されますここでは、構成する通知のキャンペーンで設定する条件を満たしている限り、モバイル エンゲージメントで作成したと呼ばれます。 これは、ワン ショットの単一通知セットアップではありません。 [手動] をクリックする必要が、 **完了** に送信しません。 さらに通知されるように、キャンペーンを終了する] ボタンをクリックします。 

### プッシュ キャンペーンを作成し、通知を正常に受信しています。しかし、アプリを開くたびに、前に受信したにもかかわらず同じ通知が届きます。 
この現象は、テスト中で、エミュレーターまたは TestFlight のような何らかのテスト フレームワークを使用している場合に発生すると考えられます。 ここでは次のことが行われています。どのアプリ実行インスタンスでも、インスタンスは新しい DeviceID を取得して、それをバックエンドに送信します。これにより、Mobile Engagement プラットフォームはインスタンスを新しいデバイスとして扱い、通知を送信します。 

## サポートの利用

問題を自分で解決できない場合は、次のことを行うことができます。

1. StackOverflow フォーラムで、既存のスレッドで、問題の検索と [MSDN フォーラム](https://social.msdn.microsoft.com/Forums/windows/en-US/home?forum=azuremobileengagement) 場合はありませんし、質問があります。 
2. 追加/賛成票を投じて要求を存在しない機能を検索するかどうか、 [UserVoice フォーラム](http://feedback.azure.com/forums/285737-mobile-engagement)
3. Microsoft サポートを使用する場合は、次の詳細情報を指定してサポート インシデントを開いてください。 
    - Azure サブスクリプション ID
    - プラットフォーム (例: iOS、Android など)
    - アプリケーション ID
    - キャンペーン ID (プッシュ通知に関する問題の場合)
    - Device ID
    - Mobile Engagement SDK のバージョン (例: Android SDK v2.1.0)
    - 表示されるエラー メッセージとシナリオを含むエラーの詳細

