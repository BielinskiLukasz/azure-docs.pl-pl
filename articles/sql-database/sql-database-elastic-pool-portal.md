<properties
    pageTitle="スケーラブルなエラスティック データベース プールを作成する | Microsoft Azure"
    description="SQL Database 構成にスケーラブルなエラスティック データベース プールを追加して、多数のデータベースの管理とリソース共有を簡単にする方法について説明します。"
    keywords="scalable database,database configuration"
    services="sql-database"
    documentationCenter=""
    authors="stevestein"
    manager="jeffreyg"
    editor=""/>

<tags
    ms.service="sql-database"
    ms.devlang="NA"
    ms.date="12/01/2015"
    ms.author="sstein"
    ms.workload="data-management"
    ms.topic="get-started-article"
    ms.tgt_pltfrm="NA"/>



# Azure ポータルで SQL Database のスケーラブルなエラスティック データベース プールを作成する

> [AZURE.SELECTOR]
- [Azure portal](sql-database-elastic-pool-portal.md)
- [C#](sql-database-elastic-pool-csharp.md)
- [PowerShell](sql-database-elastic-pool-powershell.md)


この記事は、拡張性が高くを作成する方法を示します [弾力性データベース プール](sql-database-elastic-pool.md) Azure ポータルを使用します。 エラスティック データベース プールがある SQL Database 構成にすると、複数のデータベースの管理とリソース共有が簡単になります。
> [AZURE.NOTE] エラスティック データベース プールは現在プレビュー段階であり、SQL Database V12 サーバーでのみ使用できます。 SQL Database V11 サーバーがある場合は、 [V12 にアップグレードし、プールを作成する PowerShell を使用して](sql-database-upgrade-server.md) 1 つのステップにします。


開始する前に、SQL Database V12 サーバー上にデータベースが必要です。 持っていない場合は、次を参照してください。 [最初の Azure SQL Database を作成する](sql-database-get-started.md) を 5 分以内で作成します。 実行できます SQL Database V11 サーバーが既にある場合、または [ポータルで V12 へのアップグレード](sql-database-v12-upgrade.md) 復帰して、プールを作成する、次の手順に従います。


## 手順 1: サーバーにプールを追加します

サーバーに新しいプールを追加することで、エラスティック データベース プールを作成します。 サーバーに複数のプールを追加できますが、各プールに関連付けられるサーバーは 1 つのみです。 さらに、サーバー上のデータベースのすべてまたは一部をプールに追加できます。


[Azure ポータル](https://portal.azure.com/) ] をクリックして **の SQL server**, 、クリックして、プールに追加するデータベースをホストするサーバーをクリックして **プールの追加**します。

![サーバーへのプールの追加](./media/sql-database-elastic-pool-portal/elastic-pool-add-pool.png)

または

サーバーの推奨プールがあることを示すメッセージが表示された場合、それをクリックして、簡単に確認し、サーバーのデータベースに最適化されたプールを作成します。 詳細については、「 [推奨エラスティック データベース プール](sql-database-elastic-pool-portal.md#recommended-elastic-database-pools)します。


![エラスティック プールの作成][1]


**エラスティック データベース プール** ブレードには、価格レベルの選択、データベースの追加、プールのパフォーマンス特性の構成を行うためのオプションが用意されています。
> [AZURE.NOTE] **[プールの追加]** コマンドを初めて選択する場合は、**[プレビューの使用条件]** を選択し、**[プレビューの使用条件]** ブレードを完了してプレビューの使用条件に同意する必要があります。 サブスクリプションごとにこれを 1 回のみ行う必要があります。

   ![エラスティック プールの構成][2]

## 手順 2: 価格レベルを選択します

プールの価格レベルによってプールのエラスティック データベースで使用できる機能が決まり、eDTU の最大数 (eDTU MAX) や各データベースで使用できるストレージ容量 (GB) が決まります。 詳細については、「 [サービス階層](sql-database-service-tiers.md#Service-tiers-for-elastic-database-pools)します。
>[AZURE.NOTE] 現在のところ、プレビューでは、エラスティック データベース プールの価格レベルを作成後に変更することはできません。 既存のエラスティック プールの価格レベルを変更するには、任意の価格レベルで新しいエラスティック プールを作成し、その新しいプールにエラスティック データベースを移行します。

   ![[価格レベル]][9]


### お勧めの価格レベル

SQL Database サービスは利用履歴を評価し、シングル データベースの利用より対費用効果が高いとき、1 つまたは複数のエラスティック データベース プールを推奨します。

価格レベルに、星 (![スター][10]) は、データベース ワークロードをお勧めします。

複数の価格レベルが推奨される場合、複数のエラスティック データベース プールを作成しなければなりません。 それぞれの推奨事項は、サーバーのデータベースでプールに最適なデータベースを一意の小集合にしたもので構成されます。

エラスティック データベース プールの価格レベルを単に提案するだけでなく、各プール推奨事項には次が含まれます。

- プールの価格レベル (Basic、Standard、Premium)。
- 適切な量のプール eDTU。
- エラスティック データベースの最小/最大 eDTU 設定。
- 推奨データベースの一覧。

エラスティック データベース プールを推奨するとき、このサービスでは過去 30 日間のテレメトリが考慮されます。 あるデータベースをエラスティック データベース プールの候補と見なすとき、それは 7 日間以上存在している必要があります。 エラスティック データベース プールに既に存在するデータベースはエラスティック データベース プール推奨の候補として考慮されません。

このサービスでは、各サービス レベルのシングル データベースを同じレベルのエラスティック データベース プールに移動することの必要性と対費用効果が評価されます。 たとえば、サーバーのすべての Standard データベースの Standard エラスティック プールに対する適合性が評価されます。 つまり、このサービスでは、Standard データベースを Premium プールに移動することなど、レベル間の推奨は行われません。
>[AZURE.NOTE] Web データベースとビジネス データベースは利用履歴とデータベース 剤図に基づいて新しい Basic レベル、Standard レベル、Premium レベルのいずれかにマッピングされます。 新しいレベルへのマッピングでは、適切なプールに対して Web データベースとビジネス データベースが推奨されます。


## 手順 3: データベースをプールに追加します

どの時点でも、特定のデータベースを選択してプールに含めることができます。 新しくプールを作成する場合、Azure ではプールに含めることでメリットのあるデータベースを推奨し、含めるようマークすることをお勧めしています。 サーバーで使用可能なすべてのデータベースを追加したり、初期のリストで必要に応じてデータベースを選択、削除したりできます。

   ![データベースの追加][5]

プールに追加するデータベースを選択する場合、次の条件を満たす必要があります。

- プールにデータベースのためのスペースがあること (データベースの最大数がすでに含まれていないこと)。 具体的には、プールには、各データベースの eDTU 保証をカバーする利用可能な eDTU が十分にある必要があります (たとえば、グループの eDTU 保証が 400 で、各データベースの eDTU 保証が 10 である場合、プールで使用できるデータベースの最大数は 40 になります (DB あたり 400 eDTU/10 eDTU = 40 最大データベース)。
- データベースで使用される現在の機能は、プールで使用できる必要があります。


## 手順 4: パフォーマンス特性を調整します

プールのパフォーマンスを構成するには、プールと、プール内のエラスティック データベースの両方のパフォーマンス パラメーターを設定します。 **[エラスティック データベースの設定]** はプール内のすべてのデータベースに適用されることにご注意ください。

   ![エラスティック プールの構成][3]

プールのパフォーマンスを定義するには、プールの eDTU 保証、プール内のエラスティック データベースに対する eDTU MIN と eDTU MAX の 3 つのパラメーターを設定できます。 次の表は、それぞれについての説明と、設定方法について一部のガイドを表しています。 特定の使用可能な値の設定を参照してください。 [エラスティック データベース プールのリファレンス](sql-database-elastic-pool-reference.md)します。

| パフォーマンス パラメーター| 説明|
| :--- | :--- |
| **プール eDTU** - プールの eDTU 保証| プールの eDTU 保証とは使用可能な eDTU の保証の数であり、プール内のすべてのデータベースで共有されます。<br> グループの eDTU 保証の特定のサイズは、グループの履歴の eDTU の使用率を考慮してプロビジョニングする必要があります。 あるいは、このサイズはデータベースごとに要求される eDTU 保証によって、また同時に実行されているアクティブなデータベースを活用することで、設定されます。プールの eDTU 保証はプールで使用可能なストレージの容量にも関連します。プールに割り当てたあらゆる eDTU ごとに固定量のデータベース ストレージが得られます。<br> **くださいは何を設定するプールの eDTU 保証?**<br>少なくとも、プールの eDTU 保証に設定する必要があります ([データベースの数] x [平均 DTU 使用率のデータベースごと])。|
| **eDTU MIN** - 各データベースの eDTU 保証| データベースごとの eDTU 保証は、プール内の 1 つのデータベースが保証される eDTU の数です。たとえば、Standard プールの場合、この保証は 0、10、20、50、100 eDTU に設定できます。そのグループでデータベースへの保証を提供しないことを選ぶこともできます (eDTU MIN = 0)。<br> **くださいは何を設定データベースごとの eDTU 保証?**<br> 通常、データベース (eDTU の最小値) ごとの eDTU 保証に設定されます任意の場所 0 と、([平均使用率のデータベースごと])。データベースごとの eDTU 保証は、プール内のすべてのデータベースの eDTU 保証を設定するグローバル設定です。|
| **eDTU MAX** - データベースごとの eDTU の上限| データベースごとの eDTU MAX は、プール内の 1 つのデータベースで使用される可能性がある eDTU の最大数です。 データベースごとの eDTU の上限は十分に高く設定し、データベースで発生する可能性があるバーストやスパイクを処理できるようにします。この上限はシステムで制限されている値まで設定できます。制限値はプールの価格レベルによって異なります (Premium は 1000 eDTU)。 この上限の特定のサイズは、グループ内のデータベースの最大使用率パターンと合っている必要があります。 ある程度、グループが必要、プールには、データベースのホットとコールドの使用パターン、通常と見なされるため、すべてのデータベースはない同時にピークとなるです。<br>**データベースごとの eDTU 上限には何を設定する必要がありますか。**<br> ([データベースの最大使用率]) に、データベースごとの eDTU の最大値または eDTU キャップ セットです。たとえば、データベースごとの最大使用率を 50 DTU とし、グループの 100 のデータベースの 20% のみが同時に最大で使用されると仮定します。 データベースごとの eDTU 上限が 50 eDTU に設定されている場合は、プールを 5 倍に設定するか、グループの eDTU 保証 (プール eDTU) を 1,000 eDTU と高く設定しておいても問題はありません。eDTU 上限はデータベースのリソース保証ではなく、使用可能な場合に達する可能性がある eDTU の限度であることにご注意ください。|

## 推奨されるエラスティック データベース プール

SQL Database V12 サーバーを参照すると、そのサーバーに推奨されるエラスティック データベース プールがあることを示すメッセージが表示される場合があります。

エラスティック データベース プールの価格レベルの提案と同様に、推奨されるプールは既に設定されている次の項目で事前構成されています。

- プールの価格レベル。
- 適切な量のプール eDTU。
- データベースの最小/最大 eDTU 設定。
- 推奨データベースの一覧。

### 推奨されるプールの作成

1. メッセージをクリックして、推奨されるプールの一覧を表示します。

     ![推奨されるプール][12]

1. プールをクリックして、詳細な推奨設定を表示します。
2. 単にプール名を編集し、**[OK]** をクリックしてプールを作成します  (推奨されるプールは作成した後でなければ変更できません)。

    ![推奨されるプール][11]


## プールに対するデータベースの追加および削除

プールの作成後、「**データベースの追加**」ページでデータベースを選んでプールに追加したり、選択を解除してプールから削除したりできます。

プールを作成したら、Transact-SQL を使用してプールに新しいエラスティック データベースを作成したり、データベースをプールの内外に移動したりできます。 詳細情報を参照してください、 [Transact SQL の弾力性データベース プール参照](sql-database-elastic-pool-reference.md#Transact-SQL). *


## エラスティック データベース プールの監視と管理

エラスティック データベース プールを作成した後で、既存のプールの一覧を参照し、目的のプールを選択して、ポータルでプールを監視したり管理したりできます。

プールを作成した後、次のことができます。

- **[プールの構成]** を選択し、プール eDTU とデータベース設定ごとの eDTU を変更できます。
- **[ジョブの作成]** を選択し、エラスティック ジョブを作成してプールのデータベースを管理できます。 エラスティック ジョブにより、プール内の任意の数のデータベースに対して Transact-SQL スクリプトを実行できます。 詳細については、次を参照してください。 [弾力性データベース ジョブの概要](sql-database-elastic-jobs-overview.md)します。
- **[ジョブの管理]** を選択し、既存のエラスティック ジョブを管理します。



![エラスティック プールの監視][8]




![エラスティック プールの監視][4]

既存のプールを選択すると、プールのリソース使用率を確認できます。 **[リソース使用率]** グラフをクリックして、グラフをカスタマイズして警告を設定できる **[メトリック]** ブレードを開きます。


![リソース使用率][6]

**[グラフの編集]** をクリックしてパラメータを追加すると、プールのテレメトリを容易に確認できるようになります。


![グラフの編集][7]




## 次のステップ

エラスティック データベース プールを作成した後は、エラスティック ジョブを作成してプール内のデータベース を管理できます。 エラスティック ジョブはプールのデータベースの任意の数に対して Transact-SQL スクリプトの実行を容易にします。 詳細については、次を参照してください。 [弾力性データベース ジョブの概要](sql-database-elastic-jobs-overview.md)します。



## その他のリソース

- [SQL Database エラスティック プール](sql-database-elastic-pool.md)
- [PowerShell を使用した SQL Database のエラスティック プールを作成します。](sql-database-elastic-pool-powershell.md)
- [作成し、c# での SQL データベースの管理](sql-database-client-library.md)
- [エラスティック データベースのリファレンス](sql-database-elastic-pool-reference.md)




[1]: ./media/sql-database-elastic-pool-portal/new-elastic-pool.png 
[2]: ./media/sql-database-elastic-pool-portal/configure-elastic-pool.png 
[3]: ./media/sql-database-elastic-pool-portal/configure-performance.png 
[4]: ./media/sql-database-elastic-pool-portal/monitor-elastic-pool.png 
[5]: ./media/sql-database-elastic-pool-portal/add-databases.png 
[6]: ./media/sql-database-elastic-pool-portal/metric.png 
[7]: ./media/sql-database-elastic-pool-portal/edit-chart.png 
[8]: ./media/sql-database-elastic-pool-portal/configure-pool.png 
[9]: ./media/sql-database-elastic-pool-portal/pricing-tier.png 
[10]: ./media/sql-database-elastic-pool-portal/star.png 
[11]: ./media/sql-database-elastic-pool-portal/recommended-pool.png 
[12]: ./media/sql-database-elastic-pool-portal/pools-message.png 

