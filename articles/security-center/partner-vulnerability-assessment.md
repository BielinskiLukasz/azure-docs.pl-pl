---
title: Skanery luk w zabezpieczeniach w Azure Security Center
description: Azure Security Center obsługuje integrację rozwiązań do oceny luk w zabezpieczeniach innych firm. W tym artykule opisano sposób konfigurowania tych narzędzi.
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.service: security-center
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 12/13/2019
ms.author: memildin
ms.openlocfilehash: ac68e5a91f72954ce54892f22ab5ba3a7a593bbf
ms.sourcegitcommit: 877491bd46921c11dd478bd25fc718ceee2dcc08
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/02/2020
ms.locfileid: "82611436"
---
# <a name="deploying-a-partner-vulnerability-scanning-solution"></a>Wdrażanie rozwiązania do skanowania luk w zabezpieczeniach

Jeśli korzystasz z warstwy Standardowa, możesz użyć wbudowanego narzędzia do oceny luk w zabezpieczeniach Azure Security Center, jak opisano w artykule [zintegrowany skaner luk w zabezpieczeniach maszyn wirtualnych](built-in-vulnerability-assessment.md). To narzędzie nie wymaga licencji Qualys, a nawet konta Qualys — wszystko, co jest obsługiwane bezproblemowo w Security Center.

Alternatywnie możesz chcieć wdrożyć własne rozwiązanie do oceny luk w zabezpieczeniach z licencją [Qualys](https://www.qualys.com/lp/azure) lub [Rapid7](https://www.rapid7.com/products/insightvm/). Jedno z tych rozwiązań partnerskich można zainstalować na wielu maszynach wirtualnych należących do tej samej subskrypcji.

## <a name="configuring-a-partner-solution-in-the-azure-portal"></a>Konfigurowanie rozwiązania partnerskiego (w Azure Portal)

1. Na pulpicie nawigacyjnym usługi **Security Center** w sekcji **Przegląd** kliknij pozycję **Zalecenia**.

1. Na stronie **zalecenia** wybierz pozycję **rozwiązanie do oceny luk w zabezpieczeniach na maszynach wirtualnych**.

    ![Ocena luk w zabezpieczeniach](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig1-new.png)

1. Na stronie **maszyny wirtualne należy zainstalować rozwiązanie do oceny luk w zabezpieczeniach** , wybierz maszyny wirtualne, na których chcesz zainstalować rozwiązanie do oceny luk w zabezpieczeniach.

    ![Dodawanie rozwiązania do oceny luk w zabezpieczeniach](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig2-new.png)

1. Na stronie **maszyny wirtualne należy zainstalować rozwiązanie do oceny luk w zabezpieczeniach** , a następnie kliknij pozycję **Zainstaluj na 2 maszynach wirtualnych** (nazwa może się różnić w zależności od liczby wybranych maszyn wirtualnych):

    ![Dodawanie rozwiązania do oceny luk w zabezpieczeniach](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig3-new.png)

1. Można utworzyć nowe rozwiązanie do oceny luk w zabezpieczeniach lub użyć istniejącego. W przypadku tworzenia nowego rozwiązania do oceny luk w zabezpieczeniach możesz wybrać rozwiązanie partnerskie w witrynie **Azure Marketplace**. Ewentualnie w obszarze **Używanie istniejącego rozwiązania** wybierz pozycję **Qualys** lub **Rapid7**.

    Aby wdrożyć agenta z poziomu usługi Security Center, potrzebny jest kod licencji i klucz publiczny od dostawcy. Aby dowiedzieć się, jak uzyskać kod licencji i klucz publiczny, zobacz [dokumentację firmy Qualys](https://community.qualys.com/docs/DOC-5823-deploying-qualys-cloud-agents-from-microsoft-azure-security-center) lub [dokumentację firmy Rapid7](https://insightvm.help.rapid7.com/docs/azure-security-center).


1. Aby utworzyć nową ocenę, kliknij pozycję **Utwórz nową**. Zostanie otwarta strona **Zarządzanie lukami w zabezpieczeniach** partnera. Opcje widoczne na tej stronie mogą ulec zmianie w zależności od partnera.

    ![Tworzenie nowego rozwiązania do oceny luk w zabezpieczeniach](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig4-new.png)

    Aby skonfigurować Qualys (na przykład), wybierz pozycję **Qualys** , a następnie:
    
    1. W obszarze **Grupa zasobów** wybierz pozycję **Użyj istniejącej**.
    
    1. W obszarze **Lokalizacja** wybierz miejsce, w którym rozwiązanie jest geograficznie usytuowane.
    
    1. W polu **Kod licencji** (jest to pole specyficzne dla rozwiązania Qualys) wpisz otrzymany od partnera numer licencji.
    
    1. W polu **Klucz publiczny** (jest to pole specyficzne dla rozwiązania Qualys) wpisz otrzymane od partnera dane klucza.
    
    1. Aby automatycznie zainstalować agenta oceny luk w zabezpieczeniach na wszystkich odnalezionych maszynach wirtualnych w ramach subskrypcji tego rozwiązania Qualys, zaznacz pole wyboru **Automatyczna aktualizacja** .
    
    1. Kliknij przycisk **OK**.


## <a name="configuring-a-partner-solution-using-powershell-and-the-rest-api"></a>Konfigurowanie rozwiązania partnerskiego (przy użyciu programu PowerShell i interfejsu API REST)

Aby programowo wdrożyć własne, licencjonowane w sposób prywatny rozwiązanie do oceny luk w zabezpieczeniach z usługi [Qualys](https://www.qualys.com/lp/azure) lub [Rapid7](https://www.rapid7.com/products/insightvm/), użyj dostarczonego skryptu skrypt [> PowerShell](https://github.com/Azure/Azure-Security-Center/tree/master/Powershell%20scripts/Vulnerability%20Solution). 

Ten skrypt używa interfejsu API REST w celu utworzenia nowego rozwiązania zabezpieczeń w języku ASC. Rozwiązanie wymaga licencji i klucza dostarczonego przez dostawcę usług: Qualys lub Rapid7.

> [!IMPORTANT] 
> Dla każdej licencji można utworzyć tylko jedno rozwiązanie. Próba utworzenia innego rozwiązania przy użyciu tej samej nazwy/licencji/klucza zakończy się niepowodzeniem.

### <a name="prerequisites"></a>Wymagania wstępne

Wymagane moduły programu PowerShell:

- Install-module AZ
- Install-module AZ. Security

### <a name="running-the-script"></a>Uruchamianie skryptu

Aby uruchomić skrypt, potrzebne są odpowiednie informacje dotyczące parametrów poniżej.

| **Parametr** | **Wymagane** | **Uwagi** |
|----|:----:|----|
|**Identyfikator**|✔|Identyfikator subskrypcji platformy Azure, która zawiera zasoby, które mają zostać poddane analizie.|
|**ResourceGroupName**|✔|Nazwa grupy zasobów. Użyj dowolnej istniejącej grupy zasobów, w tym domyślnej ("DefaultResourceGroup-XXX"). Ponieważ rozwiązanie nie jest zasobem platformy Azure, nie będzie ono wyświetlane w grupie zasobów, ale nadal jest dołączone do niego.|
|**vaSolutionName**|✔|Nazwa nowego rozwiązania.|
|**vaType**|✔|Qualys lub Rapid7.|
|**licenceCode**|✔|Ciąg licencji dostarczonej przez dostawcę.|
|**publicKey**|✔|Klucz publiczny podany przez dostawcę.|
|**autoUpdate**|-|Włącz (true) lub Disable (false) autodeploy dla tego rozwiązania. Po włączeniu każdej nowej maszyny wirtualnej w ramach subskrypcji zostanie automatycznie podjęta próba połączenia z rozwiązaniem.<br/>(Wartość domyślna: false)|


Składnia:

```
.\New-ASCVASolution.ps1 -subscriptionId <Subscription Id> -resourceGroupName <RG Name>
-vaSolutionName <New solution name> -vaType <Qualys / Rapid7> -autoUpdate <true/false>
-licenceCode <License code from vendor> -publicKey <Public Key received from vendor>
```

Przykład (ten przykład nie zawiera prawidłowych informacji o licencji):

```
.\New-ASCVASolution.ps1 -subscriptionId 'f4cx1b69-dtgb-4ch6-6y6f-ea2e95373d3b' -resourceGroupName 'DefaultResourceGroup-WEU' -vaSolutionName 'QualysVa001' -vaType 'Qualys' -autoUpdate 'false' `
-licenceCode 'eyJjaWQiOiJkZDg5OTYzXe4iMTMzLWM4NTAtODM5FD2mZWM1N2Q3ZGU5MjgiLCJgbTYuOiIyMmM5NDg3MS1lNTVkLTQ1OGItYjhlMC03OTRhMmM3YWM1ZGQiLCJwd3NVcmwiOiJodHRwczovL3FhZ3B1YmxpYy1wMDEuaW50LnF1YWx5cy5jb20vQ2xvdSKJY6VudC8iLCJwd3NQb3J0IjoiNDQzIn0=' `
-publicKey 'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCOiOLXjOywMfLZIBGPZLwSocf1Q64GASLK9OHFEmanBl1nkJhZDrZ4YD5lM98fThYbAx1Rde2iYV1ze/wDlX4cIvFAyXuN7HbdkeIlBl6vWXEBZpUU17bOdJOUGolzEzNBhtxi/elEZLghq9Chmah82me/okGMIhJJsCiTtglVQIDAQAB'
```


## <a name="review-the-recommendation"></a>Sprawdzanie zalecenia
Po zainstalowaniu rozwiązania do oceny luk w zabezpieczeniach na docelowej maszynie wirtualnej program Security Center skanuje maszynę wirtualną w celu wykrycia i zidentyfikowania luk w zabezpieczeniach systemu i aplikacji.

> [!NOTE]
> Pierwsze skanowanie może potrwać kilka godzin. Po jego wykonaniu proces będzie uruchamiany co godzinę.

Wykryte problemy są wyświetlane w obszarze **rekomendacje Virtual Machines**.

## <a name="next-steps"></a>Następne kroki

W tym artykule opisano wbudowane narzędzie do oceny luk w zabezpieczeniach obsługiwane przez program Qualys na potrzeby skanowania maszyn wirtualnych. W przypadku pokrewnego materiału zapoznaj się z następującymi artykułami:

- [Poznaj różne elementy zalecenia](security-center-recommendations.md)
- [Dowiedz się, jak skorygować zalecenia](security-center-remediate-recommendations.md)