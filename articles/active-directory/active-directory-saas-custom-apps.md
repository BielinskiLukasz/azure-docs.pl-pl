<properties 
    pageTitle="Azure Active Directory アプリケーション ギャラリーに含まれていないアプリケーションへのシングル サインオンの構成 | Microsoft Azure" 
    description="SAML およびパスワード ベースの SSO を使用して、Azure Active Directory にアプリをセルフサービス接続する方法について説明します。" 
    services="active-directory" 
    authors="asmalser-msft"  
    documentationCenter="na" manager="stevenpo"/>
<tags 
    ms.service="active-directory" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.tgt_pltfrm="na" 
    ms.workload="identity" 
    ms.date="11/18/2015" 
    ms.author="asmalser" />

#Azure Active Directory アプリケーション ギャラリーに含まれていないアプリケーションへのシングル サインオンの構成

Azure Active Directory アプリケーション ギャラリー」の説明に従って、Azure Active directory でのシングル サインオンの形式をサポートするために認識されているアプリケーションの一覧を提供する [今回](https://azure.microsoft.com/documentation/articles/active-directory-appssoaccess-whatis/)します。 (組織内の IT スペシャリストまたはシステム インテグレーターとして) 接続するアプリケーションを見つけたら、Microsoft Azure 管理ポータルに示される詳細な手順に従って、シングル サインオンを有効にすることができます。

顧客を [Azure Active Directory Premium](https://msdn.microsoft.com/library/azure/dn532272.aspx) ライセンスの取得から呼び出すことがこれらの追加機能、 **カスタム** Azure AD アプリケーション ギャラリーのカテゴリ。

* SAML 2.0 ID プロバイダーをサポートする任意のアプリケーションのセルフサービス接続
* パスワード ベースの SSO を使用する HTML ベースのサインイン ページがある任意の Web アプリケーションのセルフサービス接続
* 内のすべてのアプリケーションへのリンクを追加する機能、 [Office 365 アプリケーション ランチャー](https://blogs.office.com/2014/10/16/organize-office-365-new-app-launcher-2/) または [Azure AD アクセス パネル](https://azure.microsoft.com/documentation/articles/active-directory-appssoaccess-whatis/#deploying-azure-ad-integrated-applications-to-users)
* ユーザー プロビジョニングの SCIM プロトコルを使用するアプリケーションのセルフ サービスの接続 ([ここで説明した](active-directory-scim-provisioning))

これには、使用するが Azure AD アプリケーション ギャラリーにはまだ追加されていない SaaS アプリケーションだけでなく、組織がクラウドまたはオンプレミスで制御対象のサーバーにデプロイしたサードパーティの Web アプリケーションも含まれる場合があります。

注: アプリケーションを求める開発者に、アプリケーションとこの機能の間の互換性をテストできるようを使用して、 [無料の Azure Active Directory Premium 評価版](https://azure.microsoft.com/trial/get-started-active-directory/), を取得するように推奨されますが、 [内部の使用権ライセンス](https://mspartner.microsoft.com/en/us/pages/membership/internal-use-software.aspx)します。

##一覧にないアプリケーションまたはカスタム アプリケーションの追加 

アプリケーションを構成して、Azure Active Directory の管理者アカウントを使用して、Azure 管理ポータルにサインインしを参照、 **Active Directory > [ディレクトリ] > アプリケーション** ] セクションの [ **追加**, 、し **ギャラリーからアプリケーションを追加**します。 

![][1]

は、アプリケーション ギャラリーを使用してカスタムのアプリを追加できます、 **カスタム** カテゴリ、左側のかを選択して、 **一覧にないアプリケーションを追加** 必要なアプリケーションが見つからなかった場合は、検索結果に表示されているリンクします。 アプリケーションの [名前] を入力すると、シングル サインオン オプションとその動作を構成できます。 

**簡単なヒント**: ベスト プラクティスとして、検索関数を使用して既にアプリケーションがアプリケーション ギャラリーに存在するかどうかを確認してください。 アプリが検出され、その説明に "シングル サインオン" と記載されている場合は、フェデレーション シングル サインオンで既にそのアプリケーションがサポートされています。 

![][2]

カスタム アプリケーションを追加することで、事前に統合されたアプリケーションで使用可能なものによく似たエクスペリエンスが提供されます。 開始するには、選択 **シングル サインオンを構成する**です。 次の画面には、以降のセクションで説明されているシングル サインオンを構成するための 3 つのオプションが示されています。

![][3]


##Azure AD Single Sign-On

アプリケーションの SAML ベースの認証を構成するには、このオプションを選択します。 その場合、アプリケーションで SAML 2.0 がサポートされている必要があり、ユーザーは作業を続行する前に、アプリケーションの SAML 機能の使用方法に関する情報を収集する必要があります。 選択した後に **次**, 、アプリケーションの SAML エンドポイントに対応する 3 つの異なる Url を入力するように求められます。 

![][4]

ダイアログのツールヒント アイコンでは、各 URL とその使用方法に関する詳細が示されます。 これらの入力後にをクリックして **次** 次の画面に進みます。 この画面には、Azure AD からの SAML トークンを受け入れられるようにアプリケーション側で構成する必要がある内容についての情報が示されます。 

![][5]

必要な値はアプリケーションによって異なるため、詳細についてはアプリケーションの SAML ドキュメントを参照してください。  **サインオン** と **サインアウト** サービスの両方を Azure AD のインスタンスの SAML 要求処理のエンドポイントは、同じエンドポイントに解決する URL。 発行者の URL は、アプリケーションに発行される SAML トークン内の "発行者" として表示される値です。 

アプリケーションが構成した後にをクリックして **次** ] ボタンをクリックし、 **完了** ダイアログを閉じます。 

##SAML アプリケーションにユーザーとグループを割り当てる 

SAML ベースの ID プロバイダーとして Azure AD を使用するようにアプリケーションを構成すれば、テストの準備はほぼできています。 セキュリティ コントロールの目的で、Azure AD では、ユーザーに Azure AD を使用するアクセス権が付与されない限り、アプリケーションへのサインインを許可するトークンは発行されません。 ユーザーには、直接、またはユーザーがメンバーであるグループを介してアクセス権が付与される場合があります。 

アプリケーションにユーザーまたはグループを割り当てるにはクリックして、 **ユーザーを割り当てる** ] ボタンをクリックします。 ユーザーまたはグループを割り当てるを選択したいの選択、 **割り当てる** ] ボタンをクリックします。 

![][6]

ユーザーを割り当てると、Azure AD でユーザーのトークンを発行できるようになり、ユーザーのアクセス パネルにこのアプリケーションのタイルも表示されるようになります。 アプリケーション タイルは、ユーザーが Office 365 を使用している場合、Office 365 アプリケーション ランチャーでも表示されます。 

使用して、アプリケーションのタイルのロゴをアップロードすることができます、 **ロゴのアップロード** のボタンでは、 **構成** アプリケーションのタブをクリックします。 

###SAML トークンで発行された要求のカスタマイズ 

アプリケーションに対するユーザーの認証時に、Azure AD は、一意に識別するユーザーに関する情報 (または要求) を含む SAML トークンをアプリに発行します。 既定では、ユーザーのユーザー名、電子メール アドレス、名、および姓が含まれます。 

表示したり、対象のアプリケーションに SAML トークンで送信される要求を編集、 **属性** ] タブをクリックします。 

![][7]

SAML トークンで発行された要求を編集しなければならない理由、2 つの理由が考えられます。 
• アプリケーションは、別のクレームの Uri のセットが必要または要求の値に書き込まれています 
•Your アプリケーションは、Azure Active Directory に格納されているユーザー名 (AKA ユーザー プリンシパル名) 以外の場合に NameIdentifier 要求するような方法で展開されています。 

追加し、これらのシナリオに対する要求を編集する方法については、この確認 [クレームのカスタマイズに関する記事](active-directory-saml-claims-customization.md)します。 

###SAML アプリケーションのテスト 

SAML URL と証明書が Azure AD とアプリケーションで構成されると、Azure でユーザーまたはグループはアプリケーションに割り当てられ、要求は確認され、必要に応じて編集されている状態です。したがって、ユーザーはアプリケーションへのサインインの準備はできています。 

単にサイン インに https://myapps.microsoft.com、アプリケーションに割り当てられているユーザー アカウントを使用して Azure AD アクセス パネルをテストして、シングル サインオン プロセスを開始するアプリケーションのタイルをクリックします。 または、アプリケーションのサインオン URL を直接参照し、そこからサインインすることもできます。 

デバッグのヒントを参照してください [SAML に基づくシングル サインオン アプリケーションをデバッグする方法の記事](active-directory-saml-debugging.md) 

##パスワード シングル サインオン

構成するには、このオプションを選択 [シングル サインオンをパスワードに基づく](active-directory-appssoaccess-whatis.md) HTML のサインイン ページがある web アプリケーションにします。 パスワード ベースの SSO (パスワード保管ともいう) では、ID フェデレーションをサポートしない Web アプリケーションに対するユーザーのアクセスおよびパスワードを管理できます。 これは、複数のユーザーが、たとえば、組織のソーシャル メディア アプリ アカウントなどに、1 つのアカウントを共有する必要があるシナリオにも便利です。 

選択した後に **次**, 、アプリケーションの web ベース サインイン ページの URL を入力するように求められます。 このページには、ユーザー名とパスワードの入力フィールドが含まれている必要があることに注意してください。 入力すると、Azure AD が、ユーザー名とパスワードを入力するためのサインイン ページを解析するプロセスを開始します。 プロセスが失敗した場合は、フィールドを手動でキャプチャできるようにするブラウザー拡張機能 (Internet Explorer、Chrome、または Firefox が必要) をインストールする代替プロセスが示されます。

サインイン ページがキャプチャされた後にユーザーとグループを割り当てることは通常と同じように資格情報のポリシーを設定することができます [パスワード SSO アプリ](active-directory-appssoaccess-whatis.md)します。

注: を使用して、アプリケーションのタイルのロゴをアップロードすることができます、 **ロゴのアップロード** のボタンでは、 **構成** アプリケーションのタブをクリックします。 

##既存のシングル サインオン

組織の Azure AD アクセス パネルまたは Office 365 ポータルにアプリケーションへのリンクを追加するには、このオプションを選択します。 これを使用して、認証用に Azure AD の代わりに現在 Azure Active Directory フェデレーション サービス (または他のフェデレーション サービス) を使用しているカスタム Web アプリへのリンクを追加することができます。 または、ユーザーのアクセス パネルに表示するだけの特定の SharePoint ページまたは他の Web ページにディープ リンクを追加することもできます。 

選択した後に **次**, にリンクするアプリケーションの URL を入力するように求められます。 これにより、アプリケーションに表示されると、アプリケーションにユーザーとグループを割り当てられる可能性があります完了すると、 [Office 365 アプリケーション ランチャー](https://blogs.office.com/2014/10/16/organize-office-365-new-app-launcher-2/) または [Azure AD アクセス パネル](https://azure.microsoft.com/documentation/articles/active-directory-appssoaccess-whatis/#deploying-azure-ad-integrated-applications-to-users) 、これらのユーザーです。

注: を使用して、アプリケーションのタイルのロゴをアップロードすることができます、 **ロゴのアップロード** のボタンでは、 **構成** アプリケーションのタブをクリックします。 

<!--Image references-->
[1]: ./media/active-directory-saas-custom-apps/customapp1.png
[2]: ./media/active-directory-saas-custom-apps/customapp2.png
[3]: ./media/active-directory-saas-custom-apps/customapp3.png
[4]: ./media/active-directory-saas-custom-apps/customapp4.png
[5]: ./media/active-directory-saas-custom-apps/customapp5.png
[6]: ./media/active-directory-saas-custom-apps/customapp6.png
[7]: ./media/active-directory-saas-custom-apps/customapp7.png

