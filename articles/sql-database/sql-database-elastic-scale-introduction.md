<properties
    pageTitle="Elastic Database ツール機能の概要 | Microsoft Azure"
    description="これらのツールを使用すると、Software as a Service (SaaS) の開発者は柔軟で拡張性の高いデータベースを簡単に作成できます。"
    services="sql-database"
    documentationCenter=""
    manager="jeffreyg"
    authors="ddove"
    editor=""/>

<tags
    ms.service="sql-database"
    ms.workload="sql-database"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="11/04/2015"
    ms.author="ddove;sidneyh"/>

# Elastic Database 機能の概要

**弾力性データベース** 機能を使用すると、実質的に無制限のデータベース リソースを使用して **Azure SQL Database** Service (SaaS) アプリケーションとトランザクションのワークロードと特にソフトウェア ソリューションを作成します。 Elastic Database は、次の機能で構成されています。

* Elastic Database ツール: 2 つのツールによって、シャーディング データベース ソリューションの開発および管理を簡略化します。 ツールには、: [Elastic Database クライアント ライブラリ](sql-database-elastic-database-client-library.md) と [Elastic Database 分割/マージ ツール](sql-database-elastic-scale-overview-split-and-merge.md)します。 
* [弾力性データベース プール](sql-database-elastic-pool-guidance.md) (プレビュー): プールは一連のデータベースを追加するか、いつでもデータベースを削除します。 プール内のデータベースは、固定量のリソース (データベース スループット ユニット: DTU) を共有します。 支払い金額はそのリソースの量に応じて一定であるため、パフォーマンスを管理しながらコストを簡単に計算できます。 
* [弾力性データベース ジョブ](sql-database-elastic-jobs-overview.md) (プレビュー): ジョブを使用して大量の Azure SQL データベースを管理します。 ジョブを使用して、スキーマの変更、資格情報の管理、参照データの更新、パフォーマンス データの収集、テナント (顧客) テレメトリの収集などの管理操作を簡単に実行します。
* [エラスティック データベース クエリ](sql-database-elastic-query-overview.md) (プレビュー): 複数のデータベースにまたがる TRANSACT-SQL クエリを実行することができます。 これにより、Excel、PowerBI、Tableau などのレポート作成ツールに接続できます。

次の図を含めたアーキテクチャを示しています、 **Elastic Database 機能** データベースのコレクションに関連します。 

![エラスティック データベース ツール][1]

この画像の印刷可能なバージョンを参照してください [弾力性データベースの概要ダウンロード](http://aka.ms/axmybc)します。

この図では、データベースの色は、スキーマを表しています。 同じ色のデータベースは、同じスキーマを共有します。

1. 一連の **Azure SQL データベース** シャーディング アーキテクチャを使用して Azure でホストされています。 
2.  **Elastic Database クライアント ライブラリ** シャード セットを管理するために使用します。
3. データベースのサブセットが組み込む、 **弾力性データベース プール**します。 (参照 [弾力性データベースでの爆発的な増加を緩和して](sql-database-elastic-pool.md))。 
4.  **エラスティック データベース ジョブ** のすべてのデータベースに対して T-SQL スクリプトを実行します。
5.  **分割/マージ ツール** 1 つのシャードからデータを移動するために使用します。
6.  **エラスティック データベース クエリ** シャード セット内のすべてのデータベースにまたがるクエリを記述することができます。
  
## 約束と課題

クラウド アプリケーションに対して弾力性と拡張性を実現することは、コンピューティングと BLOB ストレージでは簡単でした。単純に単位を追加または削除すればよかったからです。 ところが、リレーショナル データベースでのステートフルなデータ処理では、それが依然として困難でした。 この課題は、次の 2 つのシナリオで顕著に現れます。

* ワークロードのリレーショナル データベース部分の容量の拡張および縮小。
* 特に負荷の高いエンド ユーザー (テナント) など、データの特定のサブセットに影響を及ぼす可能性があるホットスポットの管理。

これまで、このようなシナリオには、大規模なデータベース サーバーに投資を行ってアプリケーションをサポートすることで、対処してきました。 ただし、この方法には、すべての処理が事前に定義済みのコモディティ ハードウェアで実行されるクラウドでは限りがあります。 そこで、同じ構造を持つ多くのデータベース間でデータを分散し処理を行う手法 ("シャーディング" と呼ばれているスケールアウト パターン) が、コストと弾力性の両面で従来のスケールアップ アプローチの代替案となります。

## 水平および垂直方向のスケーリング

次の図は、水平および垂直方向のスケーリングを示しています。エラスティック データベースのスケーリングでは、どちらも基本的な方法です。

![水平と垂直のスケール アウト][2]

水平方向のスケーリングとは、容量または全体のパフォーマンスを調整するためにデータベースを追加または削除することを意味します。 “スケールアウト” とも呼ばれます。 シャーディングは、水平方向のスケーリングを実装する一般的な手法で、同じ構造を持つデータベースのコレクションでデータがパーティション分割されます。  

垂直方向のスケーリングとは、個々のデータベースのパフォーマンス レベルを増減することを意味します。"スケールアップ" とも呼ばれます。

ほとんどのクラウド規模のデータベース アプリケーションでは、この 2 つの手法を組み合わせて使用しています。 たとえば、サービス アプリケーションとしてのソフトウェアでは、水平方向のスケーリングを使用して新しいエンド ユーザーをプロビジョニングし、垂直方向のスケーリングを使用して、各エンドユーザーのデータベースがワークロードで必要される条件に応じてリソースを拡大縮小できるようにします。

* 水平方向のスケーリングは、管理を使用して、 [Elastic Database クライアント ライブラリ](sql-database-elastic-database-client-library.md)します。

* 垂直方向のスケーリングは、Azure PowerShell コマンドレットを使用してサービス レベルを変更するか、Elastic Database プールにデータベースを配置して実行します。

## シングルテナント パターンとマルチテナント パターン

*シャーディング* に大量のデータの同じ構造を持つを複数の独立したデータベースに分散する手法です。 この手法は、エンド ユーザーまたは企業向けにサービスとしてのソフトウェア (SAAS) 製品をサービスで作成するクラウド開発者の間でよく知られています。 これらのエンド カスタマーは、多くの場合、"テナント" と呼ばれます。 シャーディングは、次のような理由で必要になります。  

* データの合計数が多すぎて、単一のデータベースの制約に適合しない
* ワークロード全体のトランザクションのスループットが 1 つのデータベースの能力を超えている
* テナントを互いに物理的に独立させる必要があり、テナントごとに別個のデータベースが必要になる
* コンプライアンス、パフォーマンス、または地理上の理由から、データベースの異なる部分を異なる地理的場所に配置することが必要になる場合がある。

他のシナリオ (たとえば、分散されたデバイスからのデータの取り込み) では、シャーディングを使用して、一時的に構成されたデータベースのセットに値を入力できます。 たとえば、別個のデータベースをそれぞれの日または週専用に使用できます。 その場合、シャーディング キーとして (シャード化テーブルのすべての行に存在する) 日付を表す整数を使用できます。アプリケーションは、日付の範囲の情報を取得するクエリを、対象の範囲をカバーするデータベースのサブセットにルーティングする必要があります。

シャーディングは、アプリケーションのすべてのトランザクションをシャーディング キーの単一の値に制限できる場合に最適です。 これにより、すべてのトランザクションが特定のデータベースにローカルであることが保証されます。

一部のアプリケーションでは、テナントごとに別個のデータベースを作成する最も単純なアプローチが使用されています。 これは、 **単一テナントのシャーディング パターン** 分離、バックアップ/復元機能、およびテナントの粒度でリソースのスケーリングを提供します。 単一テナントのシャーディングでは、各データベースは特定のテナント ID 値 (または顧客キー値) に関連付けられますが、キーは必ずしもデータ自体に存在する必要はありません。 各要求を適切なデータベースにルーティングするのはアプリケーションの役目です。クライアント ライブラリはこの作業を簡素化できます。

![単一テナントをマルチ テナント][4]

複数のテナントを別個のデータベースに分離する代わりに、一緒にデータベースにパックするシナリオもあります。 これが典型的な **マルチ テナントのシャーディング パターン** – とアプリケーションは多数の小さなテナントを管理するという事実の影響を重視する場合があります。 マルチテナントのシャーディングでは、データベース テーブル内の行は、テナント ID を識別するキーまたはシャーディング キーを格納するように設計されます。 ここでも、アプリケーション層は、テナントの要求を適切なデータベースにルーティングする役割を負います。これは、エラスティック データベース クライアント ライブラリによってサポートされます。 さらに、行レベルのセキュリティが使用をフィルター処理する詳細については、各テナントがアクセスできる行を参照してください [エラスティック データベース ツールと行レベルのセキュリティを持つマルチ テナント アプリケーション](sql-database-elastic-tools-multi-tenant-row-level-security.md)します。 マルチ テナントのシャーディング パターンでは、データを複数のデータベース間で再分散することが必要な場合があります。この再分散は、エラスティック データベースの分割/マージ ツールで容易に行うことができます。

### マルチテナントデータベースからシングルテナント データベースへのデータ移動
SaaS アプリケーションを作成する場合は、見込顧客に試用版のソフトウェアを提供するのが一般的です。 この場合は、データにマルチテナント データベースを使用すると費用対効果を高めることができます。 ただし、見込顧客が実際に顧客になった場合、シングルテナント データベースを使用した方がパフォーマンスが向上します。 使用して、顧客が試用期間中にデータを作成した場合、 [分割/マージ ツール](sql-database-elastic-scale-overview-split-and-merge.md) 、マルチ テナントから新しいシングル テナント データベースにデータを移動します。

## 次のステップ

クライアント ライブラリを使うサンプル アプリの場合、次を参照してください。 [エラスティック Datbabase ツールを使ってみる](sql-database-elastic-scale-get-started.md)します。

分割/マージ ツールを使用する必要があります [セキュリティを構成する](sql-database-elastic-scale-split-merge-security-configuration.md)です。 

エラスティック データベース プールの詳細を表示するには、次を参照してください。 [弾力性データベース プールの価格およびパフォーマンスに関する考慮事項](sql-database-elastic-pool-guidance.md), 、に従って新しいプールを作成するか、 [チュートリアル](sql-database-elastic-pool-portal.md)します。  

[AZURE.INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

### フィードバックをお寄せください。
改善点はありませんか。 このトピックでの機能の説明はわかりやすかったでしょうか。 それとも、わかりにくい所があったでしょうか。 投票ボタンを使用して、不満点 (または満足した点) についてお聞かせください。 マイクロソフトからご連絡を差し上げて問題がなければ、フィードバックに電子メールをご記入ください。


<!--Anchors-->
<!--Image references-->
[1]:./media/sql-database-elastic-scale-introduction/tools.png
[2]:./media/sql-database-elastic-scale-introduction/h_versus_vert.png
[3]:./media/sql-database-elastic-scale-introduction/overview.png
[4]:./media/sql-database-elastic-scale-introduction/single_v_multi_tenant.png

