<properties
   pageTitle="Service Fabric サービスの可用性"
   description="障害の検出、フェールオーバー、サービスの回復について説明します。"
   services="service-fabric"
   documentationCenter=".net"
   authors="appi101"
   manager="timlt"
   editor=""/>

<tags
   ms.service="service-fabric"
   ms.devlang="dotnet"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="NA"
   ms.date="08/26/2015"
   ms.author="aprameyr"/>


# Service Fabric サービスの可用性

Service Fabric サービスには、ステートレスなものとステートフルなものがあります。 この記事では、障害発生時に Service Fabric がサービスの可用性を維持する方法の概要を示します。

## Service Fabric ステートレス サービスの可用性

ステートレス サービスとは何もいないアプリケーション サービス [ローカル継続状態](service-fabric-concepts-state.md)します。

ステートレス サービスを作成するには、インスタンス カウント、つまりクラスター内で実行されるステートレス サービスのインスタンス数を定義する必要があります。 これらは、クラスター内でインスタンス化されるアプリケーション ロジックのコピーの数です。 ステートレス サービスをスケール アウトする場合は、インスタンス数を増やす方法が推奨されています。

ステートレス サービスのインスタンスでエラーが検出されると、クラスター内の他の適当なノードに新しいインスタンスが作成されます。

## Service Fabric ステートフル サービスの可用性

ステートフル サービスには、関連付けられている状態があります。 Service Fabric の場合、ステートフル サービスはレプリカのセットとしてモデル化されます。 各レプリカは、状態のコピーを持つサービスのコードのインスタンスです。 読み取りおよび書き込み操作は、1 つのレプリカ (プライマリと呼ばれます) で実行されます。 書き込み操作のための状態の変更は、他の複数のレプリカ (アクティブ セカンダリと呼ばれます) に*レプリケート*されます。 このようなプライマリ レプリカとアクティブ セカンダリ レプリカの組み合わせが、サービスのレプリカ セットです。

読み取り要求と書き込み要求を処理するプライマリは、ただ 1 つだけ存在します。 アクティブ セカンダリ レプリカは、複数存在できます。 アクティブ セカンダリ レプリカの数は構成可能で、レプリカの数を多くすると、ソフトウェア障害やハードウェア障害が多数同時発生した場合への耐性が得られます。

エラーが発生した場合 (プライマリ レプリカがダウンした場合)、Service Fabric はアクティブ セカンダリ レプリカの 1 つを新しいプライマリ レプリカにします。 このアクティブ セカンダリ レプリカは、更新されたバージョンの状態を (*レプリケーション*経由で) 既に取得しているため、その先の読み取り処理と書き込み処理を続行できます。

レプリカがプライマリであったりアクティブ セカンダリであったりするこの概念は、レプリカ ロールと呼ばれます。

### レプリカ ロール

レプリカのロールは、そのレプリカによって管理されている状態のライフサイクルを管理するために使用されます。 ロールがプライマリになっているレプリカは、読み取り要求を処理します。 また、状態を更新し、レプリカ セット内のアクティブ セカンダリに変更内容をレプリケートして、書き込み要求も処理します。 アクティブ セカンダリは、プライマリ レプリカがレプリケートした状態の変更を受信し、その状態のビューを更新する役割を担当します。
>[AZURE.NOTE] 度の高いプログラミング モデルなど、 [高信頼アクター フレームワーク](service-fabric-reliable-actors-introduction.md) 、開発者がレプリカ ロールの概念を抽象化します。

## 次のステップ

Service Fabric の概念についての詳細は、次を参照してください。

- [Service Fabric サービスのスケーラビリティ](service-fabric-concepts-scalability.md)

- [Service Fabric サービスのパーティション分割](service-fabric-concepts-partitioning.md)

- [定義して、状態を管理します。](service-fabric-concepts-state.md)






