<properties 
     pageTitle="カスタム ドメインにコンテンツ配信ネットワーク (CDN) コンテンツをマップする方法" 
     description="このトピックでは、CDN コンテンツをカスタム ドメインにマップする方法を示します。" 
     services="cdn" 
     documentationCenter="" 
     authors="camsoper" 
     manager="dwrede" 
     editor=""/>
<tags 
     ms.service="cdn" 
     ms.workload="media" 
     ms.tgt_pltfrm="na" 
     ms.devlang="na" 
     ms.topic="article" 
     ms.date="12/02/2015" 
     ms.author="casoper"/>


# Content Delivery Network (CDN) エンドポイントにカスタム ドメインをマップする方法

カスタム ドメインを CDN エンドポイントにマッピングすると、提供される CDN エンドポイントを使用せずに、キャッシュ済みコンテンツへの URL に独自のドメイン名を使用することができます。 そのためには、ドメイン レジストラーで CNAME レコードを作成し、カスタム ドメインとサブドメインを CDN エンドポイントにマップします。 CNAME レコードは、ソース ドメインを目的のドメインにマッピングする DNS 機能です。 この場合、ソース ドメインは、カスタム ドメインおよびサブドメインです (サブドメインは常に必要です)。 宛先ドメインは、使用する CDN エンドポイントです。
> [AZURE.NOTE]

-   ドメインを CDN エンドポイントにマッピングするには、ドメイン レジストラーで CNAME レコードを作成する必要があります。 CNAME レコードは、www.mydomain.com や myblog.mydomain.com などの特定のサブドメインをマップします。 CNAME レコードを mydomain.com などのルート ドメインにマップすることはできません。
-   サブドメインは 1 つの CDN エンドポイントのみに関連付けできます。 CNAME レコードを作成することで、サブドメイン宛てのすべてのトラフィックが指定されたエンドポイントにルーティングされます。 たとえば、www.mydomain.com を CDN エンドポイントに関連付けた場合、ストレージ アカウント エンドポイントやクラウド サービス エンドポイントなど、他の Azure エンドポイントに関連付けることはできません。 ただし、同じドメインの別のサブドメインを別のサービス エンドポイントに使用することはできます。 また、複数のサブドメインを同じ CDN エンドポイントにマップすることもできます。

このトピックの手順では、次の方法について説明します。

-   [Azure CDN エンドポイント用カスタム ドメインを登録します。](#subheading1)
-   [カスタム サブドメインが CDN エンドポイントを参照することを確認します。](#subheading3)

## <a name="subheading1"></a>Azure CDN エンドポイント用カスタム ドメインを登録します。

1.  ログイン、 [Azure ポータル](http://portal.azure.com/)します。
2.  **[参照]**、**[CDN プロファイル]** の順にクリックし、カスタム ドメインにマップするエンドポイントを含む CDN プロファイルをクリックします。
3.  **[CDN プロファイル]** ブレードで、サブドメインを関連付ける CDN エンドポイントをクリックします。
4.  エンドポイント ブレードの上部にある **[カスタム ドメインの追加]** をクリックします。 **[カスタム ドメインの追加]** ブレードに、CDN エンドポイントから派生したエンドポイント ホスト名が表示されます。このホスト名を使用して新しい CNAME レコードを作成します。 ホスト名のアドレスの形式は、 **< EndpointName >. azureedge.net**します。 このホスト名をコピーして、CNAME レコードの作成に使用できます。

5.  ドメイン レジストラーの Web サイトに移動して、DNS レコードを作成するセクションを探します。 これは、"**ドメイン名**"、"**DNS**"、"**ネーム サーバー管理**" などのセクションにあります。
6.  CNAME 管理セクションを見つけます。 詳細設定ページに進み、"CNAME"、"エイリアス"、"サブドメイン" などの語句を探します。
7.  選択したサブドメイン (**www**、**cdn** など) を **[カスタム ドメインの追加]** ブレードに表示されたホスト名にマップする新しい CNAME レコードを作成します。
8.  **[カスタム ドメインの追加]** ブレードに戻り、サブドメインを含むカスタム ドメインをダイアログ ボックスに入力します。 たとえば、ドメイン名は www.mydomain.com や cdn.mydomain.com の形式で入力します。

    入力したドメイン名に対する CNAME レコードが存在するかどうかが Azure によって確認されます。 CNAME が正しければ、カスタム ドメインが検証され、CDN コンテンツで用できるようになります。

    CNAME レコードがインターネット上のネーム サーバーに反映されるまでに時間がかかる場合があります。 入力した CNAME レコードが正しいのにドメインがすぐに検証されない場合は、数分間待ってからやり直してください。

## <a name="subheading3"></a>カスタム サブドメインが CDN エンドポイントを参照することを確認します。

-   使用するカスタム ドメインの登録が完了したら、そのカスタム ドメインを使用して、CDN エンドポイントにキャッシュされているコンテンツにアクセスできます。
まず、エンドポイントにキャッシュされているパブリック コンテンツがあることを確認します。 たとえば、CDN エンドポイントがストレージ アカウントに関連付けられている場合は、CDN はパブリック BLOB コンテナーにコンテンツをキャッシュします。 カスタム ドメインをテストするには、コンテナーでパブリック アクセスが許可され、少なくとも 1 つの BLOB がコンテナーに格納されていることを確認します。
-   ブラウザーでカスタム ドメインを使用して BLOB のアドレスに移動します。 カスタム ドメインが **www.mydomain.com** の場合は、キャッシュされた BLOB の URL は次のようになります。

        http://www.mydomain.com/mypubliccontainer/acachedblob.jpg

-   CDN エンドポイントがクラウド サービスに関連付けられている場合は、キャッシュされたコンテンツの URL は次のようになります。

        http://www.mydomain.com/mycloudservice


## 関連項目

[Azure の Content Delivery Network (CDN) を有効にする方法](./cdn-create-new-endpoint.md
)






