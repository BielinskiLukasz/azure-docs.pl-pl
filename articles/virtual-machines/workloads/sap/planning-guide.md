---
title: 'SAP na platformie Azure: Przewodnik planowania i wdra≈ºania'
description: Planowanie i implementacja maszyn wirtualnych platformy Azure dla sap NetWeaver
services: virtual-machines-linux,virtual-machines-windows
documentationcenter: ''
author: MSSedusch
manager: juergent
editor: ''
tags: azure-resource-manager
keywords: ''
ms.assetid: d7c59cc1-b2d0-4d90-9126-628f9c7a5538
ms.service: virtual-machines-linux
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 03/11/2020
ms.author: juergent
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 7ddcc5165f5588ff9015d7fafbc2b822268ffea7
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/28/2020
ms.locfileid: "80337163"
---
# <a name="azure-virtual-machines-planning-and-implementation-for-sap-netweaver"></a>Planowanie i implementacja maszyn wirtualnych platformy Azure dla sap NetWeaver

[767598]:https://launchpad.support.sap.com/#/notes/767598
[773830]:https://launchpad.support.sap.com/#/notes/773830
[826037]:https://launchpad.support.sap.com/#/notes/826037
[965908]:https://launchpad.support.sap.com/#/notes/965908
[1031096]:https://launchpad.support.sap.com/#/notes/1031096
[1139904]:https://launchpad.support.sap.com/#/notes/1139904
[1173395]:https://launchpad.support.sap.com/#/notes/1173395
[1245200]:https://launchpad.support.sap.com/#/notes/1245200
[1409604]:https://launchpad.support.sap.com/#/notes/1409604
[1558958]:https://launchpad.support.sap.com/#/notes/1558958
[1585981]:https://launchpad.support.sap.com/#/notes/1585981
[1588316]:https://launchpad.support.sap.com/#/notes/1588316
[1590719]:https://launchpad.support.sap.com/#/notes/1590719
[1597355]:https://launchpad.support.sap.com/#/notes/1597355
[1605680]:https://launchpad.support.sap.com/#/notes/1605680
[1619720]:https://launchpad.support.sap.com/#/notes/1619720
[1619726]:https://launchpad.support.sap.com/#/notes/1619726
[1619967]:https://launchpad.support.sap.com/#/notes/1619967
[1750510]:https://launchpad.support.sap.com/#/notes/1750510
[1752266]:https://launchpad.support.sap.com/#/notes/1752266
[1757924]:https://launchpad.support.sap.com/#/notes/1757924
[1757928]:https://launchpad.support.sap.com/#/notes/1757928
[1758182]:https://launchpad.support.sap.com/#/notes/1758182
[1758496]:https://launchpad.support.sap.com/#/notes/1758496
[1772688]:https://launchpad.support.sap.com/#/notes/1772688
[1814258]:https://launchpad.support.sap.com/#/notes/1814258
[1882376]:https://launchpad.support.sap.com/#/notes/1882376
[1909114]:https://launchpad.support.sap.com/#/notes/1909114
[1922555]:https://launchpad.support.sap.com/#/notes/1922555
[1928533]:https://launchpad.support.sap.com/#/notes/1928533
[1941500]:https://launchpad.support.sap.com/#/notes/1941500
[1956005]:https://launchpad.support.sap.com/#/notes/1956005
[1973241]:https://launchpad.support.sap.com/#/notes/1973241
[1984787]:https://launchpad.support.sap.com/#/notes/1984787
[1999351]:https://launchpad.support.sap.com/#/notes/1999351
[2002167]:https://launchpad.support.sap.com/#/notes/2002167
[2015553]:https://launchpad.support.sap.com/#/notes/2015553
[2039619]:https://launchpad.support.sap.com/#/notes/2039619
[2069760]:https://launchpad.support.sap.com/#/notes/2069760
[2121797]:https://launchpad.support.sap.com/#/notes/2121797
[2134316]:https://launchpad.support.sap.com/#/notes/2134316
[2178632]:https://launchpad.support.sap.com/#/notes/2178632
[2191498]:https://launchpad.support.sap.com/#/notes/2191498
[2233094]:https://launchpad.support.sap.com/#/notes/2233094
[2243692]:https://launchpad.support.sap.com/#/notes/2243692

[azure-cli]:../../../cli-install-nodejs.md
[azure-portal]:https://portal.azure.com
[azure-ps]:/powershell/azureps-cmdlets-docs
[azure-quickstart-templates-github]:https://github.com/Azure/azure-quickstart-templates
[azure-script-ps]:https://go.microsoft.com/fwlink/p/?LinkID=395017
[azure-resource-manager/management/azure-subscription-service-limits]:../../../azure-resource-manager/management/azure-subscription-service-limits.md
[azure-resource-manager/management/azure-subscription-service-limits-subscription]:../../../azure-resource-manager/management/azure-subscription-service-limits.md#subscription-limits

[dbms-guide]:dbms-guide.md
[dbms-guide-2.1]:dbms-guide.md#c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f
[dbms-guide-2.2]:dbms-guide.md#c8e566f9-21b7-4457-9f7f-126036971a91
[dbms-guide-2.3]:dbms-guide.md#10b041ef-c177-498a-93ed-44b3441ab152
[dbms-guide-2]:dbms-guide.md#65fa79d6-a85f-47ee-890b-22e794f51a64
[dbms-guide-3]:dbms-guide.md#871dfc27-e509-4222-9370-ab1de77021c3
[dbms-guide-5.5.1]:dbms-guide.md#0fef0e79-d3fe-4ae2-85af-73666a6f7268
[dbms-guide-5.5.2]:dbms-guide.md#f9071eff-9d72-4f47-9da4-1852d782087b
[dbms-guide-5.6]:dbms-guide.md#1b353e38-21b3-4310-aeb6-a77e7c8e81c8
[dbms-guide-5.8]:dbms-guide.md#9053f720-6f3b-4483-904d-15dc54141e30
[dbms-guide-5]:dbms-guide.md#3264829e-075e-4d25-966e-a49dad878737
[dbms-guide-8.4.1]:dbms-guide.md#b48cfe3b-48e9-4f5b-a783-1d29155bd573
[dbms-guide-8.4.2]:dbms-guide.md#23c78d3b-ca5a-4e72-8a24-645d141a3f5d
[dbms-guide-8.4.3]:dbms-guide.md#77cd2fbb-307e-4cbf-a65f-745553f72d2c
[dbms-guide-8.4.4]:dbms-guide.md#f77c1436-9ad8-44fb-a331-8671342de818
[dbms-guide-900-sap-cache-server-on-premises]:dbms-guide.md#642f746c-e4d4-489d-bf63-73e80177a0a8

[dbms-guide-figure-100]:media/virtual-machines-shared-sap-dbms-guide/100_storage_account_types.png
[dbms-guide-figure-200]:media/virtual-machines-shared-sap-dbms-guide/200-ha-set-for-dbms-ha.png
[dbms-guide-figure-300]:media/virtual-machines-shared-sap-dbms-guide/300-reference-config-iaas.png
[dbms-guide-figure-400]:media/virtual-machines-shared-sap-dbms-guide/400-sql-2012-backup-to-blob-storage.png
[dbms-guide-figure-500]:media/virtual-machines-shared-sap-dbms-guide/500-sql-2012-backup-to-blob-storage-different-containers.png
[dbms-guide-figure-600]:media/virtual-machines-shared-sap-dbms-guide/600-iaas-maxdb.png
[dbms-guide-figure-700]:media/virtual-machines-shared-sap-dbms-guide/700-livecach-prod.png
[dbms-guide-figure-800]:media/virtual-machines-shared-sap-dbms-guide/800-azure-vm-sap-content-server.png
[dbms-guide-figure-900]:media/virtual-machines-shared-sap-dbms-guide/900-sap-cache-server-on-premises.png

[deployment-guide]:deployment-guide.md
[deployment-guide-2.2]:deployment-guide.md#42ee2bdb-1efc-4ec7-ab31-fe4c22769b94
[deployment-guide-3.1.2]:deployment-guide.md#3688666f-281f-425b-a312-a77e7db2dfab
[deployment-guide-3.2]:deployment-guide.md#db477013-9060-4602-9ad4-b0316f8bb281
[deployment-guide-3.3]:deployment-guide.md#54a1fc6d-24fd-4feb-9c57-ac588a55dff2
[deployment-guide-3.4]:deployment-guide.md#a9a60133-a763-4de8-8986-ac0fa33aa8c1
[deployment-guide-3]:deployment-guide.md#b3253ee3-d63b-4d74-a49b-185e76c4088e
[deployment-guide-4.1]:deployment-guide.md#604bcec2-8b6e-48d2-a944-61b0f5dee2f7
[deployment-guide-4.2]:deployment-guide.md#7ccf6c3e-97ae-4a7a-9c75-e82c37beb18e
[deployment-guide-4.3]:deployment-guide.md#31d9ecd6-b136-4c73-b61e-da4a29bbc9cc
[deployment-guide-4.4.2]:deployment-guide.md#6889ff12-eaaf-4f3c-97e1-7c9edc7f7542
[deployment-guide-4.4]:deployment-guide.md#c7cbb0dc-52a4-49db-8e03-83e7edc2927d
[deployment-guide-4.5.1]:deployment-guide.md#987cf279-d713-4b4c-8143-6b11589bb9d4
[deployment-guide-4.5.2]:deployment-guide.md#408f3779-f422-4413-82f8-c57a23b4fc2f
[deployment-guide-4.5]:deployment-guide.md#d98edcd3-f2a1-49f7-b26a-07448ceb60ca
[deployment-guide-5.1]:deployment-guide.md#bb61ce92-8c5c-461f-8c53-39f5e5ed91f2
[deployment-guide-5.2]:deployment-guide.md#e2d592ff-b4ea-4a53-a91a-e5521edb6cd1
[deployment-guide-5.3]:deployment-guide.md#fe25a7da-4e4e-4388-8907-8abc2d33cfd8

[deployment-guide-configure-monitoring-scenario-1]:deployment-guide.md#ec323ac3-1de9-4c3a-b770-4ff701def65b
[deployment-guide-configure-proxy]:deployment-guide.md#baccae00-6f79-4307-ade4-40292ce4e02d
[deployment-guide-figure-100]:media/virtual-machines-shared-sap-deployment-guide/100-deploy-vm-image.png
[deployment-guide-figure-1000]:media/virtual-machines-shared-sap-deployment-guide/1000-service-properties.png
[deployment-guide-figure-11]:deployment-guide.md#figure-11
[deployment-guide-figure-1100]:media/virtual-machines-shared-sap-deployment-guide/1100-azperflib.png
[deployment-guide-figure-1200]:media/virtual-machines-shared-sap-deployment-guide/1200-cmd-test-login.png
[deployment-guide-figure-1300]:media/virtual-machines-shared-sap-deployment-guide/1300-cmd-test-executed.png
[deployment-guide-figure-14]:deployment-guide.md#figure-14
[deployment-guide-figure-1400]:media/virtual-machines-shared-sap-deployment-guide/1400-azperflib-error-servicenotstarted.png
[deployment-guide-figure-300]:media/virtual-machines-shared-sap-deployment-guide/300-deploy-private-image.png
[deployment-guide-figure-400]:media/virtual-machines-shared-sap-deployment-guide/400-deploy-using-disk.png
[deployment-guide-figure-5]:deployment-guide.md#figure-5
[deployment-guide-figure-50]:media/virtual-machines-shared-sap-deployment-guide/50-forced-tunneling-suse.png
[deployment-guide-figure-500]:media/virtual-machines-shared-sap-deployment-guide/500-install-powershell.png
[deployment-guide-figure-6]:deployment-guide.md#figure-6
[deployment-guide-figure-600]:media/virtual-machines-shared-sap-deployment-guide/600-powershell-version.png
[deployment-guide-figure-7]:deployment-guide.md#figure-7
[deployment-guide-figure-700]:media/virtual-machines-shared-sap-deployment-guide/700-install-powershell-installed.png
[deployment-guide-figure-760]:media/virtual-machines-shared-sap-deployment-guide/760-azure-cli-version.png
[deployment-guide-figure-900]:media/virtual-machines-shared-sap-deployment-guide/900-cmd-update-executed.png
[deployment-guide-figure-azure-cli-installed]:deployment-guide.md#402488e5-f9bb-4b29-8063-1c5f52a892d0
[deployment-guide-figure-azure-cli-version]:deployment-guide.md#0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda
[deployment-guide-install-vm-agent-windows]:deployment-guide.md#b2db5c9a-a076-42c6-9835-16945868e866
[deployment-guide-troubleshooting-chapter]:deployment-guide.md#564adb4f-5c95-4041-9616-6635e83a810b

[deploy-template-cli]:../../../resource-group-template-deploy-cli.md
[deploy-template-portal]:../../../resource-group-template-deploy-portal.md
[deploy-template-powershell]:../../../resource-group-template-deploy.md

[dr-guide-classic]:https://go.microsoft.com/fwlink/?LinkID=521971

[getting-started]:get-started.md
[getting-started-dbms]:get-started.md#1343ffe1-8021-4ce6-a08d-3a1553a4db82
[getting-started-deployment]:get-started.md#6aadadd2-76b5-46d8-8713-e8d63630e955
[getting-started-planning]:get-started.md#3da0389e-708b-4e82-b2a2-e92f132df89c

[getting-started-windows-classic]:../../virtual-machines-windows-classic-sap-get-started.md
[getting-started-windows-classic-dbms]:../../virtual-machines-windows-classic-sap-get-started.md#c5b77a14-f6b4-44e9-acab-4d28ff72a930
[getting-started-windows-classic-deployment]:../../virtual-machines-windows-classic-sap-get-started.md#f84ea6ce-bbb4-41f7-9965-34d31b0098ea
[getting-started-windows-classic-dr]:../../virtual-machines-windows-classic-sap-get-started.md#cff10b4a-01a5-4dc3-94b6-afb8e55757d3
[getting-started-windows-classic-ha-sios]:../../virtual-machines-windows-classic-sap-get-started.md#4bb7512c-0fa0-4227-9853-4004281b1037
[getting-started-windows-classic-planning]:../../virtual-machines-windows-classic-sap-get-started.md#f2a5e9d8-49e4-419e-9900-af783173481c

[ha-guide-classic]:https://go.microsoft.com/fwlink/?LinkId=613056

[install-extension-cli]:virtual-machines-linux-enable-aem.md

[Logo_Linux]:media/virtual-machines-shared-sap-shared/Linux.png
[Logo_Windows]:media/virtual-machines-shared-sap-shared/Windows.png

[msdn-set-Azvmaemextension]:https://msdn.microsoft.com/library/azure/mt670598.aspx

[planning-guide]:planning-guide.md  
[planning-guide-1.2]:planning-guide.md#e55d1e22-c2c8-460b-9897-64622a34fdff
[planning-guide-11]:planning-guide.md#7cf991a1-badd-40a9-944e-7baae842a058
[planning-guide-11.4.1]:planning-guide.md#5d9d36f9-9058-435d-8367-5ad05f00de77
[planning-guide-11.5]:planning-guide.md#4e165b58-74ca-474f-a7f4-5e695a93204f
[planning-guide-2.2]:planning-guide.md#f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10
[planning-guide-3.1]:planning-guide.md#be80d1b9-a463-4845-bd35-f4cebdb5424a
[planning-guide-3.2.1]:planning-guide.md#df49dc09-141b-4f34-a4a2-990913b30358
[planning-guide-3.2.2]:planning-guide.md#fc1ac8b2-e54a-487c-8581-d3cc6625e560
[planning-guide-3.2.3]:planning-guide.md#18810088-f9be-4c97-958a-27996255c665
[planning-guide-3.2]:planning-guide.md#8d8ad4b8-6093-4b91-ac36-ea56d80dbf77
[planning-guide-3.3.2]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92
[planning-guide-5.1.1]:planning-guide.md#4d175f1b-7353-4137-9d2f-817683c26e53
[planning-guide-5.1.2]:planning-guide.md#e18f7839-c0e2-4385-b1e6-4538453a285c
[planning-guide-5.2.1]:planning-guide.md#1b287330-944b-495d-9ea7-94b83aff73ef
[planning-guide-5.2.2]:planning-guide.md#57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3
[planning-guide-5.2]:planning-guide.md#6ffb9f41-a292-40bf-9e70-8204448559e7
[planning-guide-5.3.1]:planning-guide.md#6e835de8-40b1-4b71-9f18-d45b20959b79
[planning-guide-5.3.2]:planning-guide.md#a43e40e6-1acc-4633-9816-8f095d5a7b6a
[planning-guide-5.4.2]:planning-guide.md#9789b076-2011-4afa-b2fe-b07a8aba58a1
[planning-guide-5.5.1]:planning-guide.md#4efec401-91e0-40c0-8e64-f2dceadff646
[planning-guide-5.5.3]:planning-guide.md#17e0d543-7e8c-4160-a7da-dd7117a1ad9d
[planning-guide-7.1]:planning-guide.md#3e9c3690-da67-421a-bc3f-12c520d99a30
[planning-guide-7]:planning-guide.md#96a77628-a05e-475d-9df3-fb82217e8f14
[planning-guide-9.1]:planning-guide.md#6f0a47f3-a289-4090-a053-2521618a28c3
[planning-guide-azure-premium-storage]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92

[planning-guide-figure-100]:media/virtual-machines-shared-sap-planning-guide/100-single-vm-in-azure.png
[planning-guide-figure-1300]:media/virtual-machines-shared-sap-planning-guide/1300-ref-config-iaas-for-sap.png
[planning-guide-figure-1400]:media/virtual-machines-shared-sap-planning-guide/1400-attach-detach-disks.png
[planning-guide-figure-1600]:media/virtual-machines-shared-sap-planning-guide/1600-firewall-port-rule.png
[planning-guide-figure-1700]:media/virtual-machines-shared-sap-planning-guide/1700-single-vm-demo.png
[planning-guide-figure-1900]:media/virtual-machines-shared-sap-planning-guide/1900-vm-set-vnet.png
[planning-guide-figure-200]:media/virtual-machines-shared-sap-planning-guide/200-multiple-vms-in-azure.png
[planning-guide-figure-2100]:media/virtual-machines-shared-sap-planning-guide/2100-s2s.png
[planning-guide-figure-2200]:media/virtual-machines-shared-sap-planning-guide/2200-network-printing.png
[planning-guide-figure-2300]:media/virtual-machines-shared-sap-planning-guide/2300-sapgui-stms.png
[planning-guide-figure-2400]:media/virtual-machines-shared-sap-planning-guide/2400-vm-extension-overview.png
[planning-guide-figure-2500]:media/virtual-machines-shared-sap-planning-guide/planning-monitoring-overview-2502.png
[planning-guide-figure-2600]:media/virtual-machines-shared-sap-planning-guide/2600-sap-router-connection.png
[planning-guide-figure-2700]:media/virtual-machines-shared-sap-planning-guide/2700-exposed-sap-portal.png
[planning-guide-figure-2800]:media/virtual-machines-shared-sap-planning-guide/2800-endpoint-config.png
[planning-guide-figure-2900]:media/virtual-machines-shared-sap-planning-guide/2900-azure-ha-sap-ha.png
[planning-guide-figure-2901]:media/virtual-machines-shared-sap-planning-guide/2901-azure-ha-sap-ha-md.png
[planning-guide-figure-300]:media/virtual-machines-shared-sap-planning-guide/300-vpn-s2s.png
[planning-guide-figure-3000]:media/virtual-machines-shared-sap-planning-guide/3000-sap-ha-on-azure.png
[planning-guide-figure-3200]:media/virtual-machines-shared-sap-planning-guide/3200-sap-ha-with-sql.png
[planning-guide-figure-3201]:media/virtual-machines-shared-sap-planning-guide/3201-sap-ha-with-sql-md.png
[planning-guide-figure-400]:media/virtual-machines-shared-sap-planning-guide/400-vm-services.png
[planning-guide-figure-600]:media/virtual-machines-shared-sap-planning-guide/600-s2s-details.png
[planning-guide-figure-700]:media/virtual-machines-shared-sap-planning-guide/700-decision-tree-deploy-to-azure.png
[planning-guide-figure-800]:media/virtual-machines-shared-sap-planning-guide/800-portal-vm-overview.png
[planning-guide-microsoft-azure-networking]:planning-guide.md#61678387-8868-435d-9f8c-450b2424f5bd
[planning-guide-storage-microsoft-azure-storage-and-data-disks]:planning-guide.md#a72afa26-4bf4-4a25-8cf7-855d6032157f

[powershell-install-configure]:https://docs.microsoft.com/powershell/azure/install-az-ps
[resource-group-authoring-templates]:../../../resource-group-authoring-templates.md
[resource-group-overview]:../../../azure-resource-manager/management/overview.md
[resource-groups-networking]:../../../networking/networking-overview.md
[sap-pam]:https://support.sap.com/pam
[sap-templates-2-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-2-tier-os-disk]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-disk%2Fazuredeploy.json
[sap-templates-2-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-image%2Fazuredeploy.json
[sap-templates-3-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-3-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-user-image%2Fazuredeploy.json
[storage-azure-cli]:../../../storage/common/storage-azure-cli.md
[storage-azure-cli-copy-blobs]:../../../storage/common/storage-azure-cli.md#copy-blobs
[storage-introduction]:../../../storage/common/storage-introduction.md
[storage-powershell-guide-full-copy-vhd]:../../../storage/common/storage-powershell-guide-full.md
[storage-premium-storage-preview-portal]:../../windows/disks-types.md
[storage-redundancy]:../../../storage/common/storage-redundancy.md
[storage-scalability-targets]:../../../storage/common/scalability-targets-standard-accounts.md
[storage-use-azcopy]:../../../storage/common/storage-use-azcopy.md
[template-201-vm-from-specialized-vhd]:https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-from-specialized-vhd
[templates-101-simple-windows-vm]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-simple-windows-vm
[templates-101-vm-from-user-image]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image
[virtual-machines-linux-attach-disk-portal]:../../linux/attach-disk-portal.md
[virtual-machines-azure-resource-manager-architecture]:../../../resource-manager-deployment-model.md
[virtual-machines-Az-versus-azuresm]:virtual-machines-linux-compare-deployment-models.md
[virtual-machines-windows-classic-configure-oracle-data-guard]:../../virtual-machines-windows-classic-configure-oracle-data-guard.md
[virtual-machines-linux-cli-deploy-templates]:../../linux/cli-deploy-templates.md
[virtual-machines-deploy-rmtemplates-powershell]:../../virtual-machines-windows-ps-manage.md
[virtual-machines-linux-agent-user-guide]:../../extensions/agent-linux.md
[virtual-machines-linux-agent-user-guide-command-line-options]:../../extensions/agent-windows.md#command-line-options
[virtual-machines-linux-capture-image]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager-capture]:../../linux/capture-image.md#step-2-capture-the-vm
[virtual-machines-windows-capture-image-resource-manager]:../../windows/capture-image.md
[virtual-machines-windows-capture-image]:../../virtual-machines-windows-generalize-vhd.md
[virtual-machines-windows-capture-image-prepare-the-vm-for-image-capture]:../../virtual-machines-windows-generalize-vhd.md
[virtual-machines-linux-configure-raid]:../../linux/configure-raid.md
[virtual-machines-linux-configure-lvm]:../../linux/configure-lvm.md
[virtual-machines-linux-classic-create-upload-vhd-step-1]:../../virtual-machines-linux-classic-create-upload-vhd.md#step-1-prepare-the-image-to-be-uploaded
[virtual-machines-linux-create-upload-vhd-suse]:../../linux/suse-create-upload-vhd.md
[virtual-machines-linux-create-upload-vhd-oracle]:../../linux/oracle-create-upload-vhd.md
[virtual-machines-linux-redhat-create-upload-vhd]:../../linux/redhat-create-upload-vhd.md
[virtual-machines-linux-how-to-attach-disk]:../../linux/add-disk.md
[virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]:../../linux/add-disk.md#connect-to-the-linux-vm-to-mount-the-new-disk
[virtual-machines-linux-tutorial]:../../linux/quick-create-cli.md
[virtual-machines-linux-update-agent]:../../linux/update-agent.md
[virtual-machines-manage-availability]:../../linux/manage-availability.md
[virtual-machines-ps-create-preconfigure-windows-resource-manager-vms]:virtual-machines-windows-create-powershell.md
[virtual-machines-sizes-linux]:../../linux/sizes.md
[virtual-machines-sizes-windows]:../../windows/sizes.md
[virtual-machines-windows-classic-ps-sql-alwayson-availability-groups]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-alwayson-availability-groups.md
[virtual-machines-windows-classic-ps-sql-int-listener]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-int-listener.md
[virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions]:./../../windows/sql/virtual-machines-windows-sql-high-availability-dr.md
[virtual-machines-sql-server-infrastructure-services]:./../../windows/sql/virtual-machines-windows-sql-server-iaas-overview.md
[virtual-machines-sql-server-performance-best-practices]:./../../windows/sql/virtual-machines-windows-sql-performance.md
[virtual-machines-upload-image-windows-resource-manager]:../../virtual-machines-windows-upload-image.md
[virtual-machines-windows-tutorial]:../../virtual-machines-windows-hero-tutorial.md
[virtual-machines-workload-template-sql-alwayson]:https://azure.microsoft.com/documentation/templates/sql-server-2014-alwayson-dsc/
[virtual-network-deploy-multinic-arm-cli]:../../linux/multiple-nics.md
[virtual-network-deploy-multinic-arm-ps]:../../windows/multiple-nics.md
[virtual-network-deploy-multinic-arm-template]:../../../virtual-network/template-samples.md
[virtual-networks-configure-vnet-to-vnet-connection]:../../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[virtual-networks-create-vnet-arm-pportal]:../../../virtual-network/manage-virtual-network.md#create-a-virtual-network
[virtual-networks-manage-dns-in-vnet]:../../../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md
[virtual-networks-multiple-nics-windows]:../../windows/multiple-nics.md
[virtual-networks-multiple-nics-linux]:../../linux/multiple-nics.md
[virtual-networks-nsg]:../../../virtual-network/security-overview.md
[virtual-networks-reserved-private-ip]:../../../virtual-network/virtual-networks-static-private-ip-arm-ps.md
[virtual-networks-static-private-ip-arm-pportal]:../../../virtual-network/virtual-networks-static-private-ip-arm-pportal.md
[virtual-networks-udr-overview]:../../../virtual-network/virtual-networks-udr-overview.md
[vpn-gateway-about-vpn-devices]:../../../vpn-gateway/vpn-gateway-about-vpn-devices.md
[vpn-gateway-create-site-to-site-rm-powershell]:../../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md
[vpn-gateway-cross-premises-options]:../../../vpn-gateway/vpn-gateway-about-vpngateways.md
[vpn-gateway-site-to-site-create]:../../../vpn-gateway/vpn-gateway-site-to-site-create.md
[vpn-gateway-vpn-faq]:../../../vpn-gateway/vpn-gateway-vpn-faq.md
[xplat-cli]:../../../cli-install-nodejs.md
[xplat-cli-azure-resource-manager]:../../../xplat-cli-azure-resource-manager.md
[capture-image-linux-step-2-create-vm-image]:../../linux/capture-image.md#step-2-create-vm-image



Platforma Microsoft Azure umo≈ºliwia firmom nabywanie zasob√≥w obliczeniowych i magazynowych w minimalnym czasie bez d≈Çugich cykli zaopatrzenia. Us≈Çuga Azure Virtual Machine umo≈ºliwia firmom wdra≈ºanie klasycznych aplikacji, takich jak aplikacje oparte na SAP NetWeaver na platformie Azure, oraz rozszerzanie ich niezawodno≈õci i dostƒôpno≈õci bez konieczno≈õci posiadania dodatkowych zasob√≥w dostƒôpnych lokalnie. Us≈Çugi maszyny wirtualnej platformy Azure obs≈ÇugujƒÖ r√≥wnie≈º ≈ÇƒÖczno≈õƒá miƒôdzy ≈õrodowiskami lokalnymi, co umo≈ºliwia firmom aktywnƒÖ integracjƒô maszyn wirtualnych platformy Azure z ich domenami lokalnymi, chmurami prywatnymi i krajobrazem systemu SAP.
W tym opracowaniu w tym opracowaniu tym artykule opisano podstawy maszyny wirtualnej platformy Microsoft Azure i przedstawiono zagadnienia dotyczƒÖce planowania i wdra≈ºania instalacji SAP NetWeaver na platformie Azure i jako takie powinny byƒá dokumentem do przeczytania przed rozpoczƒôciem rzeczywistego wdro≈ºenia sap NetWeaver na platformie Azure.
Dokument uzupe≈Çnia dokumentacjƒô instalacyjnƒÖ SAP i notatki SAP, kt√≥re reprezentujƒÖ podstawowe zasoby dotyczƒÖce instalacji i wdro≈ºe≈Ñ oprogramowania SAP na danych platformach.

[!INCLUDE [updated-for-az](../../../../includes/updated-for-az.md)]

## <a name="summary"></a>Podsumowanie
Cloud Computing to powszechnie u≈ºywany termin, kt√≥ry zyskuje coraz wiƒôksze znaczenie w bran≈ºy IT, od ma≈Çych firm po du≈ºe i miƒôdzynarodowe korporacje.

Microsoft Azure to platforma us≈Çug w chmurze firmy Microsoft, kt√≥ra oferuje szerokie spektrum nowych mo≈ºliwo≈õci. Teraz klienci sƒÖ w stanie szybko aprowizowaƒá i wyr√≥wnywaƒá aplikacje jako us≈Çugƒô w chmurze, wiƒôc nie sƒÖ one ograniczone do ogranicze≈Ñ technicznych lub bud≈ºetowania. Zamiast inwestowaƒá czas i bud≈ºet w infrastrukturƒô sprzƒôtowƒÖ, firmy mogƒÖ skupiƒá siƒô na aplikacji, procesach biznesowych i jej korzy≈õciach dla klient√≥w i u≈ºytkownik√≥w.

Wraz z us≈Çugami Microsoft Azure Virtual Machines firma Microsoft oferuje kompleksowƒÖ platformƒô typu infrastruktura jako us≈Çuga (IaaS). Aplikacje oparte na oprogramowaniu SAP NetWeaver sƒÖ obs≈Çugiwane w us≈Çudze Azure Virtual Machines (IaaS). W tym opracowaniu zawierajƒÖcym oficjalny opis sposobu planowania i implementowania aplikacji opartych na systemie SAP NetWeaver na platformie Microsoft Azure jako wybranej platformy.

Sam dokument koncentruje siƒô na dw√≥ch g≈Ç√≥wnych aspektach:

* Pierwsza czƒô≈õƒá opisuje dwa obs≈Çugiwane wzorce wdra≈ºania aplikacji opartych na SAP NetWeaver na platformie Azure. Opisano w nim r√≥wnie≈º og√≥lnƒÖ obs≈Çugƒô platformy Azure z my≈õlƒÖ o wdro≈ºeniach SAP.
* Druga czƒô≈õƒá zawiera szczeg√≥≈Çowe informacje na temat wdra≈ºania r√≥≈ºnych scenariuszy opisanych w pierwszej czƒô≈õci.

Aby uzyskaƒá dodatkowe zasoby, zobacz rozdzia≈Ç [Zasoby][planning-guide-1.2] w tym dokumencie.

### <a name="definitions-upfront"></a>Definicje z g√≥ry
W ca≈Çym dokumencie u≈ºywamy nastƒôpujƒÖcych termin√≥w:

* IaaS: Infrastruktura jako us≈Çuga
* PaaS: Platforma jako us≈Çuga
* SaaS: Oprogramowanie jako us≈Çuga
* Komponent SAP: indywidualna aplikacja SAP, taka jak ECC, BW, Solution Manager lub S/4HANA.  Sk≈Çadniki SAP mogƒÖ byƒá oparte na tradycyjnych technologiach ABAP lub Java lub aplikacji nienapartej na NetWeaver, takiej jak Obiekty biznesowe.
* ≈örodowisko SAP: jeden lub wiƒôcej sk≈Çadnik√≥w SAP logicznie pogrupowane w celu wykonania funkcji biznesowej, takiej jak programowanie, qas, szkolenie, dr lub produkcja.
* Sap Landscape: Termin ten odnosi siƒô do ca≈Çych zasob√≥w SAP w krajobrazie IT klienta. Krajobraz SAP obejmuje wszystkie ≈õrodowiska produkcyjne i nieprodukcyjne.
* Sap System: Po≈ÇƒÖczenie warstwy DBMS i warstwy aplikacji, na przyk≈Çad, systemu rozwoju SAP ERP, systemu testowego SAP BW, systemu produkcyjnego SAP CRM itp. W wdro≈ºeniach platformy Azure nie jest obs≈Çugiwane dzielenie tych dw√≥ch warstw miƒôdzy lokalnie i platformy Azure. Oznacza, ≈ºe system SAP jest wdra≈ºany lokalnie lub jest wdra≈ºany na platformie Azure. Mo≈ºna jednak wdro≈ºyƒá r√≥≈ºne systemy ≈õrodowiska SAP na platformie Azure lub lokalnie. Na przyk≈Çad mo≈ºna wdro≈ºyƒá sap CRM rozwoju i testowania system√≥w na platformie Azure, ale system produkcyjny SAP CRM lokalnie.
* Miƒôdzylokacyjny lub hybrydowy: Opisuje scenariusz, w kt√≥rym maszyny wirtualne sƒÖ wdra≈ºane w ramach subskrypcji platformy Azure, kt√≥ra ma ≈ÇƒÖczno≈õƒá lokacja-lokacja, wiele lokacji lub us≈Çugi ExpressRoute miƒôdzy lokalnymi centrami danych a platformƒÖ Azure. We wsp√≥lnej dokumentacji platformy Azure tego rodzaju wdro≈ºenia sƒÖ r√≥wnie≈º opisane jako scenariusze miƒôdzylokacyjnymi lub hybrydowymi. Powodem po≈ÇƒÖczenia jest rozszerzenie domen lokalnych, lokalnej us≈Çugi Active Directory/OpenLDAP i lokalnego systemu DNS na platformƒô Azure. Lokalny krajobraz jest rozszerzany na zasoby platformy Azure subskrypcji. Po tym rozszerzeniu maszyny wirtualne mogƒÖ byƒá czƒô≈õciƒÖ domeny lokalnej. U≈ºytkownicy domeny lokalnej mogƒÖ uzyskiwaƒá dostƒôp do serwer√≥w i uruchamiaƒá us≈Çugi na tych maszynach wirtualnych (takich jak us≈Çugi DBMS). Komunikacja i rozpoznawanie nazw miƒôdzy maszynami wirtualnymi wdro≈ºonymi lokalnie i wdro≈ºonymi maszynami wirtualnymi platformy Azure jest mo≈ºliwe. Jest to najbardziej typowy i prawie ekskluzywny przypadek wdra≈ºania zasob√≥w SAP na platformie Azure. Aby uzyskaƒá wiƒôcej informacji, zobacz [ten][vpn-gateway-cross-premises-options] artyku≈Ç i [ten][vpn-gateway-site-to-site-create].
* Rozszerzenie monitorowania platformy Azure, rozszerzone monitorowanie i rozszerzenie platformy Azure dla sap: opisz jeden i ten sam element. Opisano w nim rozszerzenie maszyny Wirtualnej, kt√≥re musi zostaƒá wdro≈ºone przez Ciebie, aby dostarczyƒá niekt√≥re podstawowe dane dotyczƒÖce infrastruktury platformy Azure agentowi hosta SAP. SAP w uwagach SAP mo≈ºe odnosiƒá siƒô do niego jako rozszerzenie monitorowania lub rozszerzone monitorowanie. Na platformie Azure odnosimy siƒô do niego jako **rozszerzenia platformy Azure dla SAP.**

> [!NOTE]
> Wdro≈ºenia miƒôdzylokacyjne lub hybrydowe system√≥w SAP, w kt√≥rych maszyny wirtualne platformy Azure z systemami SAP sƒÖ cz≈Çonkami domeny lokalnej, sƒÖ obs≈Çugiwane w systemach SAP w produkcji. Konfiguracje miƒôdzylokacyjne lub hybrydowe sƒÖ obs≈Çugiwane w celu wdra≈ºania czƒô≈õci lub kompletnych ≈õrodowisk SAP na platformie Azure. Nawet uruchomienie pe≈Çnego ≈õrodowiska SAP na platformie Azure wymaga, aby te maszyny wirtualne by≈Çy czƒô≈õciƒÖ domeny lokalnej i ADS/OpenLDAP. 
>
>



### <a name="resources"></a><a name="e55d1e22-c2c8-460b-9897-64622a34fdff"></a>Resources
Punkt wej≈õcia dla obciƒÖ≈ºenia SAP w dokumentacji platformy Azure znajduje siƒô [tutaj](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/get-started). PoczƒÖwszy od tego punktu wej≈õcia mo≈ºna znale≈∫ƒá wiele artyku≈Ç√≥w, kt√≥re obejmujƒÖ tematy:

- SAP NetWeaver i Business One na platformie Azure
- Przewodniki SAP DBMS dla r√≥≈ºnych system√≥w DBMS na platformie Azure
- Wysoka dostƒôpno≈õƒá i odzyskiwanie po awarii dla obciƒÖ≈ºenia SAP na platformie Azure
- Wskaz√≥wki dotyczƒÖce uruchamiania us≈Çugi SAP HANA na platformie Azure
- Wskaz√≥wki dotyczƒÖce du≈ºych wystƒÖpie≈Ñ platformy Azure HANA dla systemu SAP HANA DBMS 


> [!IMPORTANT]
> W miarƒô mo≈ºliwo≈õci stosuje siƒô link do przewodnik√≥w instalacji SAP lub innej dokumentacji SAP <http://service.sap.com/instguides>(Reference InstGuide-01, patrz ). Je≈õli chodzi o wymagania wstƒôpne, proces instalacji lub szczeg√≥≈Çy dotyczƒÖce okre≈õlonych funkcji SAP, dokumentacja i przewodniki SAP powinny byƒá zawsze uwa≈ºnie odczytywane, poniewa≈º dokumenty firmy Microsoft obejmujƒÖ tylko okre≈õlone zadania dla oprogramowania SAP zainstalowanego i obs≈Çugiwanego w Maszyna wirtualna platformy Microsoft Azure.
>
>

NastƒôpujƒÖce uwagi SAP sƒÖ zwiƒÖzane z tematem SAP na platformie Azure:

| Numer notatki | Tytu≈Ç |
| --- | --- |
| [1928533] |Aplikacje SAP na platformie Azure: obs≈Çugiwane produkty i rozmiary |
| [2015553] |SAP na platformie Microsoft Azure: wymagania wstƒôpne dotyczƒÖce pomocy technicznej |
| [1999351] |RozwiƒÖzywanie problem√≥w z rozszerzonym monitorowaniem platformy Azure dla systemu SAP |
| [2178632] |Metryki monitorowania kluczy dla sap na platformie Microsoft Azure |
| [1409604] |Wirtualizacja w systemie Windows: ulepszone monitorowanie |
| [2191498] |SAP na Linuksie z platformƒÖ Azure: Ulepszone monitorowanie |
| [2243692] |Maszyna wirtualna systemu Linux na platformie Microsoft Azure (IaaS): problemy z licencjƒÖ SAP |
| [1984787] |SUSE LINUX Enterprise Server 12: Uwagi dotyczƒÖce instalacji |
| [2002167] |Red Hat Enterprise Linux 7.x: Instalacja i aktualizacja |
| [2069760] |Instalacja i uaktualnienie systemu Oracle Linux 7.x SAP |
| [1597355] |Zalecenie dotyczƒÖce przestrzeni wymiany dla systemu Linux |

Przeczytaj tak≈ºe [SCN Wiki,](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) kt√≥ra zawiera wszystkie notatki SAP dla Linuksa.

Og√≥lne ograniczenia domy≈õlne i maksymalne ograniczenia subskrypcji platformy Azure mo≈ºna znale≈∫ƒá w [tym artykule][azure-resource-manager/management/azure-subscription-service-limits-subscription].

## <a name="possible-scenarios"></a>Mo≈ºliwe scenariusze
Sap jest czƒôsto postrzegany jako jedna z najbardziej krytycznych aplikacji w przedsiƒôbiorstwach. Architektura i operacje tych aplikacji jest w wiƒôkszo≈õci skomplikowane i zapewnienie, ≈ºe spe≈ÇniajƒÖ wymagania dotyczƒÖce dostƒôpno≈õci i wydajno≈õci jest wa≈ºne.

W zwiƒÖzku z tym przedsiƒôbiorstwa muszƒÖ dok≈Çadnie przemy≈õleƒá, kt√≥ry dostawca chmury wybraƒá do prowadzenia takich proces√≥w biznesowych o krytycznym znaczeniu dla firmy. Platforma Azure to idealna platforma chmury publicznej dla krytycznych dla biznesu aplikacji SAP i proces√≥w biznesowych. BiorƒÖc pod uwagƒô szerokƒÖ gamƒô infrastruktury platformy Azure, prawie wszystkie istniejƒÖce systemy SAP NetWeaver i S/4HANA mogƒÖ byƒá obecnie hostowane na platformie Azure. Platforma Azure udostƒôpnia maszynom wirtualnym wiele terabajt√≥w pamiƒôci i ponad 200 procesor√≥w. Poza tym platforma Azure oferuje [du≈ºe wystƒÖpienia HANA,](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/hana-overview-architecture)kt√≥re umo≈ºliwiajƒÖ skalowanie wdro≈ºe≈Ñ HANA o rozmiarze do 24 TB i skalowaniu SAP HANA w poziomie do 120 TB. Mo≈ºna dzi≈õ stwierdziƒá, ≈ºe prawie wszystkie scenariusze lokalnego SAP mo≈ºna uruchomiƒá r√≥wnie≈º na platformie Azure. 

Aby uzyskaƒá przybli≈ºony opis scenariuszy i niekt√≥rych scenariuszy nieobjƒôtych obs≈ÇugƒÖ, zobacz [dokument obciƒÖ≈ºenia SAP na komputerze wirtualnym platformy Azure obs≈Çugiwane scenariusze](./sap-planning-supported-configurations.md).

Sprawd≈∫ te scenariusze i niekt√≥re warunki, kt√≥re zosta≈Çy nazwane jako nie sƒÖ obs≈Çugiwane w dokumentacji, do kt√≥rej istnieje odwo≈Çanie, podczas planowania i rozwoju architektury, kt√≥rƒÖ chcesz wdro≈ºyƒá na platformie Azure.

Og√≥lnie rzecz biorƒÖc, najczƒôstszym wzorcem wdra≈ºania jest scenariusz miƒôdzy lokalami, taki jak

![SIEƒÜ VPN z ≈ÇƒÖczno≈õciƒÖ lokacja-lokacja (miƒôdzy lokalizacjami)][planning-guide-figure-300]

Powodem dla wielu klient√≥w do zastosowania wzorca wdra≈ºania miƒôdzy ≈õrodowiskami lokalnych jest fakt, ≈ºe jest najbardziej przejrzysty dla wszystkich aplikacji, aby rozszerzyƒá lokalnie na platformƒô Azure przy u≈ºyciu us≈Çugi Azure ExpressRoute i traktowaƒá platformƒô Azure jako wirtualne centrum danych. W miarƒô jak coraz wiƒôcej zasob√≥w jest przenoszonych na platformƒô Azure, infrastruktura i infrastruktura sieciowa wdro≈ºona na platformie Azure bƒôdƒÖ siƒô rozwijaƒá, a zasoby lokalne bƒôdƒÖ odpowiednio zmniejszaƒá. Wszystko przejrzyste dla u≈ºytkownik√≥w i aplikacji.

Aby pomy≈õlnie wdro≈ºyƒá systemy SAP w us≈Çudze Azure IaaS lub IaaS w og√≥le, wa≈ºne jest, aby zrozumieƒá znaczne r√≥≈ºnice miƒôdzy ofertami tradycyjnych zleceniodawc√≥w lub host√≥w i ofert IaaS. Podczas gdy tradycyjny hoster lub zleceniodawca dostosowuje infrastrukturƒô (sieƒá, pamiƒôƒá masowƒÖ i typ serwera) do obciƒÖ≈ºenia, kt√≥re klient chce hostowaƒá, zamiast tego klient lub partner jest odpowiedzialny za scharakteryzowanie obciƒÖ≈ºenia i wybranie odpowiedniej platformy Azure sk≈Çadniki maszyn wirtualnych, magazynu i sieci dla wdro≈ºe≈Ñ IaaS.

Aby zebraƒá dane do planowania wdro≈ºenia na platformie Azure, wa≈ºne jest, aby:

- Oce≈Ñ, jakie produkty SAP sƒÖ obs≈Çugiwane na maszynach wirtualnych platformy Azure
- Oce≈Ñ, jakie wersje okre≈õlonych system√≥w operacyjnych sƒÖ obs≈Çugiwane przez okre≈õlone maszyny wirtualne platformy Azure dla tych produkt√≥w SAP
- Oce≈Ñ, jakie wersje DBMS sƒÖ obs≈Çugiwane dla twoich produkt√≥w SAP za pomocƒÖ okre≈õlonych maszyn wirtualnych platformy Azure
- Oce≈Ñ, czy niekt√≥re z wymaganych wersji systemu operacyjnego/dbms wymagajƒÖ wykonania wersji SAP, uaktualnienia pakietu pomocy technicznej i jƒÖdra, aby przej≈õƒá do obs≈Çugiwanej konfiguracji
- Oce≈Ñ, czy musisz przej≈õƒá do r√≥≈ºnych system√≥w operacyjnych, aby wdro≈ºyƒá je na platformie Azure.

Szczeg√≥≈Çowe informacje na temat obs≈Çugiwanych sk≈Çadnik√≥w SAP na platformie Azure, obs≈Çugiwanych jednostek infrastruktury platformy Azure i powiƒÖzanych wersji system√≥w operacyjnych oraz wersji DBMS zosta≈Çy wyja≈õnione w artykule [Jakie oprogramowanie SAP jest obs≈Çugiwane dla wdro≈ºe≈Ñ platformy Azure.](./sap-supported-product-on-azure.md) Wyniki uzyskane z oceny prawid≈Çowych wersji SAP, systemu operacyjnego i wersji DBMS majƒÖ du≈ºy wp≈Çyw na wysi≈Çki zwiƒÖzane z przenoszeniem system√≥w SAP na platformƒô Azure. Wyniki tej oceny bƒôdƒÖ okre≈õlaƒá, czy mogƒÖ byƒá znaczƒÖce wysi≈Çki na rzecz przygotowania w przypadkach, gdy potrzebne sƒÖ uaktualnienia lub zmiany system√≥w operacyjnych firmy SAP.


## <a name="azure-regions"></a><a name="be80d1b9-a463-4845-bd35-f4cebdb5424a"></a>Regiony platformy Azure
Us≈Çugi platformy Azure firmy Microsoft sƒÖ zbierane w regionach platformy Azure. Region platformy Azure to jeden lub zbi√≥r z centr√≥w danych, kt√≥re zawierajƒÖ sprzƒôt i infrastrukturƒô, kt√≥ra uruchamia i obs≈Çuguje r√≥≈ºne us≈Çugi platformy Azure. Ta infrastruktura obejmuje du≈ºƒÖ liczbƒô wƒôz≈Ç√≥w, kt√≥re dzia≈ÇajƒÖ jako wƒôz≈Çy obliczeniowe lub wƒôz≈Çy magazynu lub uruchamiajƒÖ funkcje sieciowe. 

Aby uzyskaƒá listƒô r√≥≈ºnych region√≥w platformy Azure, zapoznaj siƒô z artyku≈Çem [Geografie platformy Azure](https://azure.microsoft.com/global-infrastructure/geographies/). Nie wszystkie regiony platformy Azure oferujƒÖ te same us≈Çugi. W zale≈ºno≈õci od produktu SAP, kt√≥ry chcesz uruchomiƒá, a system operacyjny i system dbms z nim zwiƒÖzane, mo≈ºe sko≈Ñczyƒá siƒô w sytuacji, ≈ºe okre≈õlony region nie oferuje typy maszyn wirtualnych, kt√≥re sƒÖ wymagane. Jest to szczeg√≥lnie wa≈ºne w przypadku uruchamiania sap HANA, gdzie zwykle potrzebujesz maszyn wirtualnych z serii M/Mv2 VM. Te rodziny maszyn wirtualnych sƒÖ wdra≈ºane tylko w podzbiorze region√≥w. Mo≈ºesz dowiedzieƒá siƒô, jaka dok≈Çadna maszyna wirtualna, typy, typy magazynu platformy Azure lub inne us≈Çugi platformy Azure sƒÖ dostƒôpne w kt√≥rych regionach za pomocƒÖ witryny [Produkty dostƒôpne wed≈Çug regionu.](https://azure.microsoft.com/global-infrastructure/services/) Po rozpoczƒôciu planowania i mieƒá pewne regiony na uwadze jako regionu podstawowego i ostatecznie regionu pomocniczego, nale≈ºy najpierw zbadaƒá, czy niezbƒôdne us≈Çugi sƒÖ dostƒôpne w tych regionach. 

### <a name="availability-zones"></a>Strefy dostƒôpno≈õci
Kilka region√≥w platformy Azure zaimplementowano koncepcjƒô o nazwie Strefy dostƒôpno≈õci. Strefy dostƒôpno≈õci sƒÖ fizycznie oddzielne lokalizacje w regionie platformy Azure. Ka≈ºda strefa dostƒôpno≈õci sk≈Çada siƒô z co najmniej jednego centrum danych wyposa≈ºonego w niezale≈ºne zasilanie, ch≈Çodzenie i sieƒá. Na przyk≈Çad wdra≈ºanie dw√≥ch maszyn wirtualnych w dw√≥ch strefach dostƒôpno≈õci platformy Azure i implementowanie struktury wysokiej dostƒôpno≈õci dla systemu SAP DBMS lub us≈Çug SAP Central zapewnia najlepszƒÖ us≈Çugƒô SLA na platformie Azure. W przypadku tej konkretnej umowy SLA maszyny wirtualnej na platformie Azure sprawd≈∫ najnowszƒÖ wersjƒô [umowy SLA maszyny wirtualnej](https://azure.microsoft.com/support/legal/sla/virtual-machines/). Poniewa≈º regiony platformy Azure opracowane i rozszerzone szybko w ciƒÖgu ostatnich lat, topologia region√≥w platformy Azure, liczba fizycznych centr√≥w danych, odleg≈Ço≈õƒá miƒôdzy tymi centrami danych i odleg≈Ço≈õƒá miƒôdzy strefami dostƒôpno≈õci platformy Azure mogƒÖ byƒá r√≥≈ºne. A wraz z tym op√≥≈∫nienie sieci.

Zasada stref dostƒôpno≈õci nie ma zastosowania do us≈Çugi szczeg√≥≈Çowej HANA [hana du≈ºych wystƒÖpie≈Ñ HANA](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/hana-overview-architecture). Umowy dotyczƒÖce poziomu us≈Çug dla du≈ºych wystƒÖpie≈Ñ HANA mo≈ºna znale≈∫ƒá w artykule [Umowa SLA dla SAP HANA na du≈ºych wystƒÖpieniach platformy Azure](https://azure.microsoft.com/support/legal/sla/sap-hana-large/) 


### <a name="fault-domains"></a><a name="df49dc09-141b-4f34-a4a2-990913b30358"></a>Domeny b≈Çƒôd√≥w
Domeny b≈Çƒôd√≥w reprezentujƒÖ fizycznƒÖ jednostkƒô awarii, ≈õci≈õle zwiƒÖzanƒÖ z infrastrukturƒÖ fizycznƒÖ zawartƒÖ w centrach danych i chocia≈º fizyczny blok lub stojak mo≈ºna uznaƒá za domenƒô b≈Çƒôd√≥w, nie ma bezpo≈õredniego mapowania jeden do jednego miƒôdzy nimi.

Podczas wdra≈ºania wielu maszyn wirtualnych w ramach jednego systemu SAP w us≈Çugach maszyn wirtualnych platformy Microsoft Azure mo≈ºna mieƒá wp≈Çyw na kontroler sieci szkieletowej platformy Azure w celu wdro≈ºenia aplikacji w r√≥≈ºnych domenach b≈Çƒôd√≥w, spe≈ÇniajƒÖc tym samym wy≈ºsze wymagania dostƒôpno≈õci SLA. Jednak dystrybucja domen b≈Çƒôd√≥w za po≈õrednictwem jednostki skalowania platformy Azure (kolekcja setek wƒôz≈Ç√≥w obliczeniowych lub wƒôz≈Ç√≥w magazynu i sieci) lub przypisanie maszyn wirtualnych do okre≈õlonej domeny b≈Çƒôd√≥w jest czym≈õ, nad czym nie masz bezpo≈õredniej kontroli. Aby skierowaƒá kontroler sieci szkieletowej platformy Azure do wdro≈ºenia zestawu maszyn wirtualnych w r√≥≈ºnych domenach b≈Çƒôd√≥w, nale≈ºy przypisaƒá dostƒôpno≈õƒá platformy Azure ustawionƒÖ na maszyny wirtualne w czasie wdra≈ºania. Aby uzyskaƒá wiƒôcej informacji na temat zestaw√≥w dostƒôpno≈õci platformy Azure, zobacz rozdzia≈Ç [zestawy dostƒôpno≈õci platformy Azure][planning-guide-3.2.3] w tym dokumencie.


### <a name="upgrade-domains"></a><a name="fc1ac8b2-e54a-487c-8581-d3cc6625e560"></a>Uaktualnij domeny
Domeny uaktualnienia reprezentujƒÖ jednostkƒô logicznƒÖ, kt√≥ra pomaga okre≈õliƒá spos√≥b aktualizowanie maszyny wirtualnej w systemie SAP, kt√≥ry sk≈Çada siƒô z wystƒÖpie≈Ñ SAP uruchomionych na wielu maszynach wirtualnych. Po wystƒÖpieniu uaktualnienia platforma Microsoft Azure przechodzi przez proces aktualizowania tych domen uaktualnienia jeden po drugim. RozprzestrzeniajƒÖc maszyny wirtualne w czasie wdra≈ºania w r√≥≈ºnych domenach uaktualnienia, mo≈ºna chroniƒá system SAP czƒô≈õciowo przed potencjalnymi przestojami. Aby wymusiƒá na platformie Azure wdro≈ºenie maszyn wirtualnych systemu SAP roz≈Ço≈ºonych na r√≥≈ºne domeny uaktualnie≈Ñ, nale≈ºy ustawiƒá okre≈õlony atrybut w czasie wdra≈ºania ka≈ºdej maszyny Wirtualnej. Podobnie jak w przypadku domen b≈Çƒôd√≥w, jednostka skalowania platformy Azure jest podzielona na wiele domen uaktualnienia. Aby skierowaƒá kontroler sieci szkieletowej platformy Azure do wdro≈ºenia zestawu maszyn wirtualnych w r√≥≈ºnych domenach uaktualnie≈Ñ, nale≈ºy przypisaƒá zestaw dostƒôpno≈õci platformy Azure do maszyn wirtualnych w czasie wdra≈ºania. Aby uzyskaƒá wiƒôcej informacji na temat zestaw√≥w dostƒôpno≈õci platformy Azure, zobacz rozdzia≈Ç [zestawy dostƒôpno≈õci platformy Azure][planning-guide-3.2.3] poni≈ºej.


### <a name="azure-availability-sets"></a><a name="18810088-f9be-4c97-958a-27996255c665"></a>Zestawy dostƒôpno≈õci platformy Azure
Maszyny wirtualne platformy Azure w ramach jednego zestawu dostƒôpno≈õci platformy Azure sƒÖ dystrybuowane przez kontroler sieci szkieletowej platformy Azure w r√≥≈ºnych domenach b≈Çƒôd√≥w i uaktualnie≈Ñ. Celem dystrybucji w r√≥≈ºnych domenach b≈Çƒôd√≥w i uaktualnie≈Ñ jest zapobieganie zamykaniu wszystkich maszyn wirtualnych systemu SAP w przypadku konserwacji infrastruktury lub awarii w jednej domenie b≈Çƒôd√≥w. Domy≈õlnie maszyny wirtualne nie sƒÖ czƒô≈õciƒÖ zestawu dostƒôpno≈õci. Udzia≈Ç maszyny Wirtualnej w zestawie dostƒôpno≈õci jest definiowany w czasie wdra≈ºania lub p√≥≈∫niej przez ponownƒÖ konfiguracjƒô i ponowne wdro≈ºenie maszyny Wirtualnej.

Aby zrozumieƒá pojƒôcie zestaw√≥w dostƒôpno≈õci platformy Azure i spos√≥b, w jaki zestawy dostƒôpno≈õci odnoszƒÖ siƒô do domen b≈Çƒôd√≥w i uaktualnie≈Ñ, przeczytaj [ten artyku≈Ç][virtual-machines-manage-availability]. 

Podczas definiowania zestaw√≥w dostƒôpno≈õci i pr√≥by mieszania r√≥≈ºnych maszyn wirtualnych z r√≥≈ºnych rodzin maszyn wirtualnych w ramach jednego zestawu dostƒôpno≈õci, mogƒÖ wystƒÖpiƒá problemy, kt√≥re uniemo≈ºliwiajƒÖ w≈ÇƒÖczenie okre≈õlonego typu maszyny Wirtualnej do takiego zestawu dostƒôpno≈õci. Powodem jest to, ≈ºe zestaw dostƒôpno≈õci jest powiƒÖzany ze skalowaniem jednostki zawierajƒÖcej okre≈õlony typ host√≥w obliczeniowych. A okre≈õlony typ hosta obliczeniowego mo≈ºe uruchamiaƒá tylko niekt√≥re typy rodzin maszyn wirtualnych. Na przyk≈Çad je≈õli utworzysz zestaw dostƒôpno≈õci i wdro≈ºysz pierwszƒÖ maszynƒô wirtualnƒÖ w zestawie dostƒôpno≈õci i wybierzesz typ maszyny Wirtualnej z rodziny Esv3, a nastƒôpnie spr√≥bujesz wdro≈ºyƒá jako drugƒÖ maszynƒô wirtualnƒÖ z rodziny M, zostaniesz odrzucony w drugiej alokacji. Powodem jest to, ≈ºe maszyny wirtualne z rodziny Esv3 nie sƒÖ uruchomione na tym samym sprzƒôcie hosta, co maszyny wirtualne z rodziny M. Ten sam problem mo≈ºe wystƒÖpiƒá, podczas pr√≥by zmiany rozmiaru maszyn wirtualnych i spr√≥buj przenie≈õƒá maszynƒô wirtualnƒÖ z rodziny Esv3 do typu maszyny Wirtualnej z rodziny M. W przypadku zmiany rozmiaru do rodziny maszyn wirtualnych, kt√≥re nie mogƒÖ byƒá hostowane na tym samym sprzƒôcie hosta, nale≈ºy zamknƒÖƒá wszystkie maszyny wirtualne w zestawie dostƒôpno≈õci i zmieniƒá ich rozmiar, aby m√≥c dzia≈Çaƒá na innym typie komputera hosta. W przypadku zestaw√≥w SLA maszyn wirtualnych wdro≈ºonych w ramach zestawu dostƒôpno≈õci zapoznaj siƒô z artyku≈Çem [Uje≈ºdona uje≈ºdne instaly sla maszyn wirtualnych](https://azure.microsoft.com/support/legal/sla/virtual-machines/). 

Zasada zestawu dostƒôpno≈õci i powiƒÖzanej aktualizacji i domeny b≈Çƒôd√≥w nie ma zastosowania do okre≈õlonej us≈Çugi [HANA du≈ºych wystƒÖpie≈Ñ HANA](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/hana-overview-architecture). Umowy dotyczƒÖce poziomu us≈Çug dla du≈ºych wystƒÖpie≈Ñ HANA mo≈ºna znale≈∫ƒá w artykule [Umowa SLA dla SAP HANA na platformie Azure Du≈ºych WystƒÖpie≈Ñ.](https://azure.microsoft.com/support/legal/sla/sap-hana-large/) 

> [!IMPORTANT]
> Pojƒôcia strefy dostƒôpno≈õci platformy Azure i zestawy dostƒôpno≈õci platformy Azure wzajemnie siƒô wykluczajƒÖ. Oznacza to, ≈ºe mo≈ºna wdro≈ºyƒá parƒô lub wiele maszyn wirtualnych w okre≈õlonej strefie dostƒôpno≈õci lub zestaw dostƒôpno≈õci platformy Azure. Ale nie jedno i drugie.


## <a name="azure-virtual-machine-services"></a>Us≈Çugi maszyn wirtualnych platformy Azure
Platforma Azure oferuje szerokƒÖ gamƒô maszyn wirtualnych, kt√≥re mo≈ºna wybraƒá do wdro≈ºenia. Nie ma potrzeby zakupu technologii z g√≥ry i infrastruktury. Us≈Çuga azure VM upraszcza obs≈Çugƒô i obs≈Çugƒô aplikacji, zapewniajƒÖc zasoby obliczeniowe i magazynowe na ≈ºƒÖdanie do hostowania, skalowania i zarzƒÖdzania aplikacjami sieci Web i po≈ÇƒÖczonymi aplikacjami. ZarzƒÖdzanie infrastrukturƒÖ jest zautomatyzowane za pomocƒÖ platformy, kt√≥ra jest przeznaczona do wysokiej dostƒôpno≈õci i dynamicznego skalowania, aby dopasowaƒá potrzeby u≈ºycia z opcjƒÖ kilku r√≥≈ºnych modeli cenowych.

![Pozycjonowanie us≈Çug maszyn wirtualnych platformy Microsoft Azure][planning-guide-figure-400]

Dziƒôki maszynom wirtualnym platformy Azure firma Microsoft umo≈ºliwia wdra≈ºanie niestandardowych obraz√≥w serwer√≥w na platformie Azure jako wystƒÖpienia us≈Çugi IaaS. Mo≈ºesz te≈º wybraƒá z galerii obraz√≥w obraz√≥w systemu operacyjnego platformy Azure bogaty wyb√≥r obraz√≥w z materia≈Ç√≥w eksploatacyjnych.

Z operacyjnego punktu widzenia us≈Çuga maszyny wirtualnej platformy Azure oferuje podobne ≈õrodowisko jak maszyny wirtualne wdro≈ºone lokalnie. U≈ºytkownik jest odpowiedzialny za administrowanie, operacje, a tak≈ºe poprawki okre≈õlonego systemu operacyjnego, uruchomione na maszynie Wirtualnej platformy Azure i jej aplikacji w tej maszynie wirtualnej. Firma Microsoft nie ≈õwiadczy wiƒôcej us≈Çug poza hosting tej maszyny Wirtualnej na swojej infrastrukturze platformy Azure (Infrastruktura jako us≈Çuga ‚Äî IaaS). W przypadku obciƒÖ≈ºenia SAP, kt√≥re mo≈ºna wdro≈ºyƒá jako klient, firma Microsoft nie ma ofert poza ofertƒÖ IaaS. 

Platforma Microsoft Azure jest platformƒÖ wielodostƒôpnƒÖ. W rezultacie zasoby magazynu, sieci i oblicze≈Ñ, kt√≥re hostujƒÖ maszyny wirtualne platformy Azure sƒÖ, z kilkoma wyjƒÖtkami, wsp√≥≈Çu≈ºytkowane przez dzier≈ºawc√≥w. Inteligentna logika ograniczania przepustowo≈õci i przydzia≈Çu jest u≈ºywana, aby zapobiec wp≈Çywowi jednego dzier≈ºawcy na wydajno≈õƒá innego dzier≈ºawcy (ha≈Ça≈õliwego sƒÖsiada) w drastyczny spos√≥b. Specjalnie w przypadku certyfikacji platformy Azure dla sap HANA firma Microsoft musi udowodniƒá izolacjƒô zasob√≥w w przypadkach, gdy wiele maszyn wirtualnych mo≈ºna regularnie uruchamiaƒá na tym samym ho≈õcie do sap. Chocia≈º logika na platformie Azure stara siƒô zachowaƒá r√≥≈ºnice w przepustowo≈õci do≈õwiadczonych ma≈Çych, wysoce wsp√≥≈Çu≈ºytkowane platformy majƒÖ tendencjƒô do wprowadzania wiƒôkszych odchyle≈Ñ w dostƒôpno≈õci zasob√≥w/przepustowo≈õci ni≈º klienci mogƒÖ wystƒÖpiƒá w ich wdro≈ºeniach lokalnych. Nale≈ºy wziƒÖƒá pod uwagƒô prawdopodobie≈Ñstwo, ≈ºe system SAP na platformie Azure mo≈ºe wystƒÖpiƒá wiƒôksze odchylenia ni≈º w systemie lokalnym.

### <a name="azure-virtual-machines-for-sap-workload"></a>Maszyny wirtualne platformy Azure dla obciƒÖ≈ºenia SAP

W przypadku obciƒÖ≈ºenia SAP zawƒôzili≈õmy wyb√≥r do r√≥≈ºnych rodzin maszyn wirtualnych, kt√≥re sƒÖ odpowiednie dla obciƒÖ≈ºenia SAP i obciƒÖ≈ºenia SAP HANA w szczeg√≥lno≈õci. Spos√≥b, w jaki mo≈ºna znale≈∫ƒá odpowiedni typ maszyny Wirtualnej i jego zdolno≈õƒá do pracy za po≈õrednictwem obciƒÖ≈ºenia SAP jest opisany w dokumencie [Jakie oprogramowanie SAP jest obs≈Çugiwane dla wdro≈ºe≈Ñ platformy Azure.](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-supported-product-on-azure) 

> [!NOTE]
> Typy maszyn wirtualnych, kt√≥re sƒÖ certyfikowane dla obciƒÖ≈ºenia SAP, nie ma nadmiernej obs≈Çugi administracyjnej zasob√≥w procesora CPU i pamiƒôci.

Opr√≥cz wyboru wy≈ÇƒÖcznie obs≈Çugiwanych maszyn wirtualnych, nale≈ºy r√≥wnie≈º sprawdziƒá, czy sƒÖ dostƒôpne w okre≈õlonym regionie na podstawie [witryny Produkty dostƒôpne dla regionu.](https://azure.microsoft.com/global-infrastructure/services/) Ale co wa≈ºniejsze, musisz oceniƒá, czy:

- Zasoby procesora i pamiƒôci r√≥≈ºnych typ√≥w maszyn wirtualnych 
- Przepustowo≈õƒá we/wy na r√≥≈ºnych typach maszyn wirtualnych
- Mo≈ºliwo≈õci sieciowe r√≥≈ºnych typ√≥w maszyn wirtualnych
- Liczba dysk√≥w, kt√≥re mo≈ºna pod≈ÇƒÖczyƒá
- Mo≈ºliwo≈õƒá wykorzystania niekt√≥rych typ√≥w magazynu platformy Azure

do twoich potrzeb. Wiƒôkszo≈õƒá tych danych mo≈ºna znale≈∫ƒá [tutaj (Linux)][virtual-machines-sizes-linux] i [tutaj (Windows)][virtual-machines-sizes-windows] dla okre≈õlonego typu maszyny Wirtualnej.

Jako model cenowy masz kilka r√≥≈ºnych opcji cen, kt√≥re wymieniajƒÖ takie opcje:

- P≈Çatno≈õƒá zgodnie z rzeczywistym u≈ºyciem
- Jeden rok zarezerwowany
- Trzy lata zarezerwowane
- Ceny kasowe

Ceny ka≈ºdej z r√≥≈ºnych ofert z r√≥≈ºnych ofert us≈Çug wok√≥≈Ç system√≥w operacyjnych i r√≥≈ºnych region√≥w jest dostƒôpny na stronie [Linux Virtual Machines Cennik](https://azure.microsoft.com/pricing/details/virtual-machines/linux/) i [Windows Virtual Machines Ceny](https://azure.microsoft.com/pricing/details/virtual-machines/windows/). Aby uzyskaƒá szczeg√≥≈Çowe informacje i elastyczno≈õƒá wystƒÖpienia zarezerwowanego na rok i trzy lata, zapoznaj siƒô z tymi artyku≈Çami:

- [Co to sƒÖ rezerwacje platformy Azure?](https://docs.microsoft.com/azure/cost-management-billing/reservations/save-compute-costs-reservations)
- [Elastyczno≈õƒá rozmiaru maszyny wirtualnej w us≈Çudze Reserved VM Instances](https://docs.microsoft.com/azure/virtual-machines/windows/reserved-vm-instance-size-flexibility)
- [Jak rabat na rezerwacjƒô platformy Azure jest stosowany do maszyn wirtualnych](https://docs.microsoft.com/azure/cost-management-billing/manage/understand-vm-reservation-charges) 

Aby uzyskaƒá wiƒôcej informacji na temat cen spot, przeczytaj artyku≈Ç [Azure Spot Virtual Machines](https://azure.microsoft.com/pricing/spot/). Ceny tego samego typu maszyny Wirtualnej mogƒÖ r√≥wnie≈º r√≥≈ºniƒá siƒô miƒôdzy r√≥≈ºnymi regionami platformy Azure. W przypadku niekt√≥rych klient√≥w warto by≈Ço wdro≈ºyƒá w ta≈Ñszym regionie platformy Azure.

Ponadto platforma Azure oferuje koncepcje dedykowanego hosta. Koncepcja dedykowanego hosta zapewnia wiƒôkszƒÖ kontrolƒô nad cyklami poprawek wykonywanych przez platformƒô Azure. Mo≈ºesz czas poprawki zgodnie z w≈Çasnymi harmonogramami. Ta oferta jest specjalnie kierowane do klient√≥w z obciƒÖ≈ºeniem, kt√≥re mogƒÖ nie po normalnym cyklu obciƒÖ≈ºenia. Aby zapoznaƒá siƒô z pojƒôciami ofert dedykowanych host√≥w platformy Azure, przeczytaj artyku≈Ç [Azure Dedicated Host](https://docs.microsoft.com/azure/virtual-machines/windows/dedicated-hosts). Korzystanie z tej oferty jest obs≈Çugiwane dla obciƒÖ≈ºenia SAP i jest u≈ºywane przez kilku klient√≥w SAP, kt√≥rzy chcƒÖ mieƒá wiƒôkszƒÖ kontrolƒô nad ≈Çataniem infrastruktury i ewentualnymi planami konserwacji firmy Microsoft. Aby uzyskaƒá wiƒôcej informacji na temat sposobu, w jaki firma Microsoft przechowuje i ≈Çata infrastrukturƒô platformy Azure, kt√≥ra obs≈Çuguje maszyny wirtualne, przeczytaj artyku≈Ç [Konserwacja maszyn wirtualnych na platformie Azure.](https://docs.microsoft.com/azure/virtual-machines/maintenance-and-updates)

#### <a name="generation-1-and-generation-2-virtual-machines"></a>Maszyny wirtualne generacji 1 i 2 generacji
Hipernadzorcy firmy Microsoft jest w stanie obs≈Çu≈ºyƒá dwie r√≥≈ºne generacje maszyn wirtualnych. Formaty te nazywane sƒÖ **generacjƒÖ 1** i **generacjƒÖ 2**. **Generacja 2** zosta≈Ça wprowadzona w roku 2012 z hypervisorem systemu Windows Server 2012. Platforma Azure rozpoczƒô≈Ça siƒô przy u≈ºyciu maszyn wirtualnych generacji 1. Podczas wdra≈ºania maszyn wirtualnych platformy Azure domy≈õlnie jest nadal u≈ºywaƒá formatu generacji 1. W miƒôdzyczasie mo≈ºna r√≥wnie≈º wdro≈ºyƒá formaty maszyn wirtualnych generacji 2. Artyku≈Ç [Obs≈Çuga maszyn wirtualnych generacji 2 na platformie Azure](https://docs.microsoft.com/azure/virtual-machines/windows/generation-2) zawiera listƒô rodzin maszyn wirtualnych platformy Azure, kt√≥re mo≈ºna wdro≈ºyƒá jako maszynƒô wirtualnƒÖ generacji 2. W tym artykule wymieniono r√≥wnie≈º bardzo wa≈ºne r√≥≈ºnice funkcjonalne maszyn wirtualnych generacji 2, kt√≥re mo≈ºna uruchomiƒá w chmurze prywatnej funkcji Hyper-V i platformie Azure. Wa≈ºniejsze w tym artykule wymieniono r√≥wnie≈º r√≥≈ºnice funkcjonalne miƒôdzy maszynami wirtualnymi generacji 1 i maszynami wirtualnymi generacji 2, jak te uruchamiane na platformie Azure. 

> [!NOTE]
> IstniejƒÖ r√≥≈ºnice funkcjonalne generacji 1 i generacji 2 maszyn wirtualnych uruchomionych na platformie Azure. Przeczytaj artyku≈Ç [Obs≈Çuga maszyn wirtualnych generacji 2 na platformie Azure,](https://docs.microsoft.com/azure/virtual-machines/windows/generation-2) aby wy≈õwietliƒá listƒô tych r√≥≈ºnic.  
 
Przeniesienie istniejƒÖcej maszyny Wirtualnej z jednej generacji na drugƒÖ generacjƒô nie jest mo≈ºliwe. Aby zmieniƒá generowanie maszyny wirtualnej, nale≈ºy wdro≈ºyƒá nowƒÖ maszynƒô wirtualnƒÖ generacji, kt√≥rej potrzebujesz, i ponownie zainstalowaƒá oprogramowanie uruchomione na maszynie wirtualnej generacji. Dotyczy to tylko podstawowego obrazu VHD maszyny wirtualnej i nie ma wp≈Çywu na dyski danych lub do≈ÇƒÖczone udzia≈Çy NFS lub SMB. Dyski danych, nfs lub udzia≈Çy SMB, kt√≥re pierwotnie zosta≈Çy przypisane do, na przyk≈Çad, na maszynie wirtualnej generacji 1

W tej chwili wystƒÖpi ten problem, szczeg√≥lnie miƒôdzy maszynami wirtualnymi z serii M platformy Azure i maszynami wirtualnymi z serii Mv2. Ze wzglƒôdu na ograniczenia w formacie maszyny Wirtualnej generacji 1 du≈ºe maszyny wirtualne z rodziny Mv2 nie mog≈Çy byƒá oferowane w formacie generacji 1, ale muszƒÖ byƒá oferowane wy≈ÇƒÖcznie w generacji 2. Z drugiej strony rodzina maszyn wirtualnych serii M nie jest jeszcze w≈ÇƒÖczona do wdra≈ºania w generacji 2. W rezultacie ponowne zmiany rozmiaru miƒôdzy maszynami wirtualnymi serii M i Mv2 serii wymagajƒÖ ponownej instalacji oprogramowania na maszynie wirtualnej, kt√≥ra jest kierowana na innƒÖ rodzinƒô maszyn wirtualnych. Firma Microsoft pracuje nad wdro≈ºeniem maszyn wirtualnych z serii M dla wdro≈ºe≈Ñ generacji 2. Wdra≈ºanie maszyn wirtualnych z serii M jako maszyn wirtualnych generacji 2 w przysz≈Ço≈õci umo≈ºliwi pozornie mniej zmiany rozmiaru miƒôdzy maszynami wirtualnymi serii M i Mv2. W obu kierunkach rozmiary z serii M do wiƒôkszych maszyn wirtualnych serii Mv2 lub rozmiary w d√≥≈Ç z wiƒôkszych maszyn wirtualnych z serii Mv2 do mniejszych maszyn wirtualnych z serii M. Dokumentacja zostanie zaktualizowana, gdy tylko maszyny wirtualne z serii M bƒôdƒÖ mog≈Çy zostaƒá wdro≈ºone jako maszyny wirtualne generacji 2.    

 

### <a name="storage-microsoft-azure-storage-and-data-disks"></a><a name="a72afa26-4bf4-4a25-8cf7-855d6032157f"></a>Magazyn: Magazyn microsoft azure i dyski danych
Maszyny wirtualne platformy Microsoft Azure korzystajƒÖ z r√≥≈ºnych typ√≥w magazynu. Podczas implementowania sap na us≈Çugi maszyny wirtualnej platformy Azure, wa≈ºne jest, aby zrozumieƒá r√≥≈ºnice miƒôdzy tymi dwoma g≈Ç√≥wnymi typami magazynu:

* Nietrwa≈Çe, nietrwa≈Çe przechowywanie.
* Magazyn trwa≈Çy.

Maszyny wirtualne platformy Azure oferujƒÖ dyski nietrwa≈Çe po wdro≈ºeniu maszyny wirtualnej. W przypadku ponownego uruchomienia maszyny Wirtualnej ca≈Ça zawarto≈õƒá na tych dyskach zostanie wymazana. W zwiƒÖzku z tym jest to, ≈ºe pliki danych i log/redo plik√≥w baz danych nie powinny w ≈ºadnym wypadku znajdowaƒá siƒô na tych dyskach nieutrwalonych. MogƒÖ istnieƒá wyjƒÖtki dla niekt√≥rych baz danych, gdzie te nieutrwalone dyski mogƒÖ byƒá odpowiednie dla tempdb i temp tablespaces. Nale≈ºy jednak unikaƒá u≈ºywania tych dysk√≥w dla maszyn wirtualnych serii A, poniewa≈º te dyski nieutrwalone sƒÖ ograniczone w przep≈Çywno≈õci z tej rodziny maszyn wirtualnych. Aby uzyskaƒá wiƒôcej informacji, przeczytaj artyku≈Ç [Opis tymczasowego dysku na maszynach wirtualnych z systemem Windows na platformie Azure](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/)

---
> ![Windows][Logo_Windows] Windows
> 
> Dysk D:\ w maszynie Wirtualnej platformy Azure jest dyskiem nieutrwalone, kt√≥ry jest wspierany przez niekt√≥re dyski lokalne w wƒô≈∫le obliczeniowym platformy Azure. Poniewa≈º nie jest utrwalony, oznacza to, ≈ºe wszelkie zmiany wprowadzone do zawarto≈õci na D:\ dysk zostanie utracony po ponownym uruchomieniu maszyny Wirtualnej. Przez "wszelkie zmiany", takie jak przechowywane pliki, utworzone katalogi, zainstalowane aplikacje itp.
> 
> ![Linux][Logo_Linux] Linux
> 
> Maszyny wirtualne platformy Azure z systemem Linux automatycznie montujƒÖ dysk w /mnt/resource, kt√≥ry jest dyskiem nieutrwalonym wspieranym przez dyski lokalne w wƒô≈∫le obliczeniowym platformy Azure. Poniewa≈º nie jest utrwalony, oznacza to, ≈ºe wszelkie zmiany wprowadzone do zawarto≈õci w /mnt/resource zostanƒÖ utracone po ponownym uruchomieniu maszyny Wirtualnej. Przez wszelkie zmiany, takie jak przechowywane pliki, katalogi utworzone, zainstalowane aplikacje itp.
> 
> 

---

Us≈Çuga Microsoft Azure Storage zapewnia utrwalone miejsce do magazynowania oraz typowe poziomy ochrony i nadmiarowo≈õci widoczne w magazynie san. Dyski oparte na us≈Çudze Azure Storage to wirtualne dyski twarde (VHD) znajdujƒÖce siƒô w us≈Çugach us≈Çugi Azure Storage. Lokalny dysk systemu operacyjnego (Windows C:\, Linux /dev/sda1) jest przechowywany w us≈Çudze Azure Storage, a dodatkowe woluminy/dyski zainstalowane na maszynie wirtualnej sƒÖ tam przechowywane.

Istnieje mo≈ºliwo≈õƒá przekazania istniejƒÖcego dysku wirtualnego z lokalnego lub utworzyƒá puste z poziomu platformy Azure i do≈ÇƒÖczyƒá te dyski WIRTUALNE do wdro≈ºonych maszyn wirtualnych.

Po utworzeniu lub przekazaniu dysku VHD do us≈Çugi Azure Storage mo≈ºna zainstalowaƒá i do≈ÇƒÖczyƒá je do istniejƒÖcej maszyny wirtualnej i skopiowaƒá istniejƒÖcy (odinstalowany) dysk VHD.

Poniewa≈º te dyski VHD sƒÖ utrwalone, dane i zmiany w tych dyskach VHD sƒÖ bezpieczne podczas ponownego uruchamiania i ponownego tworzenia wystƒÖpienia maszyny wirtualnej. Nawet je≈õli wystƒÖpienie zostanie usuniƒôte, te dyski VHD pozostajƒÖ bezpieczne i mogƒÖ zostaƒá ponownie rozmieszczone lub w przypadku dysk√≥w innych ni≈º OS mogƒÖ byƒá instalowane na innych maszynach wirtualnych.

Wiƒôcej informacji na temat us≈Çugi Azure Storage mo≈ºna znale≈∫ƒá tutaj:

* <https://azure.microsoft.com/documentation/services/storage/>
* <https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>
* <https://blogs.msdn.com/b/azuresecurity/archive/2015/11/17/azure-disk-encryption-for-linux-and-windows-virtual-machines-public-preview.aspx>

#### <a name="azure-standard-storage"></a>Azure Standard Storage
Us≈Çuga Azure Standard storage by≈Ça typem magazynu dostƒôpnego po wydaniu us≈Çugi Azure IaaS. Na jednym dysku wymuszano przydzia≈Çy we/wyz. WystƒÖpi≈Ço op√≥≈∫nienie nie by≈Ço w tej samej klasie co urzƒÖdzenia SAN/NAS zwykle wdra≈ºane dla wysokiej klasy system√≥w SAP hostowanych lokalnie. Niemniej jednak us≈Çuga Azure Standard Storage okaza≈Ça siƒô wystarczajƒÖca dla wielu setek system√≥w SAP wdro≈ºonych na platformie Azure.

Dyski przechowywane na kontach us≈Çugi Azure Standard Storage sƒÖ naliczane na podstawie rzeczywistych danych, kt√≥re sƒÖ przechowywane, ilo≈õƒá transakcji magazynu, wychodzƒÖcych transfer√≥w danych i wybranej opcji nadmiarowo≈õci. Wiele dysk√≥w mo≈ºna utworzyƒá z maksymalnym rozmiarem 1 TB, ale tak d≈Çugo, jak te pozostajƒÖ puste, nie ma ≈ºadnych op≈Çat. Je≈õli nastƒôpnie wype≈Çnisz jeden VHD po 100 GB, zostaniesz obciƒÖ≈ºony op≈ÇatƒÖ za przechowywanie 100 GB, a nie za nominalny rozmiar, z kt√≥rego zosta≈Ç utworzony dysk VHD.

#### <a name="azure-premium-storage"></a><a name="ff5ad0f9-f7f4-4022-9102-af07aef3bc92"></a>Us≈Çuga Azure w magazynie w wersji premium
Us≈Çuga Azure Premium Storage zosta≈Ça wprowadzona w celu zapewnienia:

* Lepsze op√≥≈∫nienie we/wy.
* Lepsza przepustowo≈õƒá.
* Mniejsza zmienno≈õƒá op√≥≈∫nienia we/wy.

W tym celu wprowadzono wiele zmian, z kt√≥rych dwa najwa≈ºniejsze to:

* U≈ºycie dysk√≥w SSD w wƒôz≈Çach us≈Çugi Azure Storage
* Nowa pamiƒôƒá podrƒôczna odczytu, kt√≥ra jest wspierana przez lokalny ssd wƒôz≈Ça obliczeniowego platformy Azure

W przeciwie≈Ñstwie do magazynu standardowego, gdzie mo≈ºliwo≈õci nie zmieni≈Çy siƒô w zale≈ºno≈õci od rozmiaru dysku (lub VHD), magazyn w wersji Premium ma obecnie trzy r√≥≈ºne kategorie dysk√≥w, kt√≥re sƒÖ pokazane w tym artykule:<https://azure.microsoft.com/pricing/details/storage/unmanaged-disks/>

Widaƒá, ≈ºe przep≈Çywno≈õƒá/dysk we/wydzia≈Ç√≥w/dysku zale≈ºy od kategorii rozmiaru dysk√≥w

Podstawa kosztowa w przypadku magazynu w wersji Premium nie jest rzeczywistym woluminem danych przechowywanym na takich dyskach, ale kategoriƒÖ rozmiaru takiego dysku, niezale≈ºnie od ilo≈õci danych przechowywanych w dysku.

Mo≈ºna r√≥wnie≈º utworzyƒá dyski w magazynie w wersji Premium, kt√≥re nie sƒÖ bezpo≈õrednio mapowanie do kategorii rozmiaru pokazano. Mo≈ºe tak byƒá w przypadku, zw≈Çaszcza podczas kopiowania dysk√≥w z magazynu standardowego do magazynu w wersji Premium. W takich przypadkach wykonywane jest mapowanie do nastƒôpnej najwiƒôkszej opcji dysku magazynu w wersji Premium.

Wiƒôkszo≈õƒá rodzin maszyn wirtualnych platformy Azure certyfikowanych za pomocƒÖ us≈Çugi SAP mo≈ºe pracowaƒá z magazynem w wersji Premium lub z mieszaninƒÖ miƒôdzy standardem Azure a magazynem w wersji Premium.

Je≈õli wyewidencjonowywania czƒô≈õci maszyn wirtualnych z serii DS w [tym artykule (Linux)][virtual-machines-sizes-linux] i [w tym artykule (Windows)][virtual-machines-sizes-windows]zdajesz sobie sprawƒô, ≈ºe istniejƒÖ ograniczenia woluminu danych dysk√≥w magazynu w wersji Premium na poziomie szczeg√≥≈Çowo≈õci maszyny Wirtualnej. R√≥≈ºne maszyny wirtualne serii DS lub GS majƒÖ r√≥wnie≈º r√≥≈ºne ograniczenia w liczbie dysk√≥w z danymi, kt√≥re mo≈ºna zamontowaƒá. Limity te sƒÖ r√≥wnie≈º udokumentowane w artykule wymienionym powy≈ºej. Ale w istocie oznacza to, ≈ºe je≈õli, na przyk≈Çad, zamontowaƒá 32 x P30 dysk√≥w do jednego DS14 VM nie mo≈ºna uzyskaƒá 32 x maksymalnƒÖ przepustowo≈õƒá dysku P30. Zamiast tego maksymalna przep≈Çywno≈õƒá na poziomie maszyny Wirtualnej, zgodnie z dokumentem w artykule ogranicza przep≈Çywno≈õƒá danych.

Wiƒôcej informacji na temat magazynu w wersji Premium mo≈ºna znale≈∫ƒá tutaj:<https://azure.microsoft.com/blog/2015/04/16/azure-premium-storage-now-generally-available-2>

#### <a name="azure-storage-accounts"></a>Konta us≈Çugi Azure Storage

Podczas wdra≈ºania us≈Çug lub maszyn wirtualnych na platformie Azure wdra≈ºanie dysk√≥w VHD i obraz√≥w maszyn wirtualnych mo≈ºna zorganizowaƒá w jednostkach o nazwie Konta us≈Çugi Azure Storage. PlanujƒÖc wdro≈ºenie platformy Azure, nale≈ºy dok≈Çadnie rozwa≈ºyƒá ograniczenia platformy Azure. Z jednej strony istnieje ograniczona liczba kont magazynu na subskrypcjƒô platformy Azure. Mimo ≈ºe ka≈ºde konto us≈Çugi Azure Storage mo≈ºe pomie≈õciƒá du≈ºƒÖ liczbƒô plik√≥w VHD, istnieje sta≈Çy limit ca≈Çkowitego konta We/Wy na konto magazynu. Podczas wdra≈ºania setek maszyn wirtualnych SAP z systemami DBMS tworzƒÖcych znaczƒÖce wywo≈Çania we/wy zaleca siƒô dystrybucjƒô maszyn wirtualnych we/wy na wiele maszyn wirtualnych us≈Çug We/Wy na wiele r√≥≈ºnych kont us≈Çugi Azure Storage. Nale≈ºy zadbaƒá o to, aby nie przekroczyƒá bie≈ºƒÖcego limitu kont us≈Çugi Azure Storage na subskrypcjƒô. Poniewa≈º magazyn pamiƒôci masowej jest istotnƒÖ czƒô≈õciƒÖ wdra≈ºania bazy danych dla systemu SAP, ta koncepcja zosta≈Ça om√≥wiona bardziej szczeg√≥≈Çowo w [przewodniku wdra≈ºania dbms,][dbms-guide]do kt√≥rego istnieje ju≈º przywo≈Çywalona .

Wiƒôcej informacji na temat kont us≈Çugi Azure Storage mo≈ºna znale≈∫ƒá w [obiektach docelowych skalowalno≈õci dla standardowych kont magazynu](../../../storage/common/scalability-targets-standard-account.md) i cel√≥w [skalowalno≈õci dla kont magazynu obiekt√≥w blob strony premium.](../../../storage/blobs/scalability-targets-premium-page-blobs.md) CzytajƒÖc te artyku≈Çy, zdajesz sobie sprawƒô, ≈ºe istniejƒÖ r√≥≈ºnice w ograniczeniach miƒôdzy kontami us≈Çugi Azure Standard Storage i kontami magazynu w jako≈õci. G≈Ç√≥wne r√≥≈ºnice to ilo≈õƒá danych, kt√≥re mogƒÖ byƒá przechowywane na takim koncie magazynu. W magazynie standardowym wolumin ma rozmiar wiƒôkszy ni≈º w przypadku magazynu w wersji Premium. Z drugiej strony standardowe konto magazynu jest powa≈ºnie ograniczone w us≈Çugach We/Wy (zobacz kolumna **Ca≈Çkowita szybko≈õƒá ≈ºƒÖdania),** podczas gdy konto us≈Çugi Azure Premium Storage nie ma takiego ograniczenia. Om√≥wimy szczeg√≥≈Çy i wyniki tych r√≥≈ºnic podczas omawiania wdro≈ºe≈Ñ system√≥w SAP, zw≈Çaszcza serwer√≥w DBMS.

W ramach konta magazynu masz mo≈ºliwo≈õƒá tworzenia r√≥≈ºnych kontener√≥w w celu organizowania i kategoryzacji r√≥≈ºnych dysk√≥w VHD. Kontenery te sƒÖ u≈ºywane na przyk≈Çad do oddzielnych wirtualnych maszyn wirtualnych r√≥≈ºnych maszyn wirtualnych. Nie ma ≈ºadnych skutk√≥w dla wydajno≈õci przy u≈ºyciu tylko jednego kontenera lub wielu kontener√≥w pod jednym kontem us≈Çugi Azure Storage.

W ramach platformy Azure nazwa dysku VHD nastƒôpuje nastƒôpujƒÖce po≈ÇƒÖczenie nazewnictwa, kt√≥re musi zapewniƒá unikatowƒÖ nazwƒô dysku wirtualnego na platformie Azure:

    http(s)://<storage account name>.blob.core.windows.net/<container name>/<vhd name>

Powy≈ºszy ciƒÖg musi jednoznacznie zidentyfikowaƒá dysk VHD, kt√≥ry jest przechowywany w us≈Çudze Azure Storage.

#### <a name="managed-disks"></a><a name="c55b2c6e-3ca1-4476-be16-16c81927550f"></a>Dyski zarzƒÖdzane

Dyski zarzƒÖdzane to nowy typ zasobu w us≈Çudze Azure Resource Manager, kt√≥ry mo≈ºe byƒá u≈ºywany zamiast dysk√≥w wirtualnych przechowywanych na kontach us≈Çugi Azure Storage. Dyski zarzƒÖdzane automatycznie wyr√≥wnaƒá z zestawem dostƒôpno≈õci maszyny wirtualnej, kt√≥re sƒÖ do≈ÇƒÖczone do i w zwiƒÖzku z tym zwiƒôkszyƒá dostƒôpno≈õƒá maszyny wirtualnej i us≈Çug, kt√≥re sƒÖ uruchomione na maszynie wirtualnej. Aby uzyskaƒá wiƒôcej informacji, przeczytaj [artyku≈Ç .](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview)

Zaleca siƒô u≈ºywanie dysku zarzƒÖdzanego, poniewa≈º upraszczajƒÖ one wdra≈ºanie maszyn wirtualnych i zarzƒÖdzanie nimi.
Sap obecnie obs≈Çuguje tylko dyski zarzƒÖdzane w wersji Premium. Aby uzyskaƒá wiƒôcej informacji, przeczytaj notatkƒô SAP [1928533].

#### <a name="microsoft-azure-storage-resiliency"></a>Odporno≈õƒá us≈Çugi Microsoft Azure Storage

Us≈Çuga Microsoft Azure Storage przechowuje podstawowy dysk VHD (z systemem operacyjnym) i do≈ÇƒÖczone dyski lub obiekty BLOB w co najmniej trzech oddzielnych wƒôz≈Çach magazynu. Fakt ten jest nazywany local redundant storage (LRS). LRS jest domy≈õlny dla wszystkich typ√≥w magazynu na platformie Azure. 

Istnieje kilka innych metod nadmiarowo≈õci, kt√≥re sƒÖ opisane w artykule [Replikacja us≈Çugi Azure Storage.](https://docs.microsoft.com/azure/storage/common/storage-redundancy?toc=%2fazure%2fstorage%2fqueues%2ftoc.json)

> [!NOTE]
>W przypadku us≈Çugi Azure Premium Storage, kt√≥ra jest zalecanym typem magazynu dla maszyn wirtualnych i dysk√≥w DBMS, kt√≥re przechowujƒÖ pliki bazy danych i log/redo, jedynƒÖ dostƒôpnƒÖ metodƒÖ jest LRS. W rezultacie nale≈ºy skonfigurowaƒá metody bazy danych, takie jak SQL Server Always On, Oracle Data Guard lub HANA System Replication, aby w≈ÇƒÖczyƒá replikacjƒô danych bazy danych do innego regionu platformy Azure lub innej strefy dostƒôpno≈õci platformy Azure.


> [!NOTE]
> W przypadku wdro≈ºe≈Ñ systemu dbms u≈ºycie magazynu geograficznie nadmiarowego dostƒôpnego w us≈Çudze Azure Standard Storage nie jest zalecane, poniewa≈º ma on du≈ºy wp≈Çyw na wydajno≈õƒá i nie jest honorowane w kolejno≈õci zapisu w r√≥≈ºnych dyskach wirtualnych, kt√≥re sƒÖ do≈ÇƒÖczone do maszyny Wirtualnej. Fakt nie honorowania kolejno≈õci zapisu w r√≥≈ºnych vhds nosi wysoki potencja≈Ç, aby sko≈Ñczyƒá w niesp√≥jnych baz danych po stronie docelowej replikacji, je≈õli bazy danych i log /redo pliki sƒÖ roz≈Ço≈ºone na wiele VHDs (jak g≈Ç√≥wnie w przypadku) po stronie ≈∫r√≥d≈Çowej maszyny Wirtualnej.


### <a name="microsoft-azure-networking"></a><a name="61678387-8868-435d-9f8c-450b2424f5bd"></a>Sieƒá Platformy Microsoft Azure

Platforma Microsoft Azure udostƒôpnia infrastrukturƒô sieciowƒÖ, kt√≥ra umo≈ºliwia mapowanie wszystkich scenariuszy, kt√≥re chcemy zrealizowaƒá za pomocƒÖ oprogramowania SAP. Mo≈ºliwo≈õci sƒÖ nastƒôpujƒÖce:

* Dostƒôp z zewnƒÖtrz, bezpo≈õrednio do maszyn wirtualnych za po≈õrednictwem us≈Çug terminalowych systemu Windows lub ssh/VNC
* Dostƒôp do us≈Çug i okre≈õlonych port√≥w u≈ºywanych przez aplikacje na maszynach wirtualnych
* Wewnƒôtrzna komunikacja i rozpoznawanie nazw miƒôdzy grupƒÖ maszyn wirtualnych wdro≈ºonych jako maszyny wirtualne platformy Azure
* ≈ÅƒÖczno≈õƒá miƒôdzy lokalizacjami miƒôdzy sieciƒÖ lokalnƒÖ klienta a sieciƒÖ platformy Azure
* ≈ÅƒÖczno≈õƒá miƒôdzy regionem platformy Azure lub centrum danych miƒôdzy lokacjami platformy Azure

Wiƒôcej informacji mo≈ºna znale≈∫ƒá tutaj: <https://azure.microsoft.com/documentation/services/virtual-network/>

Istnieje wiele r√≥≈ºnych mo≈ºliwo≈õci konfigurowania nazwy i rozpoznawania adres√≥w IP na platformie Azure. Istnieje r√≥wnie≈º us≈Çuga DNS platformy Azure, kt√≥ra mo≈ºe byƒá u≈ºywana zamiast konfigurowania w≈Çasnego serwera DNS. Wiƒôcej informacji mo≈ºna znale≈∫ƒá w [tym artykule][virtual-networks-manage-dns-in-vnet] i na [tej stronie](https://azure.microsoft.com/services/dns/).

W przypadku scenariuszy miƒôdzylokacyjnych lub hybrydowych polegamy na tym, ≈ºe lokalna us≈Çuga AD/OpenLDAP/DNS zosta≈Ça rozszerzona za po≈õrednictwem sieci VPN lub po≈ÇƒÖczenia prywatnego z platformƒÖ Azure. W przypadku niekt√≥rych scenariuszy, zgodnie z tym opisem, mo≈ºe byƒá konieczne zainstalowanie repliki us≈Çugi AD/OpenLDAP na platformie Azure.

Poniewa≈º rozpoznawanie sieci i nazw jest istotnƒÖ czƒô≈õciƒÖ wdra≈ºania bazy danych dla systemu SAP, ta koncepcja zosta≈Ça om√≥wiona bardziej szczeg√≥≈Çowo w [Przewodniku wdra≈ºania systemu DBMS][dbms-guide].

##### <a name="azure-virtual-networks"></a>Sieci wirtualne platformy Azure

TworzƒÖc sieƒá wirtualnƒÖ platformy Azure, mo≈ºna zdefiniowaƒá zakres adres√≥w prywatnych adres√≥w IP przydzielonych przez funkcjƒô us≈Çugi Azure DHCP. W scenariuszach miƒôdzylokacjowych zdefiniowany zakres adres√≥w IP jest nadal przydzielany przy u≈ºyciu us≈Çugi DHCP przez platformƒô Azure. Jednak rozpoznawanie nazwy domeny odbywa siƒô lokalnie (przy za≈Ço≈ºeniu, ≈ºe maszyny wirtualne sƒÖ czƒô≈õciƒÖ domeny lokalnej) i w zwiƒÖzku z tym mo≈ºna rozwiƒÖzaƒá adresy poza r√≥≈ºnymi us≈Çugami w chmurze azure.

Ka≈ºda maszyna wirtualna na platformie Azure musi byƒá po≈ÇƒÖczona z sieciƒÖ wirtualnƒÖ.

Wiƒôcej szczeg√≥≈Ç√≥w mo≈ºna znale≈∫ƒá w [tym artykule][resource-groups-networking] i na [tej stronie](https://azure.microsoft.com/documentation/services/virtual-network/).


> [!NOTE]
> Domy≈õlnie po wdro≈ºeniu maszyny Wirtualnej nie mo≈ºna zmieniƒá konfiguracji sieci wirtualnej. Ustawienia protoko≈Çu TCP/IP nale≈ºy pozostawiƒá serwerowi DHCP platformy Azure. Domy≈õlnym zachowaniem jest dynamiczne przypisywanie adres√≥w IP.
>
>

Adres MAC wirtualnej karty sieciowej mo≈ºe ulec zmianie, na przyk≈Çad po zmianie rozmiaru, a system operacyjny windows lub linux go≈õcia odbiera nowƒÖ kartƒô sieciowƒÖ i automatycznie u≈ºywa dhcp do przypisywania adres√≥w IP i DNS w tym przypadku.

##### <a name="static-ip-assignment"></a>Statyczne przypisanie adresu IP
Istnieje mo≈ºliwo≈õƒá przypisania sta≈Çych lub zastrze≈ºonych adres√≥w IP do maszyn wirtualnych w ramach sieci wirtualnej platformy Azure. Uruchamianie maszyn wirtualnych w sieci wirtualnej platformy Azure otwiera wielkƒÖ mo≈ºliwo≈õƒá wykorzystania tej funkcji, je≈õli jest to konieczne lub wymagane w niekt√≥rych scenariuszach. Przypisanie IP pozostaje wa≈ºne przez ca≈Çy okres istnienia maszyny Wirtualnej, niezale≈ºnie od tego, czy maszyna wirtualna jest uruchomiona, czy zamykana. W zwiƒÖzku z tym nale≈ºy wziƒÖƒá pod uwagƒô og√≥lnƒÖ liczbƒô maszyn wirtualnych (uruchomionych i zatrzymanych maszyn wirtualnych) podczas definiowania zakresu adres√≥w IP dla sieci wirtualnej. Adres IP pozostaje przypisany do momentu usuniƒôcia maszyny Wirtualnej i jej interfejsu sieciowego lub do momentu ponownego przypisania adresu IP. Aby uzyskaƒá wiƒôcej informacji, przeczytaj [ten artyku≈Ç][virtual-networks-static-private-ip-arm-pportal].

> [!NOTE]
> Nale≈ºy przypisaƒá statyczne adresy IP za po≈õrednictwem platformy Azure oznacza do poszczeg√≥lnych vNICs. Nie nale≈ºy przypisywaƒá statycznych adres√≥w IP w ramach systemu operacyjnego go≈õcia do vNIC. Niekt√≥re us≈Çugi platformy Azure, takie jak us≈Çuga Azure Backup Service, opierajƒÖ siƒô na tym, ≈ºe co najmniej podstawowa us≈Çuga vNIC jest ustawiona na us≈Çugƒô DHCP, a nie na statyczne adresy IP. Zobacz te≈º dokument [RozwiƒÖzywanie problem√≥w z tworzeniem kopii zapasowej maszyny wirtualnej platformy Azure](https://docs.microsoft.com/azure/backup/backup-azure-vms-troubleshoot#networking).
>
>

##### <a name="multiple-nics-per-vm"></a>Wiele kart sieciowych na maszynƒô wirtualnƒÖ

Mo≈ºna zdefiniowaƒá wiele kart interfejsu sieci wirtualnej (vNIC) dla maszyny wirtualnej platformy Azure. Dziƒôki mo≈ºliwo≈õci wielu vNCS mo≈ºna rozpoczƒÖƒá konfigurowanie separacji ruchu sieciowego, gdzie, na przyk≈Çad, ruch klienta jest kierowany przez jeden vNIC i backend ruchu jest kierowane przez drugi vNIC. W zale≈ºno≈õci od typu maszyny Wirtualnej istniejƒÖ r√≥≈ºne ograniczenia dotyczƒÖce liczby maszyn wirtualnych, kt√≥re maszyna wirtualna mo≈ºe byƒá przypisana. Dok≈Çadne szczeg√≥≈Çy, funkcjonalno≈õƒá i ograniczenia mo≈ºna znale≈∫ƒá w nastƒôpujƒÖcych artyku≈Çach:

* [Tworzenie maszyny Wirtualnej systemu Windows z wieloma kartami sieciowymi][virtual-networks-multiple-nics-windows]
* [Tworzenie maszyny wirtualnej z systemem Linux z wieloma kartami sieciowym][virtual-networks-multiple-nics-linux]
* [Wdra≈ºanie maszyn wirtualnych z wieloma kartami sieciowymi przy u≈ºyciu szablonu][virtual-network-deploy-multinic-arm-template]
* [Wdra≈ºanie wielu maszyn wirtualnych kart sieciowych przy u≈ºyciu programu PowerShell][virtual-network-deploy-multinic-arm-ps]
* [Wdra≈ºanie wielu maszyn wirtualnych kart sieciowych przy u≈ºyciu interfejsu wiersza polecenia platformy Azure][virtual-network-deploy-multinic-arm-cli]

#### <a name="site-to-site-connectivity"></a>≈ÅƒÖczno≈õƒá miƒôdzy lokacjami

Miƒôdzy ≈õrodowiskiem lokalnym sƒÖ maszyny wirtualne platformy Azure i lokalne po≈ÇƒÖczenia po≈ÇƒÖczone z przezroczystym i sta≈Çym po≈ÇƒÖczeniem sieci VPN. Oczekuje siƒô, ≈ºe stanie siƒô najbardziej typowym wzorcem wdra≈ºania SAP na platformie Azure. Za≈Ço≈ºenie jest takie, ≈ºe procedury operacyjne i procesy z wystƒÖpieniami SAP na platformie Azure powinny dzia≈Çaƒá w spos√≥b przejrzysty. Oznacza to, ≈ºe powiniene≈õ byƒá w stanie wydrukowaƒá z tych system√≥w, a tak≈ºe u≈ºyƒá SAP Transport Management System (TMS) do transportu zmian z systemu deweloperskiego na platformie Azure do systemu testowego, kt√≥ry jest wdra≈ºany lokalnie. Wiƒôcej dokumentacji dotyczƒÖcej witryny na miejscu mo≈ºna znale≈∫ƒá w [tym artykule][vpn-gateway-create-site-to-site-rm-powershell]

##### <a name="vpn-tunnel-device"></a>UrzƒÖdzenie tunelu VPN

Aby utworzyƒá po≈ÇƒÖczenie lokacja-lokacja (lokalne centrum danych z centrum danych platformy Azure), nale≈ºy uzyskaƒá i skonfigurowaƒá urzƒÖdzenie sieci VPN lub u≈ºyƒá us≈Çugi Routing i dostƒôp zdalny (RRAS), kt√≥ra zosta≈Ça wprowadzona jako sk≈Çadnik oprogramowania z systemem Windows Server 2012.

* [Tworzenie sieci wirtualnej z po≈ÇƒÖczeniem sieci VPN typu lokacja-lokacja przy u≈ºyciu programu PowerShell][vpn-gateway-create-site-to-site-rm-powershell]
* [Informacje o urzƒÖdzeniach sieci VPN u≈ºywanych na potrzeby po≈ÇƒÖcze≈Ñ bramy VPN typu lokacja-lokacja][vpn-gateway-about-vpn-devices]
* [Brama sieci VPN ‚Äî czƒôsto zadawane pytania][vpn-gateway-vpn-faq]

![Po≈ÇƒÖczenie lokacja-lokacja miƒôdzy ≈õrodowisku lokalnym a platformƒÖ Azure][planning-guide-figure-600]

Rysunek powy≈ºej przedstawia dwie subskrypcje platformy Azure majƒÖ podrangi adres√≥w IP zarezerwowane do u≈ºycia w sieciach wirtualnych na platformie Azure. ≈ÅƒÖczno≈õƒá z sieci lokalnej z platformƒÖ Azure jest ustanawiana za po≈õrednictwem sieci VPN.

#### <a name="point-to-site-vpn"></a>Sieƒá VPN typu punkt-lokacja

Sieƒá VPN typu punkt-lokacja wymaga, aby ka≈ºdy komputer kliencki ≈ÇƒÖczy≈Ç siƒô z w≈ÇasnƒÖ sieciƒÖ VPN na platformie Azure. W przypadku scenariuszy SAP analizujemy, ≈ÇƒÖczno≈õƒá z punktami lokacji nie jest praktyczna. W zwiƒÖzku z tym nie dalsze odwo≈Çania sƒÖ podane do ≈ÇƒÖczno≈õci sieci VPN typu punkt-lokacja.

Wiƒôcej informacji mo≈ºna znale≈∫ƒá tutaj
* [Konfigurowanie po≈ÇƒÖczenia typu "wska≈º lokacja" z sieciƒÖ wirtualnƒÖ przy u≈ºyciu portalu Azure](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal)
* [Konfigurowanie po≈ÇƒÖczenia typu punkt-lokacja z sieciƒÖ wirtualnƒÖ przy u≈ºyciu programu PowerShell](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-rm-ps)

#### <a name="multi-site-vpn"></a>Sieƒá VPN dla wielu lokacji

Platforma Azure oferuje r√≥wnie≈º obecnie mo≈ºliwo≈õƒá tworzenia ≈ÇƒÖczno≈õci sieci VPN z wieloma lokacjami dla jednej subskrypcji platformy Azure. Wcze≈õniej pojedyncza subskrypcja by≈Ça ograniczona do jednego po≈ÇƒÖczenia sieci VPN lokacja-lokacja. To ograniczenie znik≈Ço z wieloumiejecowymi po≈ÇƒÖczeniami VPN dla jednej subskrypcji. Dziƒôki temu mo≈ºna wykorzystaƒá wiƒôcej ni≈º jeden region platformy Azure dla okre≈õlonej subskrypcji za po≈õrednictwem konfiguracji miƒôdzy lokalniem.

Aby uzyskaƒá wiƒôcej dokumentacji, zobacz [ten artyku≈Ç][vpn-gateway-create-site-to-site-rm-powershell]

#### <a name="vnet-to-vnet-connection"></a>Po≈ÇƒÖczenie sieci wirtualnej z sieciƒÖ wirtualnƒÖ

KorzystajƒÖc z sieci VPN z wieloma lokacjami, nale≈ºy skonfigurowaƒá oddzielnƒÖ sieƒá wirtualnƒÖ platformy Azure w ka≈ºdym z region√≥w. Jednak czƒôsto istnieje wym√≥g, ≈ºe sk≈Çadniki oprogramowania w r√≥≈ºnych regionach powinny komunikowaƒá siƒô ze sobƒÖ. W idealnym przypadku ta komunikacja nie powinna byƒá kierowana z jednego regionu platformy Azure do lokalnego i stamtƒÖd do innego regionu platformy Azure. Aby przej≈õƒá na skr√≥ty, platforma Azure oferuje mo≈ºliwo≈õƒá skonfigurowania po≈ÇƒÖczenia z jednej sieci wirtualnej platformy Azure w jednym regionie do innej sieci wirtualnej platformy Azure hostowanej w innym regionie. Ta funkcja jest nazywana po≈ÇƒÖczeniem sieci wirtualnej z sieciƒÖ wirtualnƒÖ. Wiƒôcej informacji na temat tej funkcji <https://azure.microsoft.com/documentation/articles/vpn-gateway-vnet-vnet-rm-ps/>mo≈ºna znale≈∫ƒá tutaj: .

#### <a name="private-connection-to-azure-expressroute"></a>Prywatne po≈ÇƒÖczenie z us≈ÇugƒÖ Azure ExpressRoute

Us≈Çuga Microsoft Azure ExpressRoute umo≈ºliwia tworzenie po≈ÇƒÖcze≈Ñ prywatnych miƒôdzy centrami danych platformy Azure a infrastrukturƒÖ lokalnƒÖ klienta lub w ≈õrodowisku kolokacji. Us≈Çuga ExpressRoute jest oferowana przez r√≥≈ºnych dostawc√≥w sieci VPN (mpls (prze≈ÇƒÖczane pakietami) lub innych dostawc√≥w us≈Çug sieciowych. Po≈ÇƒÖczenia ExpressRoute nie odbywajƒÖ siƒô za po≈õrednictwem publicznego Internetu. Po≈ÇƒÖczenia us≈Çugi ExpressRoute zapewniajƒÖ wiƒôksze bezpiecze≈Ñstwo, wiƒôkszƒÖ niezawodno≈õƒá dziƒôki wielu obwodom r√≥wnoleg≈Çym, szybsze prƒôdko≈õci i mniejsze op√≥≈∫nienia ni≈º typowe po≈ÇƒÖczenia przez Internet.

Wiƒôcej informacji na temat us≈Çugi Azure ExpressRoute i ofert mo≈ºna znale≈∫ƒá tutaj:

* <https://azure.microsoft.com/documentation/services/expressroute/>
* <https://azure.microsoft.com/pricing/details/expressroute/>
* <https://azure.microsoft.com/documentation/articles/expressroute-faqs/>

Us≈Çuga Express Route umo≈ºliwia wiele subskrypcji platformy Azure za po≈õrednictwem jednego obwodu us≈Çugi ExpressRoute, zgodnie z dokumentem w tym miejscu

* <https://azure.microsoft.com/documentation/articles/expressroute-howto-linkvnet-arm/>
* <https://azure.microsoft.com/documentation/articles/expressroute-howto-circuit-arm/>

#### <a name="forced-tunneling-in-case-of-cross-premises"></a>Wymuszone tunelowanie w przypadku pomieszcze≈Ñ poprzecznym
W przypadku maszyn wirtualnych do≈ÇƒÖczajƒÖcych do domen lokalnych za po≈õrednictwem lokacji do lokacji, punktu do lokacji lub us≈Çugi ExpressRoute nale≈ºy siƒô upewniƒá, ≈ºe ustawienia internetowego serwera proxy sƒÖ wdra≈ºane r√≥wnie≈º dla wszystkich u≈ºytkownik√≥w tych maszyn wirtualnych. Domy≈õlnie oprogramowanie uruchomione na tych maszynach wirtualnych lub u≈ºytkownik√≥w korzystajƒÖcych z przeglƒÖdarki w celu uzyskania dostƒôpu do Internetu nie przechodzi≈Çoby przez firmowy serwer proxy, ale ≈ÇƒÖczy≈Çoby siƒô bezpo≈õrednio za po≈õrednictwem platformy Azure z Internetem. Ale nawet ustawienie proxy nie jest 100% rozwiƒÖzaniem do kierowania ruchem przez pe≈Çnomocnika firmy, poniewa≈º jest odpowiedzialny za oprogramowanie i us≈Çugi, aby sprawdziƒá, czy serwer proxy. Je≈õli oprogramowanie uruchomione na maszynie wirtualnej nie robi tego lub administrator manipuluje ustawieniami, ruch do Internetu mo≈ºe byƒá ponownie objazdem bezpo≈õrednio za po≈õrednictwem platformy Azure do Internetu.

Aby uniknƒÖƒá takiej bezpo≈õredniej ≈ÇƒÖczno≈õci z Internetem, mo≈ºna skonfigurowaƒá tunelowanie wymuszone za pomocƒÖ po≈ÇƒÖczenia lokacja lokacja lokacja miƒôdzy ≈õrodowiskiem lokalnym a platformƒÖ Azure. Szczeg√≥≈Çowy opis funkcji tunelowania wymuszonego zosta≈Ç opublikowany tutaj<https://azure.microsoft.com/documentation/articles/vpn-gateway-forced-tunneling-rm/>

Wymuszone tunelowanie za pomocƒÖ us≈Çugi ExpressRoute jest w≈ÇƒÖczane przez klient√≥w reklamujƒÖcych trasƒô domy≈õlnƒÖ za po≈õrednictwem sesji komunikacji r√≥wnorzƒôdnej Us≈Çugi ExpressRoute BGP.

#### <a name="summary-of-azure-networking"></a>Podsumowanie sieci platformy Azure

Ten rozdzia≈Ç zawiera≈Ç wiele wa≈ºnych kwestii dotyczƒÖcych us≈Çugi Azure Networking. Oto podsumowanie g≈Ç√≥wnych punkt√≥w:

* Us≈Çugi Azure Virtual Networks umo≈ºliwiajƒÖ umieszczenie struktury sieciowej w us≈Çudze Azure. Sieci wirtualne mogƒÖ byƒá izolowane wzglƒôdem siebie lub za pomocƒÖ sieciowych grup zabezpiecze≈Ñ ruch miƒôdzy sieciami wirtualnymi mo≈ºe byƒá kontrolowany.
* Sieci wirtualne platformy Azure mogƒÖ byƒá wykorzystywane do przypisywania zakres√≥w adres√≥w IP do maszyn wirtualnych lub przypisywania sta≈Çych adres√≥w IP do maszyn wirtualnych
* Aby skonfigurowaƒá po≈ÇƒÖczenie lokacja-lokacja lub punkt-lokacja, musisz najpierw utworzyƒá sieƒá wirtualnƒÖ platformy Azure
* Po wdro≈ºeniu maszyny wirtualnej nie mo≈ºna ju≈º zmieniƒá sieci wirtualnej przypisanej do maszyny wirtualnej

### <a name="quotas-in-azure-virtual-machine-services"></a>Przydzia≈Çy w us≈Çugach maszyny wirtualnej platformy Azure
Musimy byƒá jasne o tym, ≈ºe infrastruktura magazynu i sieci jest wsp√≥≈Çu≈ºytkowana przez maszyny wirtualne z r√≥≈ºnymi us≈Çugami w infrastrukturze platformy Azure. I podobnie jak w centrach danych klienta, nadmierne aprowizacji niekt√≥rych zasob√≥w infrastruktury odbywa siƒô do pewnego stopnia. Platforma Microsoft Azure u≈ºywa przydzia≈Ç√≥w dysk√≥w, procesor√≥w, sieci i innych w celu ograniczenia zu≈ºycia zasob√≥w oraz zachowania sp√≥jnej i deterministycznej wydajno≈õci.  R√≥≈ºne typy maszyn wirtualnych (A5, A6 itp.) majƒÖ r√≥≈ºne przydzia≈Çy dla liczby dysk√≥w, procesora, pamiƒôci RAM i sieci.

> [!NOTE]
> Zasoby procesora CPU i pamiƒôci typ√≥w maszyn wirtualnych obs≈Çugiwanych przez sap sƒÖ wstƒôpnie przydzielane w wƒôz≈Çach hosta. Oznacza to, ≈ºe po wdro≈ºeniu maszyny Wirtualnej zasoby na ho≈õcie sƒÖ dostƒôpne zgodnie z definicjƒÖ typu maszyny Wirtualnej.
>
>

Podczas planowania i dokonywaƒá rozmiaru sap na rozwiƒÖzania platformy Azure, przydzia≈Çy dla ka≈ºdego rozmiaru maszyny wirtualnej muszƒÖ byƒá brane pod uwagƒô. Przydzia≈Çy maszyn wirtualnych sƒÖ opisane [tutaj (Linux)][virtual-machines-sizes-linux] i [tutaj (Windows)][virtual-machines-sizes-windows].

Opisane przydzia≈Çy reprezentujƒÖ teoretyczne warto≈õci maksymalne.  Limit we/wy na dysk mo≈ºna osiƒÖgnƒÖƒá za pomocƒÖ ma≈Çych ios (8kb), ale prawdopodobnie nie mo≈ºna osiƒÖgnƒÖƒá z du≈ºych IOs (1Mb).  Limit we/wyciƒÖgniƒôty jest wymuszany na ziarnisto≈õƒá pojedynczego dysku.

Jako drzewo decyzji szorstka, aby zdecydowaƒá, czy system SAP pasuje do us≈Çug maszyny wirtualnej platformy Azure i jego mo≈ºliwo≈õci lub czy istniejƒÖcy system musi byƒá skonfigurowany inaczej w celu wdro≈ºenia systemu na platformie Azure, poni≈ºszego drzewa decyzyjnego mo≈ºna u≈ºyƒá:

![Drzewo decyzji, aby zdecydowaƒá o mo≈ºliwo≈õci wdro≈ºenia sap na platformie Azure][planning-guide-figure-700]

**Krok 1:** Najwa≈ºniejszƒÖ informacjƒÖ na poczƒÖtek jest wym√≥g SAPS dla danego systemu SAP. Wymagania SAPS muszƒÖ byƒá oddzielone na czƒô≈õƒá DBMS i czƒô≈õƒá aplikacji SAP, nawet je≈õli system SAP jest ju≈º wdro≈ºony lokalnie w konfiguracji 2-warstwowej. W przypadku istniejƒÖcych system√≥w SAPS zwiƒÖzany z u≈ºywanym sprzƒôtem czƒôsto mo≈ºna okre≈õliƒá lub oszacowaƒá na podstawie istniejƒÖcych test√≥w por√≥wnawczych SAP. Wyniki mo≈ºna znale≈∫ƒá tutaj: <https://sap.com/about/benchmark.html>.
W przypadku nowo wdro≈ºonych system√≥w SAP nale≈ºy przej≈õƒá przez ƒáwiczenie zmiany rozmiaru, kt√≥re powinno okre≈õlaƒá wymagania SAPS systemu.
Zobacz te≈º ten blog i za≈ÇƒÖczony dokument dotyczƒÖcy rozmiaru sap na platformie Azure:<https://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx>

**Krok 2:** W przypadku istniejƒÖcych system√≥w nale≈ºy zmierzyƒá wolumin we/wy i operacje we/wy na sekundƒô na serwerze DBMS. W przypadku nowo planowanych system√≥w, zmiany rozmiaru dla nowego systemu powinny r√≥wnie≈º daƒá przybli≈ºone pomys≈Çy wymaga≈Ñ we/wy po stronie dbms. Je≈õli nie masz pewno≈õci, w ko≈Ñcu musisz przeprowadziƒá dow√≥d koncepcji.

**Krok 3:** Por√≥wnaj wymagania SAPS dla serwera DBMS z SAPS r√≥≈ºnych typ√≥w maszyn wirtualnych platformy Azure mo≈ºe zapewniƒá. Informacje o SAPS r√≥≈ºnych typ√≥w maszyn wirtualnych platformy Azure sƒÖ udokumentowane w SAP Note [1928533]. Nale≈ºy skupiƒá siƒô na maszynie wirtualnej DBMS pierwszy, poniewa≈º warstwa bazy danych jest warstwƒÖ w systemie SAP NetWeaver, kt√≥ry nie jest skalowany w poziomie w wiƒôkszo≈õci wdro≈ºe≈Ñ. Z drugiej strony warstwƒô aplikacji SAP mo≈ºna skalowaƒá w poziomie. Je≈õli ≈ºaden z typ√≥w maszyn wirtualnych platformy Azure obs≈Çugiwanych przez us≈Çugƒô SAP nie mo≈ºe dostarczyƒá wymaganego systemu SAPS, nie mo≈ºna uruchomiƒá obciƒÖ≈ºenia planowanego systemu SAP na platformie Azure. Nale≈ºy wdro≈ºyƒá system lokalnie lub trzeba zmieniƒá wolumin obciƒÖ≈ºenia dla systemu.

**Krok 4:** Zgodnie z opisanymi [tutaj (Linux)][virtual-machines-sizes-linux] i [tutaj (Windows)][virtual-machines-sizes-windows]Platforma Azure wymusza przydzia≈Ç we/wydzia≈Çu We/Wy na dysk niezale≈ºnie od tego, czy u≈ºywasz magazynu standardowego, czy magazynu w wersji Premium. W zale≈ºno≈õci od typu maszyny Wirtualnej liczba dysk√≥w z danymi, kt√≥re mogƒÖ byƒá montowane, jest r√≥≈ºna. W rezultacie mo≈ºna obliczyƒá maksymalnƒÖ liczbƒô we/wy, kt√≥rƒÖ mo≈ºna osiƒÖgnƒÖƒá z ka≈ºdym z r√≥≈ºnych typ√≥w maszyn wirtualnych. W zale≈ºno≈õci od uk≈Çadu pliku bazy danych mo≈ºna rozbieraƒá dyski, aby sta≈Çy siƒô jednym woluminem w systemie operacyjnym go≈õcia. Je≈õli jednak bie≈ºƒÖcy wolumin we/wy wdro≈ºonego systemu SAP przekracza obliczone limity najwiƒôkszego typu maszyny Wirtualnej platformy Azure i je≈õli nie ma szans na zrekompensowanie wiƒôkszej ilo≈õci pamiƒôci, obciƒÖ≈ºenie systemu SAP mo≈ºe mieƒá powa≈ºny wp≈Çyw. W takich przypadkach mo≈ºna trafiƒá punkt, w kt√≥rym nie nale≈ºy wdra≈ºaƒá systemu na platformie Azure.

**Krok 5:** Szczeg√≥lnie w systemach SAP, kt√≥re sƒÖ wdra≈ºane lokalnie w konfiguracjach 2-warstwowych, istnieje prawdopodobie≈Ñstwo, ≈ºe system mo≈ºe wymagaƒá skonfigurowania na platformie Azure w konfiguracji 3-warstwowej. W tym kroku nale≈ºy sprawdziƒá, czy istnieje sk≈Çadnik w warstwie aplikacji SAP, kt√≥ry nie mo≈ºe byƒá skalowany w poziomie i kt√≥ry nie pasuje do zasob√≥w procesora CPU i pamiƒôci r√≥≈ºnych typ√≥w maszyn wirtualnych platformy Azure. Je≈õli rzeczywi≈õcie istnieje taki sk≈Çadnik, systemu SAP i jego obciƒÖ≈ºenia nie mo≈ºna wdro≈ºyƒá na platformie Azure. Ale je≈õli mo≈ºna skalowaƒá w poziomie sk≈Çadnik√≥w aplikacji SAP do wielu maszyn wirtualnych platformy Azure, system mo≈ºna wdro≈ºyƒá na platformie Azure.

**Krok 6:** Je≈õli sk≈Çadniki warstwy aplikacji DBMS i SAP mo≈ºna uruchomiƒá na maszynach wirtualnych platformy Azure, konfiguracja musi zostaƒá zdefiniowana w odniesieniu do:

* Liczba maszyn wirtualnych platformy Azure
* Typy maszyn wirtualnych dla poszczeg√≥lnych komponent√≥w
* Liczba vhd√≥w w maszynie wirtualnej DBMS w celu zapewnienia wystarczajƒÖcej liczby IOPS

## <a name="managing-azure-assets"></a>ZarzƒÖdzanie zasobami platformy Azure

### <a name="azure-portal"></a>Portal Azure

Portal Azure jest jednym z trzech interfejs√≥w do zarzƒÖdzania wdro≈ºeniami maszyn wirtualnych platformy Azure. Podstawowe zadania zarzƒÖdzania, takie jak wdra≈ºanie maszyn wirtualnych z obraz√≥w, mo≈ºna wykonaƒá za po≈õrednictwem witryny Azure portal. Ponadto tworzenie kont magazynu, sieci wirtualnych i innych sk≈Çadnik√≥w platformy Azure sƒÖ r√≥wnie≈º zadaniami, kt√≥re witryna Azure portal mo≈ºe dobrze obs≈Çugiwaƒá. Jednak funkcje, takie jak przekazywanie dysk√≥w VHD z lokalnego ≈õrodowiska na platformƒô Azure lub kopiowanie dysku VHD na platformie Azure to zadania, kt√≥re wymagajƒÖ narzƒôdzi innych firm lub administrowania za po≈õrednictwem programu PowerShell lub interfejsu wiersza polecenia.

![Witryna portalu Microsoft Azure ‚Äî om√≥wienie maszyny wirtualnej][planning-guide-figure-800]


Zadania administracyjne i konfiguracyjne dla wystƒÖpienia maszyny wirtualnej sƒÖ mo≈ºliwe z poziomu witryny Azure portal.

Opr√≥cz ponownego uruchamiania i zamykania maszyny wirtualnej mo≈ºna r√≥wnie≈º do≈ÇƒÖczyƒá, od≈ÇƒÖczyƒá i utworzyƒá dyski danych dla wystƒÖpienia maszyny wirtualnej, aby przechwyciƒá wystƒÖpienie przygotowania obrazu i skonfigurowaƒá rozmiar wystƒÖpienia maszyny wirtualnej.

Portal Azure zawiera podstawowe funkcje wdra≈ºania i konfigurowania maszyn wirtualnych i wielu innych us≈Çug platformy Azure. Jednak nie wszystkie dostƒôpne funkcje sƒÖ objƒôte witryny Azure portal. W witrynie Azure portal nie mo≈ºna wykonywaƒá takich zada≈Ñ, jak:

* Przekazywanie identyfikator√≥w VHD na platformƒô Azure
* Kopiowanie maszyn wirtualnych


### <a name="management-via-microsoft-azure-powershell-cmdlets"></a>ZarzƒÖdzanie za pomocƒÖ polece≈Ñ cmdlet programu Microsoft Azure PowerShell

Program Windows PowerShell to zaawansowana i rozszerzalna struktura, kt√≥ra zosta≈Ça szeroko przyjƒôta przez klient√≥w wdra≈ºajƒÖcych wiƒôkszƒÖ liczbƒô system√≥w na platformie Azure. Po zainstalowaniu polece≈Ñ cmdlet programu PowerShell na komputerze stacjonarnym, laptopie lub dedykowanej stacji zarzƒÖdzania polecenia cmdlet programu PowerShell mo≈ºna uruchamiaƒá zdalnie.

Proces w≈ÇƒÖczania lokalnego komputera stacjonarnego/przeno≈õnego do korzystania z polece≈Ñ cmdlet programu Azure PowerShell i sposobu konfigurowania tych dla u≈ºycia z subskrypcjami platformy Azure opisano w [tym artykule][powershell-install-configure].

Bardziej szczeg√≥≈Çowe kroki dotyczƒÖce instalowania, aktualizowania i konfigurowania polece≈Ñ cmdlet programu Azure PowerShell mo≈ºna r√≥wnie≈º znale≈∫ƒá w [tym rozdziale Przewodnika po wdra≈ºaniu][deployment-guide-4.1].

Do≈õwiadczenie klienta do tej pory by≈Ço to, ≈ºe program PowerShell (PS) jest z pewno≈õciƒÖ bardziej zaawansowane narzƒôdzie do wdra≈ºania maszyn wirtualnych i tworzenia niestandardowych krok√≥w we wdra≈ºaniu maszyn wirtualnych. Wszyscy klienci korzystajƒÖcy z wystƒÖpie≈Ñ SAP na platformie Azure u≈ºywajƒÖ polece≈Ñ cmdlet PS w celu uzupe≈Çnienia zada≈Ñ zarzƒÖdzania wykonywanych w witrynie Azure portal lub nawet u≈ºywajƒÖ polece≈Ñ cmdlet PS wy≈ÇƒÖcznie do zarzƒÖdzania wdro≈ºeniami na platformie Azure. Poniewa≈º polecenia cmdlet specyficzne dla platformy Azure wsp√≥≈Çu≈ºytkujƒÖ tƒô samƒÖ konwencjƒô nazewnictwa co ponad 2000 polece≈Ñ cmdlet zwiƒÖzanych z systemem Windows, administratorzy systemu Windows mogƒÖ ≈Çatwo wykorzystaƒá te polecenia cmdlet.

Zobacz przyk≈Çad tutaj:<https://blogs.technet.com/b/keithmayer/archive/2015/07/07/18-steps-for-end-to-end-iaas-provisioning-in-the-cloud-with-azure-resource-manager-arm-powershell-and-desired-state-configuration-dsc.aspx>


Wdro≈ºenie rozszerzenia platformy Azure dla systemu SAP (zobacz rozdzia≈Ç [Rozszerzenie platformy Azure dla sap][planning-guide-9.1] w tym dokumencie) jest mo≈ºliwe tylko za po≈õrednictwem programu PowerShell lub interfejsu wiersza polecenia. W zwiƒÖzku z tym jest obowiƒÖzkowe, aby skonfigurowaƒá i skonfigurowaƒá program PowerShell lub interfejsu wiersza polecenia podczas wdra≈ºania lub administrowania systemu SAP NetWeaver na platformie Azure.  

Poniewa≈º platforma Azure zapewnia wiƒôcej funkcji, zostanƒÖ dodane nowe polecenia cmdlet PS, kt√≥re wymagajƒÖ aktualizacji polece≈Ñ cmdlet. W zwiƒÖzku z tym warto sprawdziƒá witryny pobierania <https://azure.microsoft.com/downloads/> platformy Azure co najmniej raz w miesiƒÖcu dla nowej wersji polece≈Ñ cmdlet. Nowa wersja jest zainstalowana na starszej wersji.

Aby uzyskaƒá og√≥lnƒÖ listƒô polece≈Ñ programu PowerShell zwiƒÖzanych z platformƒÖ Azure, sprawd≈∫ tutaj: <https://docs.microsoft.com/powershell/azure/overview>.

### <a name="management-via-microsoft-azure-cli-commands"></a>ZarzƒÖdzanie za pomocƒÖ polece≈Ñ interfejsu wiersza polecenia platformy Microsoft Azure

Dla klient√≥w, kt√≥rzy korzystajƒÖ z systemu Linux i chcƒÖ zarzƒÖdzaƒá zasobami platformy Azure Program PowerShell mo≈ºe nie byƒá opcjƒÖ. Firma Microsoft oferuje platformƒô Azure CLI jako alternatywƒô.
Narzƒôdzie interfejsu wiersza polecenia platformy Azure udostƒôpnia zestaw polece≈Ñ typu open source, miƒôdzyplatformowych do pracy z platformƒÖ Azure Platform. Narzƒôdzie wiersza polecenia platformy Azure zapewnia wiele z tych samych funkcji, kt√≥re mo≈ºna znale≈∫ƒá w witrynie Azure portal.

Aby uzyskaƒá informacje na temat instalacji, konfiguracji i u≈ºywania polece≈Ñ interfejsu wiersza polecenia do wykonywania zada≈Ñ platformy Azure, zobacz

* [Instalowanie klasycznego interfejsu wiersza polecenia platformy Azure][xplat-cli]
* [Wdra≈ºanie maszyn wirtualnych i zarzƒÖdzanie nimi przy u≈ºyciu szablon√≥w us≈Çugi Azure Resource Manager i interfejsu wiersza polecenia platformy Azure] [.. /.. /linux/create-ssh-secured-vm-from-template.md]
* [Korzystanie z klasycznego interfejsu wiersza polecenia platformy Azure dla komputer√≥w Mac, Linux i Windows w us≈Çudze Azure Resource Manager][xplat-cli-azure-resource-manager]

Przeczytaj tak≈ºe rozdzia≈Ç [Platformy Azure CLI dla maszyn wirtualnych z systemem Linux][deployment-guide-4.5.2] w [Przewodniku wdra≈ºania,][planning-guide] jak u≈ºywaƒá interfejsu wiersza polecenia platformy Azure do wdra≈ºania rozszerzenia azure dla sap.


## <a name="first-steps-planning-a-deployment"></a>Pierwsze kroki planowania wdro≈ºenia
Pierwszym krokiem w planowaniu wdra≈ºania nie jest sprawdzenie, czy maszyny wirtualne sƒÖ dostƒôpne do uruchomienia sap. Pierwszym krokiem mo≈ºe byƒá taki, kt√≥ry jest czasoch≈Çonne, ale najwa≈ºniejsze, jest do pracy z zespo≈Çami zgodno≈õci i zabezpiecze≈Ñ w firmie, na jakie warunki graniczne sƒÖ do wdra≈ºania, kt√≥ry typ obciƒÖ≈ºenia SAP lub proces biznesowy w chmurze publicznej. Je≈õli twoja firma wdro≈ºy≈Ça inne oprogramowanie przed platformƒÖ Azure, proces mo≈ºe byƒá ≈Çatwe. Je≈õli twoja firma jest bardziej na poczƒÖtku podr√≥≈ºy, mogƒÖ byƒá wiƒôksze dyskusje niezbƒôdne w celu ustalenia warunk√≥w brzegowych, warunk√≥w zabezpiecze≈Ñ, kt√≥re umo≈ºliwiajƒÖ hostowanie niekt√≥rych danych SAP i proces√≥w biznesowych SAP w chmurze publicznej.

Jako przydatnƒÖ pomoc mo≈ºna wskazaƒá [oferty firmy Microsoft dotyczƒÖce zgodno≈õci,](https://docs.microsoft.com/microsoft-365/compliance/offering-home) aby wy≈õwietliƒá listƒô ofert zgodno≈õci, kt√≥re firma Microsoft mo≈ºe dostarczyƒá. 

Inne obszary problem√≥w, takie jak szyfrowanie danych w spoczynku lub inne szyfrowanie w us≈Çudze platformy Azure, sƒÖ udokumentowane w [om√≥wienie szyfrowania platformy Azure.](https://docs.microsoft.com/azure/security/fundamentals/encryption-overview)

Nie lekcewa≈º tej fazy projektu w planowaniu. Tylko wtedy, gdy masz umowy i regu≈Çy wok√≥≈Ç tego tematu, nale≈ºy przej≈õƒá do nastƒôpnego kroku, kt√≥ry jest planowanie architektury sieci, kt√≥re mo≈ºna wdro≈ºyƒá na platformie Azure.


## <a name="different-ways-to-deploy-vms-for-sap-in-azure"></a>R√≥≈ºne sposoby wdra≈ºania maszyn wirtualnych dla sap na platformie Azure

W tym rozdziale dowiesz siƒô, jak wdro≈ºyƒá maszynƒô wirtualnƒÖ na platformie Azure. Dodatkowe procedury przygotowania, a tak≈ºe obs≈Çuga maszyn wirtualnych i maszyn wirtualnych na platformie Azure sƒÖ om√≥wione w tym rozdziale.

### <a name="deployment-of-vms-for-sap"></a>Wdra≈ºanie maszyn wirtualnych dla sap

Platforma Microsoft Azure oferuje wiele sposob√≥w wdra≈ºania maszyn wirtualnych i skojarzonych dysk√≥w. Dlatego wa≈ºne jest, aby zrozumieƒá r√≥≈ºnice, poniewa≈º przygotowania maszyn wirtualnych mogƒÖ siƒô r√≥≈ºniƒá w zale≈ºno≈õci od metody wdra≈ºania. Og√≥lnie rzecz biorƒÖc, przyjrzymy siƒô nastƒôpujƒÖcym scenariuszom:

#### <a name="moving-a-vm-from-on-premises-to-azure-with-a-non-generalized-disk"></a><a name="4d175f1b-7353-4137-9d2f-817683c26e53"></a>Przenoszenie maszyny Wirtualnej z lokalnego ≈õrodowiska na platformƒô Azure za pomocƒÖ dysku nieuog√≥lnionego

Planujesz przenie≈õƒá okre≈õlony system SAP z lokalnego na platformƒô Azure. Mo≈ºna to zrobiƒá, przekazujƒÖc dysk wirtualny, kt√≥ry zawiera system operacyjny, pliki binarne SAP i pliki binarne DBMS oraz vhds z plikami danych i dziennik√≥w systemu dbms na platformƒô Azure. W przeciwie≈Ñstwie do [scenariusza #2 poni≈ºej,][planning-guide-5.1.2]zachowaƒá hostname, SAP SID i SAP kont u≈ºytkownik√≥w w maszynie Wirtualnej platformy Azure, poniewa≈º zosta≈Çy one skonfigurowane w ≈õrodowisku lokalnym. W zwiƒÖzku z tym uog√≥lnienie obrazu nie jest konieczne. Zobacz rozdzia≈Çy [Przygotowanie do przenoszenia maszyny Wirtualnej z lokalnego na platformƒô Azure z nieog√≥lnionym dyskiem][planning-guide-5.2.1] tego dokumentu do lokalnych krok√≥w przygotowania i przekazywania nieog√≥lnionych maszyn wirtualnych lub wirtualnych na platformƒô Azure. Przeczytaj rozdzia≈Ç [Scenariusz 3: Przenoszenie maszyny Wirtualnej z lokalnego przy u≈ºyciu nieog√≥lnionego dysku wirtualnego platformy Azure z sap][deployment-guide-3.4] w [Przewodniku wdra≈ºania][deployment-guide] szczeg√≥≈Çowych krok√≥w wdra≈ºania takiego obrazu na platformie Azure.

#### <a name="deploying-a-vm-with-a-customer-specific-image"></a><a name="e18f7839-c0e2-4385-b1e6-4538453a285c"></a>Wdra≈ºanie maszyny Wirtualnej z obrazem specyficznym dla klienta

Ze wzglƒôdu na okre≈õlone wymagania dotyczƒÖce poprawek w wersji systemu operacyjnego lub dbms dostarczone obrazy w portalu Azure Marketplace mogƒÖ nie odpowiadaƒá Twoim potrzebom. W zwiƒÖzku z tym mo≈ºe byƒá konieczne utworzenie maszyny Wirtualnej przy u≈ºyciu w≈Çasnego prywatnego obrazu maszyny Wirtualnej systemu operacyjnego/DBMS, kt√≥ry mo≈ºna wdro≈ºyƒá kilka razy p√≥≈∫niej. Aby przygotowaƒá taki prywatny obraz do powielania, nale≈ºy wziƒÖƒá pod uwagƒô nastƒôpujƒÖce elementy:

---
> ![Windows][Logo_Windows] Windows
>
> Zobacz wiƒôcej szczeg√≥≈Ç√≥w <https://docs.microsoft.com/azure/virtual-machines/windows/upload-generalized-managed> tutaj: Ustawienia systemu Windows (takie jak identyfikator SID systemu Windows i nazwa hosta) muszƒÖ byƒá abstrakcyjne/uog√≥lnione na lokalnej maszynie wirtualnej za pomocƒÖ polecenia sysprep.
>
>
> ![Linux][Logo_Linux] Linux
>
> Wykonaj kroki opisane w tych artyku≈Çach dla [SUSE,][virtual-machines-linux-create-upload-vhd-suse] [Red Hat][virtual-machines-linux-redhat-create-upload-vhd]lub [Oracle Linux][virtual-machines-linux-create-upload-vhd-oracle], aby przygotowaƒá dysk VHD do przekazania na platformƒô Azure.
>
>

---
Je≈õli zawarto≈õƒá SAP zosta≈Ça ju≈º zainstalowana w lokalnej maszynie wirtualnej (szczeg√≥lnie w przypadku system√≥w 2-warstwowych), mo≈ºna dostosowaƒá ustawienia systemu SAP po wdro≈ºeniu maszyny Wirtualnej platformy Azure za pomocƒÖ procedury zmiany nazwy wystƒÖpienia obs≈Çugiwanej przez Mened≈ºera aprowizacji oprogramowania SAP (UWAGA SAP [1619720]). Zobacz rozdzia≈Çy [Przygotowanie do wdra≈ºania maszyny Wirtualnej z obrazem specyficznym dla klienta dla sap][planning-guide-5.2.2] i [przekazywanie dysku wirtualnego z lokalnego do platformy Azure][planning-guide-5.3.2] tego dokumentu dla lokalnych krok√≥w przygotowania i przekazywania uog√≥lnionej maszyny Wirtualnej na platformƒô Azure. Przeczytaj rozdzia≈Ç [Scenariusz 2: Wdra≈ºanie maszyny Wirtualnej z obrazem niestandardowym dla systemu SAP][deployment-guide-3.3] w [Przewodniku wdra≈ºania, aby][deployment-guide] uzyskaƒá szczeg√≥≈Çowe kroki wdra≈ºania takiego obrazu na platformie Azure.

#### <a name="deploying-a-vm-out-of-the-azure-marketplace"></a>Wdra≈ºanie maszyny wirtualnej z portalu Azure Marketplace

Chcesz u≈ºyƒá obrazu maszyny Wirtualnej dostarczonej przez firmƒô Microsoft lub innej firmy z portalu Azure Marketplace w celu wdro≈ºenia maszyny Wirtualnej. Po wdro≈ºeniu maszyny Wirtualnej na platformie Azure nale≈ºy postƒôpowaƒá zgodnie z tymi samymi wytycznymi i narzƒôdziami do instalowania oprogramowania SAP i/lub systemu dbms wewnƒÖtrz maszyny Wirtualnej, tak jak w ≈õrodowisku lokalnym. Aby uzyskaƒá bardziej szczeg√≥≈Çowy opis wdro≈ºenia, zobacz rozdzia≈Ç [1: Wdra≈ºanie maszyny wirtualnej z portalu Azure Marketplace dla sap][deployment-guide-3.2] w [Przewodniku wdra≈ºania][deployment-guide].

### <a name="preparing-vms-with-sap-for-azure"></a><a name="6ffb9f41-a292-40bf-9e70-8204448559e7"></a>Przygotowywanie maszyn wirtualnych za pomocƒÖ us≈Çugi SAP dla platformy Azure

Przed przekazaniem maszyn wirtualnych na platformƒô Azure nale≈ºy upewniƒá siƒô, ≈ºe maszyny wirtualne i wirtualne maszyny wirtualne spe≈ÇniajƒÖ okre≈õlone wymagania. IstniejƒÖ niewielkie r√≥≈ºnice w zale≈ºno≈õci od metody wdra≈ºania, kt√≥ra jest u≈ºywana.

#### <a name="preparation-for-moving-a-vm-from-on-premises-to-azure-with-a-non-generalized-disk"></a><a name="1b287330-944b-495d-9ea7-94b83aff73ef"></a>Przygotowanie do przenoszenia maszyny Wirtualnej z lokalnego ≈õrodowiska na platformƒô Azure za pomocƒÖ dysku nieog√≥lnionego

TypowƒÖ metodƒÖ wdra≈ºania jest przeniesienie istniejƒÖcej maszyny Wirtualnej, kt√≥ra uruchamia system SAP z lokalnego na platformƒô Azure. Ta maszyna wirtualna i system SAP na maszynie wirtualnej po prostu nale≈ºy uruchomiƒá na platformie Azure przy u≈ºyciu tej samej nazwy hosta i prawdopodobnie ten sam identyfikator SID SAP. W takim przypadku system operacyjny go≈õcia maszyny Wirtualnej nie powinny byƒá uog√≥lnione dla wielu wdro≈ºe≈Ñ. Je≈õli sieƒá lokalna zosta≈Ça rozszerzona na platformƒô Azure, nawet te same konta domeny mogƒÖ byƒá u≈ºywane w ramach maszyny Wirtualnej, poniewa≈º by≈Çy u≈ºywane przed lokalnymi.

Wymagania dotyczƒÖce przygotowywania w≈Çasnego dysku maszyn wirtualnych platformy Azure to:

* Pierwotnie VHD zawierajƒÖcy system operacyjny mo≈ºe mieƒá maksymalny rozmiar tylko 127GB. Ograniczenie to zosta≈Ço wyeliminowane pod koniec marca 2015 r. Teraz dysk VHD zawierajƒÖcy system operacyjny mo≈ºe mieƒá rozmiar do 1 TB, jak ka≈ºdy inny hostowany dysk VHD us≈Çugi Azure Storage.
* Musi byƒá w sta≈Çym formacie VHD. Dynamiczne dyski VHD lub VHD w formacie VHDx nie sƒÖ jeszcze obs≈Çugiwane na platformie Azure. Dynamiczne dyski VHD zostanƒÖ przekonwertowane na statyczne dyski VHD podczas przesy≈Çania vhd z poleceniami programu PowerShell lub cli
* VHDs, kt√≥re sƒÖ zainstalowane na maszynie Wirtualnej i powinny byƒá ponownie zamontowane na platformie Azure do maszyny Wirtualnej muszƒÖ byƒá w sta≈Çym formacie VHD, jak r√≥wnie≈º. Przeczytaj [ten artyku≈Ç (Linux)](../../linux/managed-disks-overview.md) i [ten artyku≈Ç (Windows)](../../windows/managed-disks-overview.md)dla limit√≥w rozmiaru dysk√≥w z danymi. Dynamiczne dyski VHD zostanƒÖ przekonwertowane na statyczne dyski VHD podczas przesy≈Çania vhd z poleceniami programu PowerShell lub cli
* Dodaj inne konto lokalne z uprawnieniami administratora, kt√≥re mo≈ºe byƒá u≈ºywane przez pomoc technicznƒÖ firmy Microsoft lub kt√≥re mo≈ºna przypisaƒá jako kontekst dla us≈Çug i aplikacji do uruchomienia, dop√≥ki maszyna wirtualna nie zostanie wdro≈ºona i bƒôdzie mo≈ºna u≈ºywaƒá bardziej odpowiednich u≈ºytkownik√≥w.
* Dodaj inne konta lokalne, poniewa≈º mogƒÖ byƒá potrzebne dla okre≈õlonego scenariusza wdra≈ºania.

---
> ![Windows][Logo_Windows] Windows
>
> W tym scenariuszu nie uog√≥lniania (sysprep) maszyny Wirtualnej jest wymagane do przekazywania i wdra≈ºania maszyny Wirtualnej na platformie Azure.
> Upewnij siƒô, ≈ºe dysk D:\ nie jest u≈ºywany.
> Ustaw automatyczne montowanie dysku dla do≈ÇƒÖczonych dysk√≥w zgodnie z opisem w rozdziale [Ustawianie autoinstalowania dla do≈ÇƒÖczonych dysk√≥w][planning-guide-5.5.3] w tym dokumencie.
>
> ![Linux][Logo_Linux] Linux
>
> W tym scenariuszu nie uog√≥lniania (waagent -deprovision) maszyny Wirtualnej jest wymagane do przekazywania i wdra≈ºania maszyny Wirtualnej na platformie Azure.
> Upewnij siƒô, ≈ºe /mnt/resource nie jest u≈ºywany i ≈ºe wszystkie dyski sƒÖ zainstalowane za po≈õrednictwem uuid. W przypadku dysku systemu operacyjnego upewnij siƒô, ≈ºe wpis bootloadera odzwierciedla r√≥wnie≈º instalacjƒô opartƒÖ na uuid.
>
>

---
#### <a name="preparation-for-deploying-a-vm-with-a-customer-specific-image-for-sap"></a><a name="57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3"></a>Przygotowanie do wdra≈ºania maszyny Wirtualnej z obrazem specyficznym dla klienta dla systemu SAP

Pliki VHD, kt√≥re zawierajƒÖ uog√≥lniony system operacyjny sƒÖ przechowywane w kontenerach na kontach us≈Çugi Azure Storage lub jako obrazy dysku zarzƒÖdzanego. NowƒÖ maszynƒô wirtualnƒÖ mo≈ºna wdro≈ºyƒá z takiego obrazu, odwo≈ÇujƒÖc siƒô do obrazu VHD lub Dysku zarzƒÖdzanego jako ≈∫r√≥d≈Ça w plikach szablon√≥w wdro≈ºenia, jak opisano w rozdziale [Scenariusz 2: Wdra≈ºanie maszyny Wirtualnej z obrazem niestandardowym dla sap][deployment-guide-3.3] [przewodnika wdra≈ºania][deployment-guide].

Wymagania dotyczƒÖce przygotowywania w≈Çasnego obrazu maszyny Wirtualnej platformy Azure to:

* Pierwotnie VHD zawierajƒÖcy system operacyjny mo≈ºe mieƒá maksymalny rozmiar tylko 127GB. Ograniczenie to zosta≈Ço wyeliminowane pod koniec marca 2015 r. Teraz dysk VHD zawierajƒÖcy system operacyjny mo≈ºe mieƒá rozmiar do 1 TB, jak ka≈ºdy inny hostowany dysk VHD us≈Çugi Azure Storage.
* Musi byƒá w sta≈Çym formacie VHD. Dynamiczne dyski VHD lub VHD w formacie VHDx nie sƒÖ jeszcze obs≈Çugiwane na platformie Azure. Dynamiczne dyski VHD zostanƒÖ przekonwertowane na statyczne dyski VHD podczas przesy≈Çania vhd z poleceniami programu PowerShell lub cli
* VHDs, kt√≥re sƒÖ zainstalowane na maszynie Wirtualnej i powinny byƒá ponownie zamontowane na platformie Azure do maszyny Wirtualnej muszƒÖ byƒá w sta≈Çym formacie VHD, jak r√≥wnie≈º. Przeczytaj [ten artyku≈Ç (Linux)](../../windows/managed-disks-overview.md) i [ten artyku≈Ç (Windows)](../../linux/managed-disks-overview.md) dla limit√≥w rozmiaru dysk√≥w z danymi. Dynamiczne dyski VHD zostanƒÖ przekonwertowane na statyczne dyski VHD podczas przesy≈Çania vhd z poleceniami programu PowerShell lub cli
* Dodaj inne konta lokalne, poniewa≈º mogƒÖ byƒá potrzebne dla okre≈õlonego scenariusza wdra≈ºania.
* Je≈õli obraz zawiera instalacjƒô SAP NetWeaver i zmiana nazwy hosta z oryginalnej nazwy w punkcie wdro≈ºenia platformy Azure jest prawdopodobne, zaleca siƒô skopiowaƒá najnowsze wersje dysku DVD programu SAP Software Provisioning Manager do szablonu. Umo≈ºliwi to ≈Çatwe korzystanie z funkcji zmiany nazwy sap pod warunkiem, ≈ºe zmiana nazwy hosta i/lub zmieniƒá identyfikator SID systemu SAP w obrazie wdro≈ºonej maszyny Wirtualnej zaraz po uruchomieniu nowej kopii.

---
> ![Windows][Logo_Windows] Windows
>
> Upewnij siƒô, ≈ºe dysk D:\ nie jest u≈ºywany Ustaw automatyczne dozowanie dysku dla do≈ÇƒÖczonych dysk√≥w, zgodnie z opisem w rozdziale [Ustawianie automount dla do≈ÇƒÖczonych dysk√≥w][planning-guide-5.5.3] w tym dokumencie.
>
> ![Linux][Logo_Linux] Linux
>
> Upewnij siƒô, ≈ºe /mnt/resource nie jest u≈ºywany i ≈ºe wszystkie dyski sƒÖ zainstalowane za po≈õrednictwem uuid. W przypadku dysku systemu operacyjnego upewnij siƒô, ≈ºe wpis bootloadera odzwierciedla r√≥wnie≈º mocowanie oparte na uuid.
>
>

---
* Interfejs GUI SAP (do cel√≥w administracyjnych i konfiguracyjnych) mo≈ºe byƒá wstƒôpnie zainstalowany w takim szablonie.
* Inne oprogramowanie niezbƒôdne do pomy≈õlnego uruchomienia maszyn wirtualnych w scenariuszach miƒôdzylokatywnych mo≈ºna zainstalowaƒá tak d≈Çugo, jak to oprogramowanie mo≈ºe pracowaƒá ze zmianƒÖ nazwy maszyny Wirtualnej.

Je≈õli maszyna wirtualna jest przygotowana na tyle, aby byƒá og√≥lny i ostatecznie niezale≈ºne od kont/u≈ºytkownik√≥w nie sƒÖ dostƒôpne w scenariuszu wdro≈ºenia platformy Azure docelowe, ostatni krok przygotowania uog√≥lniania takiego obrazu jest przeprowadzany.

##### <a name="generalizing-a-vm"></a>Uog√≥lnianie maszyny Wirtualnej
---
> ![Windows][Logo_Windows] Windows
>
> Ostatnim krokiem jest zalogowanie siƒô do maszyny Wirtualnej przy za pomocƒÖ konta administratora. Otw√≥rz okno polecenia systemu Windows jako *administrator*. Przejd≈∫ do %windir%\windows\system32\sysprep i wykonaj polecenie sysprep.exe.
> Pojawi siƒô ma≈Çe okno. Wa≈ºne jest, aby sprawdziƒá opcjƒô **Generalize** (domy≈õlnie nie jest zaznaczone) i zmieniƒá opcjƒô zamykania z domy≈õlnej "Reboot" na "shutdown". W tej procedurze przyjƒôto za≈Ço≈ºenie, ≈ºe proces sysprep jest wykonywany lokalnie w obiekcie operacyjnym go≈õcia maszyny Wirtualnej.
> Je≈õli chcesz wykonaƒá procedurƒô z maszynƒÖ wirtualnƒÖ ju≈º uruchomiƒô na platformie Azure, wykonaj kroki opisane w [tym artykule](https://docs.microsoft.com/azure/virtual-machines/windows/capture-image-resource).
>
> ![Linux][Logo_Linux] Linux
>
> [Jak przechwyciƒá maszynƒô wirtualnƒÖ z systemem Linux do u≈ºycia jako szablon us≈Çugi Resource Manager?][capture-image-linux-step-2-create-vm-image]
>
>

---
### <a name="transferring-vms-and-vhds-between-on-premises-to-azure"></a>Przenoszenie maszyn wirtualnych i wirtualnych maszyn wirtualnych miƒôdzy lokalnymi na platformƒô Azure
Poniewa≈º przekazywanie obraz√≥w i dysk√≥w maszyn wirtualnych na platformƒô Azure nie jest mo≈ºliwe za po≈õrednictwem witryny Azure portal, nale≈ºy u≈ºyƒá polece≈Ñ cmdlet programu Azure PowerShell lub interfejsu wiersza polecenia. InnƒÖ mo≈ºliwo≈õciƒÖ jest u≈ºycie narzƒôdzia "AzCopy". Narzƒôdzie mo≈ºna kopiowaƒá veds miƒôdzy lokalnymi i azure (w obu kierunkach). Mo≈ºna r√≥wnie≈º kopiowaƒá wirtualne identyfikatory miƒôdzy regionami platformy Azure. Zapoznaj siƒô z [niniejszƒÖ dokumentacjƒÖ,][storage-use-azcopy] aby pobraƒá i korzystaƒá z AzCopy.

TrzeciƒÖ alternatywƒÖ by≈Çoby u≈ºycie r√≥≈ºnych narzƒôdzi zorientowanych na gui innych firm. Upewnij siƒô jednak, ≈ºe te narzƒôdzia obs≈ÇugujƒÖ obiekty blob strony platformy Azure. Dla naszych cel√≥w musimy korzystaƒá ze sklepu Azure Page Blob (r√≥≈ºnice sƒÖ opisane tutaj: <https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>). R√≥wnie≈º narzƒôdzia dostarczane przez platformƒô Azure sƒÖ wydajne w kompresji maszyn wirtualnych i wirtualnych, kt√≥re muszƒÖ zostaƒá przekazane. Jest to wa≈ºne, poniewa≈º ta wydajno≈õƒá kompresji skraca czas przekazywania (kt√≥ry i tak zmienia siƒô w zale≈ºno≈õci od ≈ÇƒÖcza przekazywania do Internetu z obiektu lokalnego i regionu wdra≈ºania platformy Azure. Jest s≈Çusznym za≈Ço≈ºeniem, ≈ºe przekazywanie maszyny Wirtualnej lub wirtualnej z lokalizacji europejskiej do centr√≥w danych platformy Azure z siedzibƒÖ w USA zajmie wiƒôcej czasu ni≈º przekazywanie tych samych maszyn wirtualnych/wirtualnych dysk√≥w do europejskich centr√≥w danych platformy Azure.

#### <a name="uploading-a-vhd-from-on-premises-to-azure"></a><a name="a43e40e6-1acc-4633-9816-8f095d5a7b6a"></a>Przekazywanie dysku twardego z lokalnego ≈õrodowiska na platformƒô Azure
Aby przekazaƒá istniejƒÖcƒÖ maszynƒô wirtualnƒÖ lub wirtualnƒÖ z sieci lokalnej, taka maszyna wirtualna lub dysk wirtualny musi spe≈Çniaƒá wymagania wymienione w rozdziale [Przygotowanie do przenoszenia maszyny Wirtualnej z lokalnego na platformƒô Azure za pomocƒÖ nieog√≥lnionego dysku][planning-guide-5.2.1] tego dokumentu.

Taka maszyna wirtualna NIE musi byƒá uog√≥lniona i mo≈ºe byƒá przekazana w stanie i kszta≈Çcie, kt√≥ry ma po zamkniƒôciu po stronie lokalnej. To samo dotyczy dodatkowych vhd√≥w, kt√≥re nie zawierajƒÖ ≈ºadnego systemu operacyjnego.

##### <a name="uploading-a-vhd-and-making-it-an-azure-disk"></a>Przekazywanie dysku VHD i uczynienie go dyskiem platformy Azure
W takim przypadku chcemy przekazaƒá wirtualny dysk wirtualny z lub bez systemu operacyjnego w nim i zainstalowaƒá go na maszynie wirtualnej jako dysk danych lub u≈ºyƒá go jako dysku systemu operacyjnego. Jest to wieloetapowy proces

**Powershell**

* Zaloguj siƒô do subskrypcji za pomocƒÖ *Connect-AzAccount*
* Ustawianie subskrypcji kontekstu za pomocƒÖ *set-azcontext* i parametr SubscriptionId lub SubscriptionName - zobacz<https://docs.microsoft.com/powershell/module/az.accounts/set-Azcontext>
* Przekazywanie dysku VHD z *dodatkiem AzVhd* na konto us≈Çugi Azure Storage ‚Äî zobacz<https://docs.microsoft.com/powershell/module/az.compute/add-Azvhd>
* (Opcjonalnie) Tworzenie dysku zarzƒÖdzanego z dysku VHD za pomocƒÖ *nowego dysku AzDisk* ‚Äî zobacz<https://docs.microsoft.com/powershell/module/az.compute/new-Azdisk>
* Ustawianie dysku systemu operacyjnego nowej konfiguracji maszyny Wirtualnej na dysk VHD lub dysk zarzƒÖdzany *za* pomocƒÖ<https://docs.microsoft.com/powershell/module/az.compute/set-Azvmosdisk>
* Tworzenie nowej maszyny wirtualnej z konfiguracji maszyny Wirtualnej z *new-AzVM* - zobacz<https://docs.microsoft.com/powershell/module/az.compute/new-Azvm>
* Dodawanie dysku danych do nowej maszyny Wirtualnej za pomocƒÖ *dodatku AzVMDataDisk* ‚Äî zobacz<https://docs.microsoft.com/powershell/module/az.compute/add-Azvmdatadisk>

**Interfejs wiersza polecenia platformy Azure**

* Zaloguj siƒô do subskrypcji za pomocƒÖ *logowania az*
* Wybierz subskrypcjƒô z *zestawem kont `<subscription name or id` AZ --subscription*
* Przekazywanie dysku VHD z *obiektem blob magazynu az* ‚Äî zobacz [Korzystanie z interfejsu wiersza polecenia platformy Azure z us≈ÇugƒÖ Azure Storage][storage-azure-cli]
* (Opcjonalnie) Tworzenie dysku zarzƒÖdzanego z dysku VHD za pomocƒÖ *tworzenia dysku az* ‚Äî zobaczhttps://docs.microsoft.com/cli/azure/disk
* Tworzenie nowej maszyny Wirtualnej okre≈õlajƒÖcej przekazany dysk VHD lub Dysk zarzƒÖdzany jako dysk systemu operacyjnego z *tworzeniem az vm* i *parametrem --attach-os-disk*
* Dodawanie dysku danych do nowej maszyny Wirtualnej z *do≈ÇƒÖczonƒÖ dyskiem maszyny wirtualnej az* i *parametrem --new*

**Szablonu**

* Przekazywanie dysku VHD za pomocƒÖ programu PowerShell lub interfejsu wiersza polecenia platformy Azure
* (Opcjonalnie) Tworzenie dysku zarzƒÖdzanego z dysku VHD za pomocƒÖ programu PowerShell, interfejsu wiersza polecenia platformy Azure lub witryny Azure portal
* Wdra≈ºanie maszyny Wirtualnej z szablonem JSON odwo≈ÇujƒÖcego siƒô do dysku VHD, jak pokazano w [tym przyk≈Çadzie szablonu JSON](https://github.com/Azure/azure-quickstart-templates/blob/master/201-vm-specialized-vhd-new-or-existing-vnet/azuredeploy.json) lub przy u≈ºyciu dysk√≥w zarzƒÖdzanych, jak pokazano w [tym przyk≈Çadzie szablonu JSON](https://github.com/Azure/azure-quickstart-templates/blob/master/sap-2-tier-user-image-md/azuredeploy.json).

#### <a name="deployment-of-a-vm-image"></a>Wdra≈ºanie obrazu maszyny Wirtualnej
Aby przekazaƒá istniejƒÖcƒÖ maszynƒô wirtualnƒÖ lub wirtualnƒÖ z sieci lokalnej, aby u≈ºyƒá go jako obrazu maszyny Wirtualnej platformy Azure, takiego jak maszyna wirtualna lub dysk wirtualny, muszƒÖ spe≈Çniaƒá wymagania wymienione w rozdziale Przygotowanie do [wdra≈ºania maszyny Wirtualnej z obrazem specyficznym dla klienta dla sap][planning-guide-5.2.2] tego dokumentu.

* U≈ºyj *sysprep* w systemie Windows lub *waagent -deprovision* na Linuksie, aby uog√≥lniƒá swojƒÖ maszynƒô wirtualnƒÖ ‚Äî zobacz [Dokumentacja techniczna Sysprep](https://technet.microsoft.com/library/cc766049.aspx) dla systemu Windows lub [Jak przechwyciƒá maszynƒô wirtualnƒÖ Systemu Linux do u≈ºycia jako szablon Mened≈ºera zasob√≥w][capture-image-linux-step-2-create-vm-image] dla systemu Linux
* Zaloguj siƒô do subskrypcji za pomocƒÖ *Connect-AzAccount*
* Ustawianie subskrypcji kontekstu za pomocƒÖ *set-azcontext* i parametr SubscriptionId lub SubscriptionName - zobacz<https://docs.microsoft.com/powershell/module/az.accounts/set-Azcontext>
* Przekazywanie dysku VHD z *dodatkiem AzVhd* na konto us≈Çugi Azure Storage ‚Äî zobacz<https://docs.microsoft.com/powershell/module/az.compute/add-Azvhd>
* (Opcjonalnie) Tworzenie obrazu dysku zarzƒÖdzanego z dysku VHD za pomocƒÖ *new-AzImage* ‚Äî zobacz<https://docs.microsoft.com/powershell/module/az.compute/new-Azimage>
* Ustaw dysk systemu operacyjnego nowej konfiguracji maszyny Wirtualnej na
  * VHD z *Set-AzVMOSDisk -SourceImageUri -CreateOption fromImage* - zobacz<https://docs.microsoft.com/powershell/module/az.compute/set-Azvmosdisk>
  * Zestaw obraz√≥w dysku *zarzƒÖdzanego-AzVMSourceImage* ‚Äî zobacz<https://docs.microsoft.com/powershell/module/az.compute/set-Azvmsourceimage>
* Tworzenie nowej maszyny wirtualnej z konfiguracji maszyny Wirtualnej z *new-AzVM* - zobacz<https://docs.microsoft.com/powershell/module/az.compute/new-Azvm>

**Interfejs wiersza polecenia platformy Azure**

* U≈ºyj *sysprep* w systemie Windows lub *waagent -deprovision* na Linuksie, aby uog√≥lniƒá swojƒÖ maszynƒô wirtualnƒÖ ‚Äî zobacz [Dokumentacja techniczna Sysprep](https://technet.microsoft.com/library/cc766049.aspx) dla systemu Windows lub [Jak przechwyciƒá maszynƒô wirtualnƒÖ Systemu Linux do u≈ºycia jako szablon Mened≈ºera zasob√≥w][capture-image-linux-step-2-create-vm-image] dla systemu Linux
* Zaloguj siƒô do subskrypcji za pomocƒÖ *logowania az*
* Wybierz subskrypcjƒô z *zestawem kont `<subscription name or id` AZ --subscription*
* Przekazywanie dysku VHD z *obiektem blob magazynu az* ‚Äî zobacz [Korzystanie z interfejsu wiersza polecenia platformy Azure z us≈ÇugƒÖ Azure Storage][storage-azure-cli]
* (Opcjonalnie) Tworzenie obrazu dysku zarzƒÖdzanego z dysku VHD za pomocƒÖ *obrazu az ‚Äî* zobaczhttps://docs.microsoft.com/cli/azure/image
* Tworzenie nowej maszyny Wirtualnej okre≈õlajƒÖcej przekazany obraz dysku VHD lub dysku zarzƒÖdzanego jako dysk systemu operacyjnego z tworzeniem i *parametrem az vm* *--image*

**Szablonu**

* U≈ºyj *sysprep* w systemie Windows lub *waagent -deprovision* na Linuksie, aby uog√≥lniƒá swojƒÖ maszynƒô wirtualnƒÖ ‚Äî zobacz [Dokumentacja techniczna Sysprep](https://technet.microsoft.com/library/cc766049.aspx) dla systemu Windows lub [Jak przechwyciƒá maszynƒô wirtualnƒÖ Systemu Linux do u≈ºycia jako szablon Mened≈ºera zasob√≥w][capture-image-linux-step-2-create-vm-image] dla systemu Linux
* Przekazywanie dysku VHD za pomocƒÖ programu PowerShell lub interfejsu wiersza polecenia platformy Azure
* (Opcjonalnie) Tworzenie obrazu dysku zarzƒÖdzanego z dysku wirtualnego z programem PowerShell, platformƒÖ Azure CLI lub witrynƒÖ Azure portal
* Wdra≈ºanie maszyny Wirtualnej z szablonem JSON odwo≈ÇujƒÖcego siƒô do obrazu VHD, jak pokazano w [tym przyk≈Çadzie szablonu JSON](https://github.com/Azure/azure-quickstart-templates/blob/master/201-vm-specialized-vhd-new-or-existing-vnet/azuredeploy.json) lub przy u≈ºyciu obrazu dysku zarzƒÖdzanego, jak pokazano w [tym przyk≈Çadzie szablonu JSON](https://github.com/Azure/azure-quickstart-templates/blob/master/sap-2-tier-user-image-md/azuredeploy.json).

#### <a name="downloading-vhds-or-managed-disks-to-on-premises"></a>Pobieranie dysk√≥w VHD lub dysk√≥w zarzƒÖdzanych do ≈õrodowiska lokalnego
Us≈Çuga Azure Infrastructure as a Service nie jest jednokierunkowƒÖ ulicƒÖ, kt√≥ra mo≈ºe przesy≈Çaƒá tylko systemy VHD i SAP. Mo≈ºna przenie≈õƒá systemy SAP z platformy Azure z powrotem do ≈õwiata lokalnego, jak r√≥wnie≈º.

W czasie pobierania dysk√≥w VHD lub dysk√≥w zarzƒÖdzanych nie mo≈ºna aktywna. Nawet podczas pobierania dysk√≥w, kt√≥re sƒÖ zainstalowane na maszynach wirtualnych, maszyna wirtualna musi zostaƒá zamkniƒôta i cofniƒôta alokacja. Je≈õli chcesz tylko pobraƒá zawarto≈õƒá bazy danych, kt√≥ra powinna byƒá u≈ºywana do skonfigurowania nowego systemu lokalnie i je≈õli jest dopuszczalne, ≈ºe w czasie pobierania i konfiguracji nowego systemu, ≈ºe system na platformie Azure mo≈ºe nadal dzia≈Çaƒá mo≈ºna uniknƒÖƒá d≈Çugiego przestoju, wykonujƒÖc skompresowanƒÖ kopiƒô zapasowƒÖ bazy danych na dysku i po prostu pobraƒá ten dysk, zamiast pobieraƒá podstawowƒÖ maszynƒô wirtualnƒÖ systemu operacyjnego.

#### <a name="powershell"></a>PowerShell

* Pobieranie dysku zarzƒÖdzanego  
  Najpierw musisz uzyskaƒá dostƒôp do bazowego obiektu blob dysku zarzƒÖdzanego. Nastƒôpnie mo≈ºna skopiowaƒá podstawowy obiekt blob do nowego konta magazynu i pobraƒá obiekt blob z tego konta magazynu.

  ```powershell
  $access = Grant-AzDiskAccess -ResourceGroupName <resource group> -DiskName <disk name> -Access Read -DurationInSecond 3600
  $key = (Get-AzStorageAccountKey -ResourceGroupName <resource group> -Name <storage account name>)[0].Value
  $destContext = (New-AzStorageContext -StorageAccountName <storage account name -StorageAccountKey $key)
  Start-AzStorageBlobCopy -AbsoluteUri $access.AccessSAS -DestContainer <container name> -DestBlob <blob name> -DestContext $destContext
  # Wait for blob copy to finish
  Get-AzStorageBlobCopyState -Container <container name> -Blob <blob name> -Context $destContext
  Save-AzVhd -SourceUri <blob in new storage account> -LocalFilePath <local file path> -StorageKey $key
  # Wait for download to finish
  Revoke-AzDiskAccess -ResourceGroupName <resource group> -DiskName <disk name>
  ```

* Pobieranie dysku twardego  
  Po zatrzymaniu systemu SAP i zamkniƒôciu maszyny Wirtualnej mo≈ºna u≈ºyƒá polecenia cmdlet Save-AzVhd programu PowerShell w lokalnym miejscu docelowym, aby pobraƒá dyski VHD z powrotem do ≈õwiata lokalnego. Aby to zrobiƒá, potrzebujesz adresu URL dysku VHD, kt√≥ry mo≈ºna znale≈∫ƒá w sekcji "magazyn" w witrynie Azure portal (nale≈ºy przej≈õƒá do konta magazynu i kontenera magazynu, w kt√≥rym utworzono dysk wirtualny) i musisz wiedzieƒá, gdzie dysk VHD powinien zostaƒá skopiowany do.

  Nastƒôpnie mo≈ºna wykorzystaƒá polecenie, definiujƒÖc parametr SourceUri jako adres URL VHD do pobrania i LocalFilePath jako fizycznej lokalizacji VHD (w tym jego nazwƒô). Polecenie mo≈ºe wyglƒÖdaƒá nastƒôpujƒÖco:

  ```powerhell
  Save-AzVhd -ResourceGroupName <resource group name of storage account> -SourceUri http://<storage account name>.blob.core.windows.net/<container name>/sapidedata.vhd -LocalFilePath E:\Azure_downloads\sapidesdata.vhd
  ```

  Aby uzyskaƒá wiƒôcej informacji na temat polecenia cmdlet <https://docs.microsoft.com/powershell/module/az.compute/save-Azvhd>Save-AzVhd, sprawd≈∫ tutaj .

#### <a name="azure-cli"></a>Interfejs wiersza polecenia platformy Azure
* Pobieranie dysku zarzƒÖdzanego  
  Najpierw musisz uzyskaƒá dostƒôp do bazowego obiektu blob dysku zarzƒÖdzanego. Nastƒôpnie mo≈ºna skopiowaƒá podstawowy obiekt blob do nowego konta magazynu i pobraƒá obiekt blob z tego konta magazynu.

  ```azurecli
  az disk grant-access --ids "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>" --duration-in-seconds 3600
  az storage blob download --sas-token "<sas token>" --account-name <account name> --container-name <container name> --name <blob name> --file <local file>
  az disk revoke-access --ids "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>"
  ```

* Pobieranie dysku twardego   
  Po zatrzymaniu systemu SAP i zamkniƒôciu maszyny Wirtualnej mo≈ºna u≈ºyƒá polecenia Azure CLI _do pobrania obiektu blob magazynu_ na lokalnym miejscu docelowym, aby pobraƒá dyski VHD z powrotem do ≈õwiata lokalnego. Aby to zrobiƒá, potrzebujesz nazwy i kontenera VHD, kt√≥re mo≈ºna znale≈∫ƒá w sekcji "Magazyn" w witrynie Azure portal (trzeba przej≈õƒá do konta magazynu i kontenera magazynu, w kt√≥rym utworzono dysk VHD) i musisz wiedzieƒá, gdzie vHD powinien zostaƒá skopiowany do.

  Nastƒôpnie mo≈ºna wykorzystaƒá polecenie, definiujƒÖc parametry obiektu blob i kontenera VHD do pobrania i miejsce docelowe jako fizycznej lokalizacji docelowej VHD (w tym jego nazwƒô). Polecenie mo≈ºe wyglƒÖdaƒá nastƒôpujƒÖco:

  ```azurecli
  az storage blob download --name <name of the VHD to download> --container-name <container of the VHD to download> --account-name <storage account name of the VHD to download> --account-key <storage account key> --file <destination of the VHD to download>
  ```

### <a name="transferring-vms-and-disks-within-azure"></a>Przenoszenie maszyn wirtualnych i dysk√≥w na platformie Azure

#### <a name="copying-sap-systems-within-azure"></a>Kopiowanie system√≥w SAP na platformie Azure

System SAP lub nawet dedykowany serwer DBMS obs≈ÇugujƒÖcy warstwƒô aplikacji SAP prawdopodobnie bƒôdzie sk≈Çada≈Ç siƒô z kilku dysk√≥w, kt√≥re zawierajƒÖ system operacyjny z plikami binarnymi lub pliki danych i plik√≥w dziennika bazy danych SAP. Ani funkcja platformy Azure kopiowania dysk√≥w, ani funkcja platformy Azure zapisywania dysk√≥w na dysku lokalnym nie ma mechanizmu synchronizacji, kt√≥ry migaje wiele dysk√≥w w sp√≥jny spos√≥b. W zwiƒÖzku z tym stan skopiowanych lub zapisanych dysk√≥w, nawet je≈õli sƒÖ zainstalowane na tej samej maszynie wirtualnej bƒôdzie inna. Oznacza to, ≈ºe w konkretnym przypadku posiadania r√≥≈ºnych danych i plik√≥w dziennika zawartych w r√≥≈ºnych dyskach baza danych w ko≈Ñcu by≈Çaby niesp√≥jna.

**Wniosek: Aby skopiowaƒá lub zapisaƒá dyski, kt√≥re sƒÖ czƒô≈õciƒÖ konfiguracji systemu SAP, nale≈ºy zatrzymaƒá system SAP, a tak≈ºe zamknƒÖƒá wdro≈ºonƒÖ maszynƒô wirtualnƒÖ. Tylko wtedy mo≈ºna skopiowaƒá lub pobraƒá zestaw dysk√≥w, aby utworzyƒá kopiƒô systemu SAP na platformie Azure lub lokalnie.**

Dyski danych mogƒÖ byƒá przechowywane jako pliki VHD na koncie us≈Çugi Azure Storage i mogƒÖ byƒá bezpo≈õrednio do≈ÇƒÖczone do maszyny wirtualnej lub u≈ºywane jako obraz. W takim przypadku dysk VHD jest kopiowany do innej lokalizacji przed do≈ÇƒÖczeniem do maszyny wirtualnej. Pe≈Çna nazwa pliku VHD na platformie Azure musi byƒá unikatowa na platformie Azure. Jak wspomniano ju≈º wcze≈õniej, nazwa jest rodzajem trzyczƒô≈õciowej nazwy, kt√≥ra wyglƒÖda nastƒôpujƒÖco:

    http(s)://<storage account name>.blob.core.windows.net/<container name>/<vhd name>

Dyski danych mogƒÖ byƒá r√≥wnie≈º dyskami zarzƒÖdzanymi. W takim przypadku dysk zarzƒÖdzany jest u≈ºywany do tworzenia nowego dysku zarzƒÖdzanego przed do≈ÇƒÖczeniem do maszyny wirtualnej. Nazwa dysku zarzƒÖdzanego musi byƒá unikatowa w grupie zasob√≥w.

##### <a name="powershell"></a>PowerShell

Polecenia cmdlet programu Azure PowerShell mo≈ºna u≈ºyƒá do skopiowania dysku twardego wirtualnego, jak pokazano w [tym artykule][storage-powershell-guide-full-copy-vhd]. Aby utworzyƒá nowy dysk zarzƒÖdzany, nale≈ºy u≈ºyƒá new-AzDiskConfig i New-AzDisk, jak pokazano w poni≈ºszym przyk≈Çadzie.

```powershell
$config = New-AzDiskConfig -CreateOption Copy -SourceUri "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>" -Location <location>
New-AzDisk -ResourceGroupName <resource group name> -DiskName <disk name> -Disk $config
```

##### <a name="azure-cli"></a>Interfejs wiersza polecenia platformy Azure

Za pomocƒÖ interfejsu wiersza polecenia platformy Azure mo≈ºna skopiowaƒá dysk VHD. Aby utworzyƒá nowy dysk zarzƒÖdzany, u≈ºyj *tworzenia dysku az,* jak pokazano w poni≈ºszym przyk≈Çadzie.

```azurecli
az disk create --source "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>" --name <disk name> --resource-group <resource group name> --location <location>
```

##### <a name="azure-storage-tools"></a>Narzƒôdzia us≈Çugi Azure Storage

* <https://storageexplorer.com/>

Profesjonalne wersje eksplorator√≥w us≈Çugi Azure Storage mo≈ºna znale≈∫ƒá tutaj:

* <https://www.cerebrata.com/>
* <https://clumsyleaf.com/products/cloudxplorer>

Kopia vhd siƒô w ramach konta magazynu jest procesem, kt√≥ry trwa tylko kilka sekund (podobnie jak sprzƒôt SAN tworzenia migawek z op√≥≈∫nieniem kopiowania i kopiowania w zapisie). Po do≈ÇƒÖczeniu kopii pliku VHD mo≈ºna do≈ÇƒÖczyƒá go do maszyny wirtualnej lub u≈ºyƒá go jako obrazu do do≈ÇƒÖczania kopii dysku VHD do maszyn wirtualnych.

##### <a name="powershell"></a>PowerShell

```powershell
# attach a vhd to a vm
$vm = Get-AzVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzVMDataDisk -VM $vm -Name newdatadisk -VhdUri <path to vhd> -Caching <caching option> -DiskSizeInGB $null -Lun <lun, for example 0> -CreateOption attach
$vm | Update-AzVM

# attach a managed disk to a vm
$vm = Get-AzVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzVMDataDisk -VM $vm -Name newdatadisk -ManagedDiskId <managed disk id> -Caching <caching option> -DiskSizeInGB $null -Lun <lun, for example 0> -CreateOption attach
$vm | Update-AzVM

# attach a copy of the vhd to a vm
$vm = Get-AzVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzVMDataDisk -VM $vm -Name <disk name> -VhdUri <new path of vhd> -SourceImageUri <path to image vhd> -Caching <caching option> -DiskSizeInGB $null -Lun <lun, for example 0> -CreateOption fromImage
$vm | Update-AzVM

# attach a copy of the managed disk to a vm
$vm = Get-AzVM -ResourceGroupName <resource group name> -Name <vm name>
$diskConfig = New-AzDiskConfig -Location $vm.Location -CreateOption Copy -SourceUri <source managed disk id>
$disk = New-AzDisk -DiskName <disk name> -Disk $diskConfig -ResourceGroupName <resource group name>
$vm = Add-AzVMDataDisk -VM $vm -Caching <caching option> -Lun <lun, for example 0> -CreateOption attach -ManagedDiskId $disk.Id
$vm | Update-AzVM
```

##### <a name="azure-cli"></a>Interfejs wiersza polecenia platformy Azure

```azurecli

# attach a vhd to a vm
az vm unmanaged-disk attach --resource-group <resource group name> --vm-name <vm name> --vhd-uri <path to vhd>

# attach a managed disk to a vm
az vm disk attach --resource-group <resource group name> --vm-name <vm name> --disk <managed disk id>

# attach a copy of the vhd to a vm
# this scenario is currently not possible with Azure CLI. A workaround is to manually copy the vhd to the destination.

# attach a copy of a managed disk to a vm
az disk create --name <new disk name> --resource-group <resource group name> --location <location of target virtual machine> --source <source managed disk id>
az vm disk attach --disk <new disk name or managed disk id> --resource-group <resource group name> --vm-name <vm name> --caching <caching option> --lun <lun, for example 0>
```

#### <a name="copying-disks-between-azure-storage-accounts"></a><a name="9789b076-2011-4afa-b2fe-b07a8aba58a1"></a>Kopiowanie dysk√≥w miƒôdzy kontami us≈Çugi Azure Storage
Tego zadania nie mo≈ºna wykonaƒá w witrynie Azure portal. Mo≈ºna u≈ºyƒá polece≈Ñ cmdlet azure powershell, interfejsu wiersza polecenia platformy Azure lub przeglƒÖdarki magazynu innej firmy. Polecenia cmdlet programu PowerShell lub polecenia interfejsu wiersza polecenia mo≈ºna tworzyƒá i zarzƒÖdzaƒá obiektami blob, kt√≥re obejmujƒÖ mo≈ºliwo≈õƒá asynchronicznie kopiowania obiekt√≥w blob na kontach magazynu i w r√≥≈ºnych regionach w ramach subskrypcji platformy Azure.

##### <a name="powershell"></a>PowerShell
Mo≈ºna r√≥wnie≈º kopiowaƒá identyfikatory VHD miƒôdzy subskrypcjami. Aby uzyskaƒá wiƒôcej informacji, przeczytaj [ten artyku≈Ç][storage-powershell-guide-full-copy-vhd].

Podstawowy przep≈Çyw logiki polece≈Ñ cmdlet PS wyglƒÖda nastƒôpujƒÖco:

* Tworzenie kontekstu konta magazynu dla konta magazynu **≈∫r√≥d≈Çowego** za pomocƒÖ *New-AzStorageContext* ‚Äî zobacz<https://docs.microsoft.com/powershell/module/az.storage/new-AzStoragecontext>
* Tworzenie kontekstu konta magazynu dla **docelowego** konta magazynu za pomocƒÖ *New-AzStorageContext* ‚Äî zobacz<https://docs.microsoft.com/powershell/module/az.storage/new-AzStoragecontext>
* Rozpocznij kopiƒô od

```powershell
Start-AzStorageBlobCopy -SrcBlob <source blob name> -SrcContainer <source container name> -SrcContext <variable containing context of source storage account> -DestBlob <target blob name> -DestContainer <target container name> -DestContext <variable containing context of target storage account>
```

* Sprawd≈∫ stan kopii w pƒôtli za pomocƒÖ

```powershell
Get-AzStorageBlobCopyState -Blob <target blob name> -Container <target container name> -Context <variable containing context of target storage account>
```

* Do≈ÇƒÖcz nowy dysk VHD do maszyny wirtualnej, jak opisano powy≈ºej.

Przyk≈Çady mo≈ºna znale≈∫ƒá w [tym artykule][storage-powershell-guide-full-copy-vhd].

##### <a name="azure-cli"></a>Interfejs wiersza polecenia platformy Azure
* Rozpocznij kopiƒô od

```azurecli
az storage blob copy start --source-blob <source blob name> --source-container <source container name> --source-account-name <source storage account name> --source-account-key <source storage account key> --destination-container <target container name> --destination-blob <target blob name> --account-name <target storage account name> --account-key <target storage account name>
```

* Sprawd≈∫ stan, je≈õli kopia jest nadal w pƒôtli z

```azurecli
az storage blob show --name <target blob name> --container <target container name> --account-name <target storage account name> --account-key <target storage account name>
```

* Do≈ÇƒÖcz nowy dysk VHD do maszyny wirtualnej, jak opisano powy≈ºej.

### <a name="disk-handling"></a>Obs≈Çuga dysk√≥w

#### <a name="vmdisk-structure-for-sap-deployments"></a><a name="4efec401-91e0-40c0-8e64-f2dceadff646"></a>Struktura maszyn wirtualnych/dysk√≥w dla wdro≈ºe≈Ñ SAP

Najlepiej obs≈Çugi struktury maszyny Wirtualnej i skojarzonych dysk√≥w powinny byƒá proste. W instalacjach lokalnych klienci opracowali wiele sposob√≥w strukturyzowania instalacji serwera.

* Jeden dysk podstawowy, kt√≥ry zawiera system operacyjny i wszystkie pliki binarne systemu DBMS i/lub SAP. Od marca 2015 r. ten dysk mo≈ºe mieƒá rozmiar do 1 TB zamiast wcze≈õniejszych ogranicze≈Ñ, kt√≥re ograniczy≈Çy go do 127 GB.
* Jeden lub wiele dysk√≥w, kt√≥re zawierajƒÖ plik dziennika DBMS bazy danych SAP i plik dziennika obszaru magazynu tymczasowego DBMS (je≈õli dbms obs≈Çuguje to). Je≈õli wymagania we/wy dziennika bazy danych sƒÖ wysokie, nale≈ºy rozbieraƒá wiele dysk√≥w, aby osiƒÖgnƒÖƒá wymagany wolumin We/Wy.
* Liczba dysk√≥w zawierajƒÖcych jeden lub dwa pliki bazy danych z bazy danych SAP i pliki danych tymczasowych DBMS, jak r√≥wnie≈º (je≈õli dbms obs≈Çuguje to).

![Konfiguracja referencyjna maszyny Wirtualnej us≈Çugi Azure IaaS dla systemu SAP][planning-guide-figure-1300]


---
> ![Windows][Logo_Windows] Windows
>
> U wielu klient√≥w widzieli≈õmy konfiguracje, w kt√≥rych na przyk≈Çad pliki binarne SAP i DBMS nie by≈Çy zainstalowane na c:\ dysku, w kt√≥rym zainstalowano system operacyjny. By≈Ço wiele powod√≥w, ale kiedy wr√≥cili≈õmy do korzenia, zwykle by≈Ço to, ≈ºe dyski by≈Çy ma≈Çe, a aktualizacje systemu operacyjnego potrzebowa≈Çy dodatkowej przestrzeni 10-15 lat temu. Oba warunki nie majƒÖ ju≈º zastosowania w tych dniach zbyt czƒôsto. Dzi≈õ c:\ dysk mo≈ºe byƒá mapowany na dyskach o du≈ºym woluminie lub maszynach wirtualnych. Aby w ≈ÇƒÖczyƒá wdro≈ºenia w swojej strukturze, zaleca siƒô stosowanie nastƒôpujƒÖcego wzorca wdra≈ºania system√≥w SAP NetWeaver na platformie Azure
>
> Plik stronicowy systemu operacyjnego Windows powinien znajdowaƒá siƒô na dysku D: (dysk nietrwa≈Çy)
>
> ![Linux][Logo_Linux] Linux
>
> Umie≈õƒá plik wymiany Linuksa pod /mnt /mnt/resource na Linuksie, jak opisano w [tym artykule][virtual-machines-linux-agent-user-guide]. Plik wymiany mo≈ºna skonfigurowaƒá w pliku konfiguracyjnym agenta Linux /etc/waagent.conf. Dodaj lub zmie≈Ñ nastƒôpujƒÖce ustawienia:
>
>

```console
ResourceDisk.EnableSwap=y
ResourceDisk.SwapSizeMB=30720
```

Aby aktywowaƒá zmiany, nale≈ºy ponownie uruchomiƒá agenta systemu Linux

```console
sudo service waagent restart
```

Przeczytaj sap uwaga [1597355] aby uzyskaƒá wiƒôcej informacji na temat zalecanego rozmiaru pliku wymiany

---
Liczba dysk√≥w u≈ºywanych dla plik√≥w danych DBMS i typ us≈Çugi Azure Storage, na kt√≥rych sƒÖ hostowane te dyski, powinna byƒá okre≈õlona przez wymagania we/wy i wymagane op√≥≈∫nienie. Dok≈Çadne przydzia≈Çy sƒÖ opisane w [tym artykule (Linux)][virtual-machines-sizes-linux] i [w tym artykule (Windows)][virtual-machines-sizes-windows].

Do≈õwiadczenie wdro≈ºe≈Ñ SAP w ciƒÖgu ostatnich dw√≥ch lat nauczy≈Ço nas kilku lekcji, kt√≥re mo≈ºna podsumowaƒá jako:

* Ruch We/Wy do r√≥≈ºnych plik√≥w danych nie zawsze jest taki sam, poniewa≈º istniejƒÖce systemy klient√≥w mogƒÖ mieƒá pliki danych o r√≥≈ºnej wielko≈õci reprezentujƒÖce ich bazy danych SAP. W rezultacie okaza≈Ço siƒô, ≈ºe lepiej jest u≈ºywaƒá konfiguracji RAID na wielu dyskach, aby umie≈õciƒá pliki danych LUN wyrze≈∫bione z tych. Zdarza≈Çy siƒô sytuacje, szczeg√≥lnie w przypadku us≈Çugi Azure Standard Storage, w kt√≥rych wska≈∫nik We/Wy osiƒÖgnƒÖ≈Ç przydzia≈Ç pojedynczego dysku wzglƒôdem dziennika transakcji us≈Çugi DBMS. W takich scenariuszach zaleca siƒô u≈ºycie magazynu w wersji Premium lub alternatywnie agregowanie wielu dysk√≥w magazynu standardowego z paskiem oprogramowania.

---
> ![Windows][Logo_Windows] Windows
>
> * [Najlepsze rozwiƒÖzania w zakresie wydajno≈õci dla programu SQL Server w us≈Çudze Azure Virtual Machines][virtual-machines-sql-server-performance-best-practices]
>
> ![Linux][Logo_Linux] Linux
>
> * [Konfigurowanie macierzy RAID oprogramowania w systemie Linux][virtual-machines-linux-configure-raid]
> * [Konfigurowanie us≈Çugi LVM na maszynie Wirtualnej z systemem Linux na platformie Azure][virtual-machines-linux-configure-lvm]
> * [Wpisy tajne us≈Çugi Azure Storage i optymalizacje we/wy systemu Linux](https://blogs.msdn.com/b/igorpag/archive/2014/10/23/azure-storage-secrets-and-linux-i-o-optimizations.aspx)
>
>

---
* Magazyn w jako≈õci Premium wykazuje znacznie lepszƒÖ wydajno≈õƒá, szczeg√≥lnie w przypadku zapis√≥w dziennika transakcji krytycznych. W przypadku scenariuszy SAP, kt√≥re majƒÖ zapewniƒá wydajno≈õƒá podobnƒÖ do produkcji, zdecydowanie zaleca siƒô u≈ºycie serii maszyn wirtualnych, kt√≥re mogƒÖ korzystaƒá z us≈Çugi Azure Premium Storage.

Nale≈ºy pamiƒôtaƒá, ≈ºe dysk, kt√≥ry zawiera system operacyjny i jak zaleca siƒô, pliki binarne SAP i bazy danych (podstawowa maszyna wirtualna), jak r√≥wnie≈º, nie jest ju≈º ograniczona do 127GB. Teraz mo≈ºe mieƒá do 1 TB rozmiaru. Powinno to byƒá wystarczajƒÖco du≈ºo miejsca, aby zachowaƒá wszystkie niezbƒôdne pliki, w tym, na przyk≈Çad, dzienniki zada≈Ñ wsadowych SAP.

Aby uzyskaƒá wiƒôcej sugestii i wiƒôcej szczeg√≥≈Ç√≥w, w szczeg√≥lno≈õci dla maszyn wirtualnych systemu dbms, zapoznaj siƒô z [Przewodnikiem wdra≈ºania systemu dbms][dbms-guide]

#### <a name="disk-handling"></a>Obs≈Çuga dysk√≥w

W wiƒôkszo≈õci scenariuszy nale≈ºy utworzyƒá dodatkowe dyski w celu wdro≈ºenia bazy danych SAP na maszynie Wirtualnej. Rozmawiali≈õmy o zagadnieniach dotyczƒÖcych liczby dysk√≥w w rozdziale [Struktura maszyn wirtualnych/dysk√≥w dla wdro≈ºe≈Ñ SAP][planning-guide-5.5.1] tego dokumentu. Witryna Azure portal umo≈ºliwia do≈ÇƒÖczanie i od≈ÇƒÖczanie dysk√≥w po wdro≈ºeniu podstawowej maszyny Wirtualnej. Dyski mogƒÖ byƒá pod≈ÇƒÖczone/od≈ÇƒÖczone, gdy maszyna wirtualna jest uruchomiona i dzia≈Ça, a tak≈ºe po jej zatrzymaniu. Podczas do≈ÇƒÖczania dysku portal Azure portal oferuje do≈ÇƒÖczyƒá pusty dysk lub istniejƒÖcy dysk, kt√≥ry w tym momencie nie jest do≈ÇƒÖczony do innej maszyny Wirtualnej.

**Uwaga:** Dyski mo≈ºna pod≈ÇƒÖczyƒá tylko do jednej maszyny Wirtualnej w danym momencie.

![Do≈ÇƒÖczanie / od≈ÇƒÖczanie dysk√≥w za pomocƒÖ us≈Çugi Azure Standard Storage][planning-guide-figure-1400]

Podczas wdra≈ºania nowej maszyny wirtualnej mo≈ºna zdecydowaƒá, czy chcesz u≈ºywaƒá dysk√≥w zarzƒÖdzanych, czy umieszczaƒá dyski na kontach us≈Çugi Azure Storage. Je≈õli chcesz u≈ºywaƒá magazynu w wersji Premium, zalecamy u≈ºycie dysk√≥w zarzƒÖdzanych.

Nastƒôpnie nale≈ºy zdecydowaƒá, czy chcesz utworzyƒá nowy i pusty dysk, czy chcesz wybraƒá istniejƒÖcy dysk, kt√≥ry zosta≈Ç przekazany wcze≈õniej i powinien byƒá teraz do≈ÇƒÖczony do maszyny Wirtualnej.

**WA≈ªNE:** **NIE** chcesz u≈ºywaƒá buforowania host√≥w w us≈Çudze Azure Standard Storage. Nale≈ºy pozostawiƒá preferencjƒô Pamiƒôci podrƒôcznej hosta domy≈õlnie NONE. Za pomocƒÖ us≈Çugi Azure Premium Storage nale≈ºy w≈ÇƒÖczyƒá buforowanie odczytu, je≈õli charakterystyka we/wy jest w wiƒôkszo≈õci odczytywana jako typowy ruch we/wy wzglƒôdem plik√≥w danych bazy danych. W przypadku pliku dziennika transakcji bazy danych nie zaleca siƒô buforowania.

---
> ![Windows][Logo_Windows] Windows
>
> [Jak do≈ÇƒÖczyƒá dysk danych w witrynie Azure portal][virtual-machines-linux-attach-disk-portal]
>
> Je≈õli dyski sƒÖ pod≈ÇƒÖczone, musisz zalogowaƒá siƒô do maszyny Wirtualnej, aby otworzyƒá Mened≈ºera dysk√≥w systemu Windows. Je≈õli autodostawienie nie jest w≈ÇƒÖczone zgodnie z zaleceniami w rozdziale [Ustawianie autodostawienia dla pod≈ÇƒÖczonych dysk√≥w,][planning-guide-5.5.3]nowo pod≈ÇƒÖczony wolumin musi zostaƒá wykonany w trybie online i zainicjowany.
>
> ![Linux][Logo_Linux] Linux
>
> Je≈õli dyski sƒÖ pod≈ÇƒÖczone, musisz zalogowaƒá siƒô do maszyny Wirtualnej i zainicjowaƒá dyski zgodnie z opisem w [tym artykule][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]
>
>

---
Je≈õli nowy dysk jest pustym dyskiem, nale≈ºy r√≥wnie≈º sformatowaƒá dysk. Do formatowania, szczeg√≥lnie w przypadku plik√≥w danych i dziennik√≥w DBMS, obowiƒÖzujƒÖ takie same zalecenia, jak w przypadku wdro≈ºe≈Ñ systemu dbms.

Konto us≈Çugi Azure Storage nie zapewnia niesko≈Ñczonych zasob√≥w pod wzglƒôdem woluminu We/Wy, us≈Çugi We/Wy i woluminu danych. Zazwyczaj maszyny wirtualne DBMS sƒÖ najbardziej dotkniƒôte tym. Mo≈ºe byƒá najlepiej u≈ºyƒá osobnego konta magazynu dla ka≈ºdej maszyny Wirtualnej, je≈õli masz kilka maszyn wirtualnych woluminu we/wy do wdro≈ºenia, aby pozostaƒá w granicach woluminu konta us≈Çugi Azure Storage. W przeciwnym razie musisz zobaczyƒá, jak mo≈ºna zr√≥wnowa≈ºyƒá te maszyny wirtualne miƒôdzy r√≥≈ºnymi kontami magazynu bez osiƒÖgniƒôcia limitu ka≈ºdego pojedynczego konta magazynu. Wiƒôcej szczeg√≥≈Ç√≥w mo≈ºna znale≈∫ƒá w [Przewodniku wdra≈ºania systemu DBMS][dbms-guide]. Nale≈ºy r√≥wnie≈º pamiƒôtaƒá o tych ograniczeniach dla maszyn wirtualnych serwera aplikacji SAP lub innych maszyn wirtualnych, kt√≥re ostatecznie mogƒÖ wymagaƒá dodatkowych identyfikator√≥w VHD. Te ograniczenia nie majƒÖ zastosowania w przypadku korzystania z dysku zarzƒÖdzanego. Je≈õli planujesz u≈ºywaƒá magazynu w wersji Premium, zalecamy u≈ºycie dysku zarzƒÖdzanego.

Innym tematem, kt√≥ry jest istotny dla kont magazynu jest to, czy veds na koncie magazynu sƒÖ coraz replikowane geograficznie. Replikacja geograficzna jest w≈ÇƒÖczona lub wy≈ÇƒÖczona na poziomie konta magazynu, a nie na poziomie maszyny Wirtualnej. Je≈õli replikacja geograficzna jest w≈ÇƒÖczona, dyski VHD w ramach konta magazynu bƒôdƒÖ replikowane do innego centrum danych platformy Azure w tym samym regionie. Przed podjƒôciem decyzji w tej sprawie nale≈ºy pomy≈õleƒá o nastƒôpujƒÖcych ograniczeniach:

Replikacja geograficzna platformy Azure dzia≈Ça lokalnie na ka≈ºdej dysku VHD na maszynie Wirtualnej i nie replikuje obiekt√≥w we/w porzƒÖdku chronologicznym w wielu dyskach wirtualnych na maszynie wirtualnej. W zwiƒÖzku z tym VHD, kt√≥ry reprezentuje podstawowej maszyny Wirtualnej, jak r√≥wnie≈º wszelkie dodatkowe dyski VHD do≈ÇƒÖczone do maszyny Wirtualnej sƒÖ replikowane niezale≈ºnie od siebie. Oznacza to, ≈ºe nie ma synchronizacji miƒôdzy zmianami w r√≥≈ºnych VHDs. Fakt, ≈ºe operacje we/wy sƒÖ replikowane niezale≈ºnie od kolejno≈õci, w jakiej sƒÖ napisane, oznacza, ≈ºe replikacja geograficzna nie ma warto≈õci dla serwer√≥w baz danych, kt√≥re majƒÖ swoje bazy danych rozproszone za po≈õrednictwem wielu vhd√≥w. Opr√≥cz dbms, mogƒÖ istnieƒá r√≥wnie≈º inne aplikacje, w kt√≥rych procesy zapisu lub manipulowania danymi w r√≥≈ºnych VHDs i gdzie jest wa≈ºne, aby zachowaƒá kolejno≈õƒá zmian. Je≈õli jest to wymagane, replikacja geograficzna na platformie Azure nie powinna byƒá w≈ÇƒÖczona. W zale≈ºno≈õci od tego, czy potrzebujesz replikacji geograficznej dla zestawu maszyn wirtualnych, ale nie dla innego zestawu, mo≈ºna ju≈º kategoryzowaƒá maszyny wirtualne i powiƒÖzane z nimi dyski wirtualne na r√≥≈ºne konta magazynu, kt√≥re majƒÖ w≈ÇƒÖczonƒÖ lub wy≈ÇƒÖczonƒÖ replikacjƒô geograficznƒÖ.

#### <a name="setting-automount-for-attached-disks"></a><a name="17e0d543-7e8c-4160-a7da-dd7117a1ad9d"></a>Automatyczne ustawianie dla pod≈ÇƒÖczonych dysk√≥w
---
> ![Windows][Logo_Windows] Windows
>
> Dla maszyn wirtualnych, kt√≥re sƒÖ tworzone z w≈Çasnych obraz√≥w lub dysk√≥w, konieczne jest sprawdzenie i ewentualnie ustawiƒá parametr automount. Ustawienie tego parametru pozwoli maszynie Wirtualnej po ponownym uruchomieniu lub ponownym rozmieszczeniu na platformie Azure, aby zainstalowaƒá pod≈ÇƒÖczone/zainstalowane dyski ponownie automatycznie.
> Parametr jest ustawiony dla obraz√≥w dostarczonych przez firmƒô Microsoft w portalu Azure Marketplace.
>
> Aby ustawiƒá automontowanie, sprawd≈∫ dokumentacjƒô pliku wykonywalnego diskpart.exe wiersza polecenia tutaj:
>
> * [Opcje wiersza polecenia programu DiskPart](https://technet.microsoft.com/library/bb490893.aspx)
> * [Automatycznej instalacji](https://technet.microsoft.com/library/cc753703.aspx)
>
> Okno wiersza polecenia systemu Windows powinno zostaƒá otwarte jako administrator.
>
> Je≈õli dyski sƒÖ pod≈ÇƒÖczone, musisz zalogowaƒá siƒô do maszyny Wirtualnej, aby otworzyƒá Mened≈ºera dysk√≥w systemu Windows. Je≈õli autodostawienie nie jest w≈ÇƒÖczone zgodnie z zaleceniami w rozdziale [Ustawianie autodostawienia dla pod≈ÇƒÖczonych dysk√≥w,][planning-guide-5.5.3]nowo do≈ÇƒÖczony wolumin >musi zostaƒá wykonany w trybie online i zainicjowany.
>
> ![Linux][Logo_Linux] Linux
>
> Nale≈ºy zainicjowaƒá nowo do≈ÇƒÖczony pusty dysk zgodnie z opisem w [tym artykule][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux].
> Nale≈ºy r√≥wnie≈º dodaƒá nowe dyski do /etc/fstab.
>
>

---
### <a name="final-deployment"></a>Ostateczne wdro≈ºenie

Aby uzyskaƒá ostateczne wdro≈ºenie i dok≈Çadne kroki, szczeg√≥lnie w odniesieniu do wdra≈ºania rozszerzenia platformy Azure dla sap, zapoznaj siƒô z [Przewodnikiem wdra≈ºania][deployment-guide].

## <a name="accessing-sap-systems-running-within-azure-vms"></a>Uzyskiwanie dostƒôpu do system√≥w SAP dzia≈ÇajƒÖcych w ramach maszyn wirtualnych platformy Azure

W przypadku scenariuszy, w kt√≥rych chcesz po≈ÇƒÖczyƒá siƒô z tymi systemami SAP w publicznym Internecie przy u≈ºyciu interfejsu GUI SAP, nale≈ºy zastosowaƒá nastƒôpujƒÖce procedury.

W dalszej czƒô≈õci dokumentu om√≥wimy inny g≈Ç√≥wny scenariusz, ≈ÇƒÖczƒÖc siƒô z systemami SAP we wdro≈ºeniach miƒôdzy lokalnymi, kt√≥re majƒÖ po≈ÇƒÖczenie lokacja-lokacja (tunel SIECI VPN) lub po≈ÇƒÖczenie Azure ExpressRoute miƒôdzy systemami lokalnymi a systemami platformy Azure.

### <a name="remote-access-to-sap-systems"></a>Zdalny dostƒôp do system√≥w SAP

W us≈Çudze Azure Resource Manager nie ma ju≈º ≈ºadnych domy≈õlnych punkt√≥w ko≈Ñcowych, takich jak w poprzednim modelu klasycznym. Wszystkie porty maszyny Wirtualnej us≈Çugi Azure Resource Manager sƒÖ otwarte tak d≈Çugo, jak:

1. Dla podsieci ani interfejsu sieciowego nie zdefiniowano ≈ºadnej sieciowej grupy zabezpiecze≈Ñ. Ruch sieciowy do maszyn wirtualnych platformy Azure mo≈ºna zabezpieczyƒá za po≈õrednictwem tak zwanych "sieciowych grup zabezpiecze≈Ñ". Aby uzyskaƒá wiƒôcej informacji, zobacz [What is a Network Security Group (NSG)?][virtual-networks-nsg] (Co to jest sieciowa grupa zabezpiecze≈Ñ?).
2. Dla interfejsu sieciowego nie zdefiniowano modu≈Çu r√≥wnowa≈ºenia obciƒÖ≈ºenia platformy Azure   

Zobacz r√≥≈ºnicƒô architektury miƒôdzy modelem klasycznym a ARM, jak opisano w [tym artykule][virtual-machines-azure-resource-manager-architecture].

#### <a name="configuration-of-the-sap-system-and-sap-gui-connectivity-over-the-internet"></a>Konfiguracja systemu SAP i ≈ÇƒÖczno≈õci GUI SAP przez Internet

Zobacz ten artyku≈Ç, kt√≥ry opisuje szczeg√≥≈Çy tego tematu:<https://blogs.msdn.com/b/saponsqlserver/archive/2014/06/24/sap-gui-connection-closed-when-connecting-to-sap-system-in-azure.aspx>

#### <a name="changing-firewall-settings-within-vm"></a>Zmienianie ustawie≈Ñ zapory w maszynie wirtualnej

Mo≈ºe byƒá konieczne skonfigurowanie zapory na maszynach wirtualnych, aby zezwoliƒá na ruch przychodzƒÖcy do systemu SAP.

---
> ![Windows][Logo_Windows] Windows
>
> Domy≈õlnie Zapora systemu Windows w ramach platformy Azure wdro≈ºonej maszyny Wirtualnej jest w≈ÇƒÖczona. Teraz musisz zezwoliƒá na otwarcie portu SAP, w przeciwnym razie interfejs GUI SAP nie bƒôdzie m√≥g≈Ç siƒô po≈ÇƒÖczyƒá.
> W tym celu:
>
> * Otw√≥rz Panel sterowania\System i Zabezpieczenia\Zapora systemu Windows w **ustawieniach zaawansowanych**.
> * Teraz kliknij prawym przyciskiem myszy na Regu≈Çy przychodzƒÖce i wybierz **NowƒÖ regu≈Çƒô**.
> * W poni≈ºszym Kreatorze wybierz opcjƒô utworzenia nowej **regu≈Çy portu.**
> * W nastƒôpnym kroku kreatora pozostaw ustawienie w TCP i wpisz numer portu, kt√≥ry chcesz otworzyƒá. Poniewa≈º nasz identyfikator wystƒÖpienia SAP wynosi 00, wziƒôli≈õmy 3200. Je≈õli wystƒÖpienie ma inny numer wystƒÖpienia, port zdefiniowany wcze≈õniej na podstawie numeru wystƒÖpienia powinien zostaƒá otwarty.
> * W nastƒôpnej czƒô≈õci kreatora nale≈ºy pozostawiƒá zaznaczony element **Zezwalaj na po≈ÇƒÖczenie.**
> * W nastƒôpnym kroku kreatora nale≈ºy okre≈õliƒá, czy regu≈Ça ma zastosowanie do sieci domeny, sieci prywatnej i publicznej. W razie potrzeby dostosuj go do swoich potrzeb. Jednak po≈ÇƒÖczenie z GUI SAP z zewnƒÖtrz za po≈õrednictwem sieci publicznej, nale≈ºy zastosowaƒá regu≈Çƒô do sieci publicznej.
> * W ostatnim kroku kreatora nazwij regu≈Çƒô i zapisz, naciskajƒÖc **przycisk Zako≈Ñcz**.
>
> Regu≈Ça wchodzi w ≈ºycie natychmiast.
>
> ![Definicja regu≈Çy portu][planning-guide-figure-1600]
>
> ![Linux][Logo_Linux] Linux
>
> Obrazy systemu Linux w portalu Azure Marketplace domy≈õlnie nie w≈ÇƒÖczajƒÖ zapory iptables, a po≈ÇƒÖczenie z systemem SAP powinno dzia≈Çaƒá. Je≈õli w≈ÇƒÖczono iptables lub innƒÖ zaporƒô, zapoznaj siƒô z dokumentacjƒÖ iptables lub u≈ºywanej zapory, aby zezwoliƒá na przychodzƒÖcy ruch tcp do portu 32xx (gdzie xx jest numerem systemowym systemu SAP).
>
>

---
#### <a name="security-recommendations"></a>Zalecenia dotyczƒÖce zabezpiecze≈Ñ

Interfejs GUI SAP nie ≈ÇƒÖczy siƒô natychmiast z ≈ºadnymi wystƒÖpieniami SAP (port 32xx), kt√≥re sƒÖ uruchomione, ale najpierw ≈ÇƒÖczy siƒô za po≈õrednictwem portu otwartego do procesu serwera komunikat√≥w SAP (port 36xx). W przesz≈Ço≈õci ten sam port by≈Ç u≈ºywany przez serwer wiadomo≈õci do komunikacji wewnƒôtrznej z wystƒÖpieniami aplikacji. Aby zapobiec przypadkowej komunikacji serwer√≥w aplikacji lokalnych z serwerem wiadomo≈õci na platformie Azure, mo≈ºna zmieniƒá wewnƒôtrzne porty komunikacyjne. Zdecydowanie zaleca siƒô zmianƒô komunikacji wewnƒôtrznej miƒôdzy serwerem komunikat√≥w SAP i jego wystƒÖpieniami aplikacji na inny numer portu w systemach sklonowanych z system√≥w lokalnych, takich jak klon rozwoju do testowania projektu itp. Mo≈ºna to zrobiƒá za pomocƒÖ domy≈õlnego parametru profilu:

> rdisp/msserv_internal
>
>

zgodnie z dokumentami w [ustawieniach zabezpiecze≈Ñ serwera komunikat√≥w SAP](https://help.sap.com/saphelp_nwpi71/helpdata/en/47/c56a6938fb2d65e10000000a42189c/content.htm)


### <a name="single-vm-with-sap-netweaver-demotraining-scenario"></a><a name="3e9c3690-da67-421a-bc3f-12c520d99a30"></a>Pojedyncza maszyna wirtualna z scenariuszem demonstracyjnym/szkoleniowym SAP NetWeaver

![Uruchamianie pojedynczych system√≥w demonstracyjnych SAP maszyn wirtualnych o tych samych nazwach maszyn wirtualnych, izolowanych w us≈Çugach w chmurze Azure][planning-guide-figure-1700]

W tym scenariuszu implementujemy typowy scenariusz systemu szkolenia/demo, w kt√≥rym pe≈Çny scenariusz szkolenia/demo znajduje siƒô w jednej maszynie wirtualnej. Zak≈Çadamy, ≈ºe wdro≈ºenie odbywa siƒô za po≈õrednictwem szablon√≥w obraz√≥w maszyn wirtualnych. Zak≈Çadamy r√≥wnie≈º, ≈ºe wiele z tych wersji demonstracyjnych/szkole≈Ñ maszyn wirtualnych muszƒÖ byƒá wdro≈ºone z maszyn wirtualnych o tej samej nazwie. Ca≈Çe systemy szkoleniowe nie majƒÖ ≈ÇƒÖczno≈õci z zasobami lokalnymi i sƒÖ przeciwie≈Ñstwem wdro≈ºenia hybrydowego.

Za≈Ço≈ºenie jest, ≈ºe utworzono obraz maszyny Wirtualnej, jak opisano w niekt√≥rych sekcjach rozdzia≈Çu [Przygotowywanie maszyn wirtualnych z SAP dla platformy Azure][planning-guide-5.2] w tym dokumencie.

Sekwencja zdarze≈Ñ do zaimplementowania scenariusza wyglƒÖda nastƒôpujƒÖco:

##### <a name="powershell"></a>PowerShell

* Tworzenie nowej grupy zasob√≥w dla ka≈ºdego szkolenia/krajobrazu demonstracyjnego

```powershell
$rgName = "SAPERPDemo1"
New-AzResourceGroup -Name $rgName -Location "North Europe"
```

* Utw√≥rz nowe konto magazynu, je≈õli nie chcesz u≈ºywaƒá dysk√≥w zarzƒÖdzanych

```powershell
$suffix = Get-Random -Minimum 100000 -Maximum 999999
$account = New-AzStorageAccount -ResourceGroupName $rgName -Name "saperpdemo$suffix" -SkuName Standard_LRS -Kind "Storage" -Location "North Europe"
```

* Utw√≥rz nowƒÖ sieƒá wirtualnƒÖ dla ka≈ºdego szkoleniowego/demonstracyjnyego krajobrazu, aby umo≈ºliwiƒá u≈ºycie tej samej nazwy hosta i adres√≥w IP. Sieƒá wirtualna jest chroniona przez sieciowƒÖ grupƒô zabezpiecze≈Ñ, kt√≥ra zezwala tylko na ruch do portu 3389, aby w≈ÇƒÖczyƒá dostƒôp do pulpitu zdalnego i port 22 dla SSH.

```powershell
# Create a new Virtual Network
$rdpRule = New-AzNetworkSecurityRuleConfig -Name SAPERPDemoNSGRDP -Protocol * -SourcePortRange * -DestinationPortRange 3389 -Access Allow -Direction Inbound -SourceAddressPrefix * -DestinationAddressPrefix * -Priority 100
$sshRule = New-AzNetworkSecurityRuleConfig -Name SAPERPDemoNSGSSH -Protocol * -SourcePortRange * -DestinationPortRange 22 -Access Allow -Direction Inbound -SourceAddressPrefix * -DestinationAddressPrefix * -Priority 101
$nsg = New-AzNetworkSecurityGroup -Name SAPERPDemoNSG -ResourceGroupName $rgName -Location  "North Europe" -SecurityRules $rdpRule,$sshRule

$subnetConfig = New-AzVirtualNetworkSubnetConfig -Name Subnet1 -AddressPrefix  10.0.1.0/24 -NetworkSecurityGroup $nsg
$vnet = New-AzVirtualNetwork -Name SAPERPDemoVNet -ResourceGroupName $rgName -Location "North Europe"  -AddressPrefix 10.0.1.0/24 -Subnet $subnetConfig
```

* Tworzenie nowego publicznego adresu IP, kt√≥ry mo≈ºe s≈Çu≈ºyƒá do uzyskiwania dostƒôpu do maszyny wirtualnej z Internetu

```powershell
# Create a public IP address with a DNS name
$pip = New-AzPublicIpAddress -Name SAPERPDemoPIP -ResourceGroupName $rgName -Location "North Europe" -DomainNameLabel $rgName.ToLower() -AllocationMethod Dynamic
```

* Tworzenie nowego interfejsu sieciowego dla maszyny wirtualnej

```powershell
# Create a new Network Interface
$nic = New-AzNetworkInterface -Name SAPERPDemoNIC -ResourceGroupName $rgName -Location "North Europe" -Subnet $vnet.Subnets[0] -PublicIpAddress $pip
```

* Tworzy maszynƒô wirtualnƒÖ. W tym scenariuszu ka≈ºda maszyna wirtualna bƒôdzie mia≈Ça takƒÖ samƒÖ nazwƒô. Identyfikator SID SAP wystƒÖpie≈Ñ SAP NetWeaver w tych maszynach wirtualnych bƒôdzie taka sama. W ramach grupy zasob√≥w platformy Azure nazwa maszyny wirtualnej musi byƒá unikatowa, ale w r√≥≈ºnych grupach zasob√≥w platformy Azure mo≈ºna uruchamiaƒá maszyny wirtualne o tej samej nazwie. Domy≈õlne konto "Administrator" systemu Windows lub "root" dla linuksa jest nieprawid≈Çowe. W zwiƒÖzku z tym nowa nazwa u≈ºytkownika administratora musi byƒá zdefiniowana razem z has≈Çem. Nale≈ºy r√≥wnie≈º zdefiniowaƒá rozmiar maszyny Wirtualnej.

```powershell
#####
# Create a new virtual machine with an official image from the Azure Marketplace
#####
$cred=Get-Credential -Message "Type the name and password of the local administrator account."
$vmconfig = New-AzVMConfig -VMName SAPERPDemo -VMSize Standard_D11

# select image
$vmconfig = Set-AzVMSourceImage -VM $vmconfig -PublisherName "MicrosoftWindowsServer" -Offer "WindowsServer" -Skus "2012-R2-Datacenter" -Version "latest"
$vmconfig = Set-AzVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred -ProvisionVMAgent -EnableAutoUpdate
# $vmconfig = Set-AzVMSourceImage -VM $vmconfig -PublisherName "SUSE" -Offer "SLES-SAP" -Skus "12-SP1" -Version "latest"
# $vmconfig = Set-AzVMSourceImage -VM $vmconfig -PublisherName "RedHat" -Offer "RHEL" -Skus "7.2" -Version "latest"
# $vmconfig = Set-AzVMSourceImage -VM $vmconfig -PublisherName "Oracle" -Offer "Oracle-Linux" -Skus "7.2" -Version "latest"
# $vmconfig = Set-AzVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Add-AzVMNetworkInterface -VM $vmconfig -Id $nic.Id

$vmconfig = Set-AzVMBootDiagnostics -Disable -VM $vmconfig
$vm = New-AzVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

```powershell
#####
# Create a new virtual machine with a VHD that contains the private image that you want to use
#####
$cred=Get-Credential -Message "Type the name and password of the local administrator account."
$vmconfig = New-AzVMConfig -VMName SAPERPDemo -VMSize Standard_D11

$vmconfig = Add-AzVMNetworkInterface -VM $vmconfig -Id $nic.Id

$diskName="osfromimage"
$osDiskUri=$account.PrimaryEndpoints.Blob.ToString() + "vhds/" + $diskName  + ".vhd"

$vmconfig = Set-AzVMOSDisk -VM $vmconfig -Name $diskName -VhdUri $osDiskUri -CreateOption fromImage -SourceImageUri <path to VHD that contains the OS image> -Windows
$vmconfig = Set-AzVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred
#$vmconfig = Set-AzVMOSDisk -VM $vmconfig -Name $diskName -VhdUri $osDiskUri -CreateOption fromImage -SourceImageUri <path to VHD that contains the OS image> -Linux
#$vmconfig = Set-AzVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Set-AzVMBootDiagnostics -Disable -VM $vmconfig
$vm = New-AzVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

```powershell
#####
# Create a new virtual machine with a Managed Disk Image
#####
$cred=Get-Credential -Message "Type the name and password of the local administrator account."
$vmconfig = New-AzVMConfig -VMName SAPERPDemo -VMSize Standard_D11

$vmconfig = Add-AzVMNetworkInterface -VM $vmconfig -Id $nic.Id

$vmconfig = Set-AzVMSourceImage -VM $vmconfig -Id <Id of Managed Disk Image>
$vmconfig = Set-AzVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred
#$vmconfig = Set-AzVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Set-AzVMBootDiagnostics -Disable -VM $vmconfig
$vm = New-AzVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

* Opcjonalnie dodaj dodatkowe dyski i przywr√≥ƒá niezbƒôdnƒÖ zawarto≈õƒá. Wszystkie nazwy obiekt√≥w blob (adresy URL do obiekt√≥w blob) muszƒÖ byƒá unikatowe na platformie Azure.

```powershell
# Optional: Attach additional VHD data disks
$vm = Get-AzVM -ResourceGroupName $rgName -Name SAPERPDemo
$dataDiskUri = $account.PrimaryEndpoints.Blob.ToString() + "vhds/datadisk.vhd"
Add-AzVMDataDisk -VM $vm -Name datadisk -VhdUri $dataDiskUri -DiskSizeInGB 1023 -CreateOption empty | Update-AzVM

# Optional: Attach additional Managed Disks
$vm = Get-AzVM -ResourceGroupName $rgName -Name SAPERPDemo
Add-AzVMDataDisk -VM $vm -Name datadisk -DiskSizeInGB 1023 -CreateOption empty -Lun 0 | Update-AzVM
```

##### <a name="cli"></a>Interfejs wiersza polecenia

Poni≈ºszy przyk≈Çadowy kod mo≈ºe byƒá u≈ºywany w systemie Linux. W systemie Windows u≈ºyj programu PowerShell w spos√≥b opisany powy≈ºej lub dostosuj przyk≈Çad do u≈ºywania %rgName% zamiast $rgName i ustaw zmiennƒÖ ≈õrodowiskowƒÖ za pomocƒÖ *zestawu*polece≈Ñ systemu Windows .

* Tworzenie nowej grupy zasob√≥w dla ka≈ºdego szkolenia/krajobrazu demonstracyjnego

```azurecli
rgName=SAPERPDemo1
rgNameLower=saperpdemo1
az group create --name $rgName --location "North Europe"
```

* Tworzenie nowego konta magazynu

```azurecli
az storage account create --resource-group $rgName --location "North Europe" --kind Storage --sku Standard_LRS --name $rgNameLower
```

* Utw√≥rz nowƒÖ sieƒá wirtualnƒÖ dla ka≈ºdego szkoleniowego/demonstracyjnyego krajobrazu, aby umo≈ºliwiƒá u≈ºycie tej samej nazwy hosta i adres√≥w IP. Sieƒá wirtualna jest chroniona przez sieciowƒÖ grupƒô zabezpiecze≈Ñ, kt√≥ra zezwala tylko na ruch do portu 3389, aby w≈ÇƒÖczyƒá dostƒôp do pulpitu zdalnego i port 22 dla SSH.

```azurecli
az network nsg create --resource-group $rgName --location "North Europe" --name SAPERPDemoNSG
az network nsg rule create --resource-group $rgName --nsg-name SAPERPDemoNSG --name SAPERPDemoNSGRDP --protocol \* --source-address-prefix \* --source-port-range \* --destination-address-prefix \* --destination-port-range 3389 --access Allow --priority 100 --direction Inbound
az network nsg rule create --resource-group $rgName --nsg-name SAPERPDemoNSG --name SAPERPDemoNSGSSH --protocol \* --source-address-prefix \* --source-port-range \* --destination-address-prefix \* --destination-port-range 22 --access Allow --priority 101 --direction Inbound

az network vnet create --resource-group $rgName --name SAPERPDemoVNet --location "North Europe" --address-prefixes 10.0.1.0/24
az network vnet subnet create --resource-group $rgName --vnet-name SAPERPDemoVNet --name Subnet1 --address-prefix 10.0.1.0/24 --network-security-group SAPERPDemoNSG
```

* Tworzenie nowego publicznego adresu IP, kt√≥ry mo≈ºe s≈Çu≈ºyƒá do uzyskiwania dostƒôpu do maszyny wirtualnej z Internetu

```azurecli
az network public-ip create --resource-group $rgName --name SAPERPDemoPIP --location "North Europe" --dns-name $rgNameLower --allocation-method Dynamic
```

* Tworzenie nowego interfejsu sieciowego dla maszyny wirtualnej

```azurecli
az network nic create --resource-group $rgName --location "North Europe" --name SAPERPDemoNIC --public-ip-address SAPERPDemoPIP --subnet Subnet1 --vnet-name SAPERPDemoVNet
```

* Tworzy maszynƒô wirtualnƒÖ. W tym scenariuszu ka≈ºda maszyna wirtualna bƒôdzie mia≈Ça takƒÖ samƒÖ nazwƒô. Identyfikator SID SAP wystƒÖpie≈Ñ SAP NetWeaver w tych maszynach wirtualnych bƒôdzie taka sama. W ramach grupy zasob√≥w platformy Azure nazwa maszyny wirtualnej musi byƒá unikatowa, ale w r√≥≈ºnych grupach zasob√≥w platformy Azure mo≈ºna uruchamiaƒá maszyny wirtualne o tej samej nazwie. Domy≈õlne konto "Administrator" systemu Windows lub "root" dla linuksa jest nieprawid≈Çowe. W zwiƒÖzku z tym nowa nazwa u≈ºytkownika administratora musi byƒá zdefiniowana razem z has≈Çem. Nale≈ºy r√≥wnie≈º zdefiniowaƒá rozmiar maszyny Wirtualnej.

```azurecli
#####
# Create virtual machines using storage accounts
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image MicrosoftWindowsServer:WindowsServer:2012-R2-Datacenter:latest --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image SUSE:SLES-SAP:12-SP1:latest --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image RedHat:RHEL:7.2:latest --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image "Oracle:Oracle-Linux:7.2:latest" --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --authentication-type password

#####
# Create virtual machines using Managed Disks
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image MicrosoftWindowsServer:WindowsServer:2012-R2-Datacenter:latest --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image SUSE:SLES-SAP:12-SP1:latest --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image RedHat:RHEL:7.2:latest --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image "Oracle:Oracle-Linux:7.2:latest" --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --authentication-type password
```

```azurecli
#####
# Create a new virtual machine with a VHD that contains the private image that you want to use
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --os-type Windows --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --image <path to image vhd>
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --os-type Linux --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --image <path to image vhd> --authentication-type password

#####
# Create a new virtual machine with a Managed Disk Image
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --image <managed disk image id>
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --image <managed disk image id> --authentication-type password
```

* Opcjonalnie dodaj dodatkowe dyski i przywr√≥ƒá niezbƒôdnƒÖ zawarto≈õƒá. Wszystkie nazwy obiekt√≥w blob (adresy URL do obiekt√≥w blob) muszƒÖ byƒá unikatowe na platformie Azure.

```azurecli
# Optional: Attach additional VHD data disks
az vm unmanaged-disk attach --resource-group $rgName --vm-name SAPERPDemo --size-gb 1023 --vhd-uri https://$rgNameLower.blob.core.windows.net/vhds/data.vhd  --new

# Optional: Attach additional Managed Disks
az vm disk attach --resource-group $rgName --vm-name SAPERPDemo --size-gb 1023 --disk datadisk --new
```

##### <a name="template"></a>Szablon

Przyk≈Çadowych szablon√≥w mo≈ºna u≈ºyƒá w repozytorium szablon√≥w szybkiej sieci azure w us≈Çudze GitHub.

* [Prosta maszyna wirtualna z systemem Linux](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-simple-linux)
* [Prosta maszyna wirtualna systemu Windows](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-simple-windows)
* [Maszyna wirtualna z obrazu](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image)

### <a name="implement-a-set-of-vms-that-communicate-within-azure"></a>Implementowanie zestawu maszyn wirtualnych komunikujych na platformie Azure

Ten scenariusz niebrydyjny jest typowym scenariuszem do cel√≥w szkoleniowych i demonstracyjnych, w kt√≥rym oprogramowanie reprezentujƒÖce scenariusz demo/szkolenia jest roz≈Ço≈ºone na wiele maszyn wirtualnych. R√≥≈ºne sk≈Çadniki zainstalowane w r√≥≈ºnych maszynach wirtualnych muszƒÖ komunikowaƒá siƒô ze sobƒÖ. Ponownie w tym scenariuszu nie jest wymagana komunikacja sieci lokalnej ani scenariusz miƒôdzylokacyjnie.

Ten scenariusz jest rozszerzenie instalacji opisane w rozdziale [Pojedyncza maszyna wirtualna z SAP NetWeaver scenariusz demo/szkolenia][planning-guide-7.1] tego dokumentu. W takim przypadku wiƒôcej maszyn wirtualnych zostanie dodanych do istniejƒÖcej grupy zasob√≥w. W poni≈ºszym przyk≈Çadzie poziom szkolenia sk≈Çada siƒô z maszyny wirtualnej SAP ASCS/SCS, maszyny Wirtualnej z uruchomionym systemem dbms i wystƒÖpienia serwera aplikacji SAP.

Przed utworzeniem tego scenariusza nale≈ºy pomy≈õleƒá o podstawowych ustawie≈Ñ, jak ju≈º wykonywane w scenariuszu przed.

#### <a name="resource-group-and-virtual-machine-naming"></a>Nazewnictwo grupy zasob√≥w i maszyny wirtualnej

Wszystkie nazwy grup zasob√≥w muszƒÖ byƒá unikatowe. Opracowanie w≈Çasnego schematu nazewnictwa zasob√≥w, takich jak `<rg-name`>-sufiks.

Nazwa maszyny wirtualnej musi byƒá unikatowa w grupie zasob√≥w.

#### <a name="set-up-network-for-communication-between-the-different-vms"></a>Konfigurowanie sieci do komunikacji miƒôdzy r√≥≈ºnymi maszynami wirtualnymi

![Zestaw maszyn wirtualnych w sieci wirtualnej platformy Azure][planning-guide-figure-1900]

Aby zapobiec nazywaniu kolizji z klonami tych samych krajobraz√≥w szkoleniowych/demonstracyjnych, nale≈ºy utworzyƒá sieƒá wirtualnƒÖ platformy Azure dla ka≈ºdego ≈õrodowiska. Rozpoznawanie nazw DNS zostanie dostarczone przez platformƒô Azure lub mo≈ºna skonfigurowaƒá w≈Çasny serwer DNS poza platformƒÖ Azure (nie do dalszego om√≥wienia tutaj). W tym scenariuszu nie konfigurujemy w≈Çasnego systemu DNS. Dla wszystkich maszyn wirtualnych wewnƒÖtrz jednej sieci wirtualnej platformy Azure komunikacja za po≈õrednictwem nazwy host√≥w zostanie w≈ÇƒÖczona.

Powody, dla kt√≥rych warto oddzieliƒá ≈õrodowisko szkoleniowe lub demonstratyczne przez sieci wirtualne, a nie tylko grupy zasob√≥w, mogƒÖ byƒá nastƒôpujƒÖce:

* Krajobraz SAP w miarƒô konfiguracji wymaga w≈Çasnego ad/OpenLDAP, a serwer domeny musi byƒá czƒô≈õciƒÖ ka≈ºdego krajobrazu.  
* Krajobraz SAP w konfiguracji ma sk≈Çadniki, kt√≥re muszƒÖ pracowaƒá ze sta≈Çymi adresami IP.

Wiƒôcej szczeg√≥≈Ç√≥w na temat sieci wirtualnych platformy Azure i sposobu ich definiowania mo≈ºna znale≈∫ƒá w [tym artykule][virtual-networks-create-vnet-arm-pportal].

## <a name="deploying-sap-vms-with-corporate-network-connectivity-cross-premises"></a>Wdra≈ºanie maszyn wirtualnych SAP z ≈ÇƒÖczno≈õciƒÖ sieciowƒÖ firmy (miƒôdzy lokalizacjami)

Uruchom ≈õrodowisko SAP i chcesz podzieliƒá wdro≈ºenie miƒôdzy go≈Çym poziomem dla zaawansowanych serwer√≥w DBMS, lokalnie zwirtualizowanymi ≈õrodowiskami dla warstw aplikacji i mniejszymi 2-warstwowymi skonfigurowanymi systemami SAP i us≈ÇugƒÖ Azure IaaS. Podstawowym za≈Ço≈ºeniem jest to, ≈ºe systemy SAP w ramach jednego ≈õrodowiska SAP muszƒÖ komunikowaƒá siƒô ze sobƒÖ i z wieloma innymi sk≈Çadnikami oprogramowania wdro≈ºonymi w firmie, niezale≈ºnie od ich formularza wdra≈ºania. Nie powinno byƒá r√≥wnie≈º ≈ºadnych r√≥≈ºnic wprowadzonych przez formularz wdro≈ºenia dla u≈ºytkownika ko≈Ñcowego ≈ÇƒÖczƒÖcego siƒô z interfejsem U≈ªYTKOWNIKA SAP lub innymi interfejsami. Te warunki mogƒÖ byƒá spe≈Çnione tylko wtedy, gdy mamy lokalne us≈Çugi Active Directory/OpenLDAP i US≈ÅUGI DNS rozszerzone na systemy platformy Azure za po≈õrednictwem ≈ÇƒÖczno≈õci lokacja-lokacja/wiele lokacji lub po≈ÇƒÖcze≈Ñ prywatnych, takich jak Azure ExpressRoute.



### <a name="scenario-of-an-sap-landscape"></a>Scenariusz krajobrazu SAP

Scenariusz miƒôdzypomieszcze≈Ñ lub hybrydowych mo≈ºe byƒá z grubsza opisane w grafice poni≈ºej:

![≈ÅƒÖczno≈õƒá miƒôdzy lokacjami a zasobami platformy Azure][planning-guide-figure-2100]

Minimalnym wymaganiem jest u≈ºycie bezpiecznych protoko≈Ç√≥w komunikacyjnych, takich jak SSL/TLS dla dostƒôpu do przeglƒÖdarki lub po≈ÇƒÖcze≈Ñ opartych na sieci VPN w celu uzyskania dostƒôpu systemowego do us≈Çug platformy Azure. Za≈Ço≈ºenie jest takie, ≈ºe firmy obs≈ÇugujƒÖ po≈ÇƒÖczenie sieci VPN miƒôdzy sieciƒÖ firmowƒÖ a platformƒÖ Azure w inny spos√≥b. Niekt√≥re firmy mogƒÖ otwieraƒá wszystkie porty. Niekt√≥re inne firmy mogƒÖ chcieƒá dok≈Çadnie otworzyƒá porty itp.

W poni≈ºszej tabeli znajdujƒÖ siƒô typowe porty komunikacyjne SAP. Zasadniczo wystarczy otworzyƒá port bramy SAP.

<!-- sapms is prefix of a SAP service name and not a spelling error -->

| Us≈Çuga | Nazwa portu | Przyk≈Çad `<nn`> = 01 | Domy≈õlny zakres (min-max) | Komentarz |
| --- | --- | --- | --- | --- |
| Dyspozytora |sapdp`<nn>` zobaczyƒá * |3201 |3200 - 3299 |Sap Dyspozytor, u≈ºywany przez SAP GUI dla Windows i Java |
| Serwer wiadomo≈õci |sapms`<sid`> zobaczyƒá ** |3600 |darmowe sapms`<anySID`> |sid = SAP-System-ID |
| Brama |sapgw`<nn`> zobaczyƒá * |3301 |free |Brama SAP, u≈ºywana do komunikacji CPIC i RFC |
| Router SAP |sapdp99 |3299 |free |Tylko CI (wystƒÖpienie centralne) Nazwy us≈Çug mo≈ºna ponownie przypisaƒá w /etc/services do dowolnej warto≈õci po instalacji. |

*) nn = numer wystƒÖpienia SAP

**) sid = SAP-System-ID

Bardziej szczeg√≥≈Çowe informacje na temat port√≥w wymaganych dla r√≥≈ºnych <https://scn.sap.com/docs/DOC-17124>produkt√≥w SAP lub us≈Çug przez produkty SAP mo≈ºna znale≈∫ƒá tutaj .
Za pomocƒÖ tego dokumentu powinno byƒá mo≈ºliwe otwieranie dedykowanych port√≥w w urzƒÖdzeniu sieci VPN niezbƒôdnych dla okre≈õlonych produkt√≥w i scenariuszy SAP.

Inne ≈õrodki zabezpiecze≈Ñ podczas wdra≈ºania maszyn wirtualnych w takim scenariuszu mo≈ºe byƒá utworzenie [sieciowej grupy zabezpiecze≈Ñ][virtual-networks-nsg] do definiowania regu≈Ç dostƒôpu.



#### <a name="printing-on-a-local-network-printer-from-sap-instance-in-azure"></a>Drukowanie na lokalnej drukarce sieciowej z wystƒÖpienia SAP na platformie Azure

##### <a name="printing-over-tcpip-in-cross-premises-scenario"></a>Drukowanie za 1/4 TCP w scenariuszu miƒôdzylokacyjnie

Konfigurowanie lokalnych drukarek sieciowych opartych na protoko>>> TCP/IP na maszynie Wirtualnej platformy Azure jest og√≥lnie takie samo jak w sieci firmowej, przy za≈Ço≈ºeniu, ≈ºe masz tunel lokacji do lokalizacji sieci VPN lub nawiƒÖzane po≈ÇƒÖczenie Us≈Çugi ExpressRoute.

---
> ![Windows][Logo_Windows] Windows
>
> W tym celu:
>
> * Niekt√≥re drukarki sieciowe sƒÖ wyposa≈ºone w kreatora konfiguracji, kt√≥ry u≈Çatwia konfigurowanie drukarki na maszynie Wirtualnej platformy Azure. Je≈õli z drukarkƒÖ nie zosta≈Ço rozes≈Çane ≈ºadne oprogramowanie kreatora, rƒôcznym sposobem skonfigurowania drukarki jest utworzenie nowego portu drukarki TCP/IP.
> * Otw√≥rz Panel sterowania - > urzƒÖdzenia i drukarki - > Dodaj drukarkƒô
> * Wybieranie opcji Dodaj drukarkƒô przy u≈ºyciu adresu TCP/IP lub nazwy hosta
> * Wpisz adres IP drukarki
> * Standard portu drukarki 9100
> * W razie potrzeby zainstaluj odpowiedni sterownik drukarki rƒôcznie.
>
> ![Linux][Logo_Linux] Linux
>
> * jak w przypadku systemu Windows, postƒôpuj zgodnie ze standardowƒÖ procedurƒÖ instalowania drukarki sieciowej
> * wystarczy postƒôpowaƒá zgodnie z publicznymi przewodnikami linuksowymi dla [SUSE](https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_y2_hw_print.html) lub [Red Hat i Oracle Linux,](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sec-Printer_Configuration.html) aby dodawaƒá drukarkƒô.
>
>

---
![Drukowanie sieciowe][planning-guide-figure-2200]

##### <a name="host-based-printer-over-smb-shared-printer-in-cross-premises-scenario"></a>Drukarka oparta na ho≈õcie za oknem SMB (drukarka udostƒôpniona) w scenariuszu miƒôdzylokacjowym

Drukarki hosta nie sƒÖ zgodne z sieciƒÖ zgodnie z projektem. Ale drukarka oparta na ho≈õcie mo≈ºe byƒá wsp√≥≈Çu≈ºytkowana miƒôdzy komputerami w sieci, o ile jest pod≈ÇƒÖczona do komputera pod≈ÇƒÖczonego. Po≈ÇƒÖcz sieƒá firmowƒÖ od strony lokacji lub us≈Çugi ExpressRoute i udostƒôpnij drukarkƒô lokalnƒÖ. Protok√≥≈Ç SMB u≈ºywa systemu NetBIOS zamiast us≈Çugi DNS jako us≈Çugi nazw. Nazwa hosta NetBIOS mo≈ºe siƒô r√≥≈ºniƒá od nazwy hosta DNS. Standardowa obudowa jest taka, ≈ºe nazwa hosta NetBIOS i nazwa hosta DNS sƒÖ identyczne. Domena DNS nie ma sensu w obszarze nazw NetBIOS. W zwiƒÖzku z tym w obszarze nazw NetBIOS nie mo≈ºna u≈ºywaƒá w pe≈Çni kwalifikowanej nazwy hosta DNS sk≈ÇadajƒÖcej siƒô z nazwy hosta DNS i domeny DNS.

Udzia≈Ç drukarki jest identyfikowany przez unikatowƒÖ nazwƒô w sieci:

* Nazwa hosta hosta SMB (zawsze potrzebne).
* Nazwa udzia≈Çu (zawsze potrzebne).
* Nazwa domeny, je≈õli udzia≈Ç drukarki nie znajduje siƒô w tej samej domenie co system SAP.
* Ponadto do uzyskania dostƒôpu do udzia≈Çu drukarki mo≈ºe byƒá wymagana nazwa u≈ºytkownika i has≈Ço.

Instrukcje:

---
> ![Windows][Logo_Windows] Windows
>
> Udostƒôpnij lokalnƒÖ drukarkƒô.
> Na maszynie Wirtualnej platformy Azure otw√≥rz Eksploratora Windows i wpisz nazwƒô udzia≈Çu drukarki.
> Kreator instalacji drukarki przeprowadzi Ciƒô przez proces instalacji.
>
> ![Linux][Logo_Linux] Linux
>
> Oto kilka przyk≈Çad√≥w dokumentacji dotyczƒÖcej konfigurowania drukarek sieciowych w systemie Linux lub w tym rozdzia≈Ç dotyczƒÖcy drukowania w systemie Linux. Bƒôdzie dzia≈Çaƒá w ten sam spos√≥b na maszynie Wirtualnej systemu Azure z systemem Linux, o ile maszyna wirtualna jest czƒô≈õciƒÖ sieci VPN:
>
> * Sles<https://en.opensuse.org/SDB:Printing_via_SMB_(Samba)_Share_or_Windows_Share>
> * RHEL lub Oracle Linux<https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sec-Printer_Configuration.html#s1-printing-smb-printer>
>
>

---
##### <a name="usb-printer-printer-forwarding"></a>Drukarka USB (przekazywanie drukarek)

Na platformie Azure mo≈ºliwo≈õƒá us≈Çug pulpitu zdalnego, aby zapewniƒá u≈ºytkownikom dostƒôp do swoich urzƒÖdze≈Ñ drukarki lokalnej w sesji zdalnej nie jest dostƒôpna.

---
> ![Windows][Logo_Windows] Windows
>
> Wiƒôcej informacji na temat drukowania <https://technet.microsoft.com/library/jj590748.aspx>za pomocƒÖ systemu Windows mo≈ºna znale≈∫ƒá tutaj: .
>
>

---
#### <a name="integration-of-sap-azure-systems-into-correction-and-transport-system-tms-in-cross-premises"></a>Integracja system√≥w SAP Azure z systemem korekcji i transportu (TMS) w r√≥≈ºnych pomieszczeniach

Sap Change and Transport System (TMS) musi byƒá skonfigurowany do eksportowania i importowania ≈ºƒÖda≈Ñ transportu miƒôdzy systemami w krajobrazie. Zak≈Çadamy, ≈ºe wystƒÖpienia programistyczne systemu SAP (DEV) znajdujƒÖ siƒô na platformie Azure, podczas gdy zapewnienie jako≈õci (QA) i systemy produkcyjne (PRD) sƒÖ lokalne. Ponadto zak≈Çadamy, ≈ºe istnieje centralny katalog transportowy.

##### <a name="configuring-the-transport-domain"></a>Konfigurowanie domeny transportu

Skonfiguruj domenƒô transportu w systemie wyznaczonym jako kontroler domeny transportu, zgodnie z [opisem w temacie Konfigurowanie kontrolera domeny transportu](https://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm). Zostanie utworzony u≈ºytkownik systemu TMSADM i zostanie wygenerowany wymagany cel docelowy RFC. Mo≈ºna sprawdziƒá te po≈ÇƒÖczenia RFC przy u≈ºyciu transakcji SM59. Rozdzielczo≈õƒá nazwy hosta musi byƒá w≈ÇƒÖczona w ca≈Çej domenie transportu.

Instrukcje:

* W naszym scenariuszu zdecydowali≈õmy, ≈ºe lokalnym systemem QAS bƒôdzie kontroler domeny CTS. Wywo≈Çanie transakcji STMS. Zostanie wy≈õwietlone okno dialogowe TMS. Zostanie wy≈õwietlone okno dialogowe Konfigurowanie domeny transportu. (To okno dialogowe jest wy≈õwietlane tylko wtedy, gdy domena transportu nie zosta≈Ça jeszcze skonfigurowana).
* Upewnij siƒô, ≈ºe automatycznie utworzony u≈ºytkownik TMSADM jest autoryzowany (SM59 -> ABAP Connection -> TMSADM@E61.DOMAIN_E61 -> Details -> Utilities(M) -> Authorization Test). PoczƒÖtkowy ekran transakcji STMS powinien pokazaƒá, ≈ºe ten system SAP dzia≈Ça teraz jako kontroler domeny transportu, jak pokazano poni≈ºej:

![PoczƒÖtkowy ekran transakcji STMS na kontrolerze domeny][planning-guide-figure-2300]

#### <a name="including-sap-systems-in-the-transport-domain"></a>Uwzglƒôdnienie system√≥w SAP w domenie transportu

Sekwencja do≈ÇƒÖczania systemu SAP do domeny transportu wyglƒÖda nastƒôpujƒÖco:

* W systemie DEV na platformie Azure przejd≈∫ do systemu transportu (klient 000) i wywo≈Çaj us≈Çugƒô STMS. Z okna dialogowego wybierz pozycjƒô Inna konfiguracja i kontynuuj do≈ÇƒÖczanie systemu do domeny. Okre≈õl kontroler domeny jako hosta docelowego[(w tym systemy SAP w domenie transportu).](https://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0c17acc11d1899e0000e829fbbd/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm) System oczekuje teraz na uwzglƒôdnienie w domenie transportu.
* Ze wzglƒôd√≥w bezpiecze≈Ñstwa nale≈ºy wr√≥ciƒá do kontrolera domeny, aby potwierdziƒá ≈ºƒÖdanie. Wybierz pozycjƒô Om√≥wienie systemu i Zatwierd≈∫ system oczekujƒÖcy. Nastƒôpnie potwierd≈∫ monit, a konfiguracja zostanie rozes≈Çana.

Ten system SAP zawiera teraz niezbƒôdne informacje o wszystkich innych systemach SAP w domenie transportu. W tym samym czasie dane adresowe nowego systemu SAP sƒÖ wysy≈Çane do wszystkich innych system√≥w SAP, a system SAP jest wprowadzany do profilu transportu programu kontroli transportu. Sprawd≈∫, czy kontrolery RFC i dostƒôp do katalogu transportu domeny dzia≈ÇajƒÖ.

Kontynuuj konfiguracjƒô systemu transportowego w zwyk≈Çy spos√≥b, jak opisano w dokumentacji [Change and Transport System](https://help.sap.com/saphelp_nw70ehp3/helpdata/en/48/c4300fca5d581ce10000000a42189c/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm).

Instrukcje:

* Upewnij siƒô, ≈ºe lokalny system STMS jest poprawnie skonfigurowany.
* Upewnij siƒô, ≈ºe nazwa hosta kontrolera domeny transportu mo≈ºe byƒá rozpoznawana przez maszynƒô wirtualnƒÖ na platformie Azure i wizie vice.
* Wywo≈Çanie transakcji STMS -> Inne konfiguracje -> uwzglƒôdniƒá system w domenie.
* Potwierd≈∫ po≈ÇƒÖczenie w lokalnym systemie TMS.
* Skonfiguruj trasy transportu, grupy i warstwy w zwyk≈Çy spos√≥b.

W scenariuszach po≈ÇƒÖczonych miƒôdzy lokacjami miƒôdzy lokalami op√≥≈∫nienie miƒôdzy ≈õrodowiskiem lokalnym a platformƒÖ Azure nadal mo≈ºe byƒá znaczne. Je≈õli bƒôdziemy ≈õledziƒá sekwencjƒô transportu obiekt√≥w poprzez rozw√≥j i testy system√≥w do produkcji lub my≈õleƒá o zastosowaniu transport√≥w lub pakiet√≥w wsparcia do r√≥≈ºnych system√≥w, zdajesz sobie sprawƒô, ≈ºe w zale≈ºno≈õci od lokalizacji centralnego katalogu transportu, niekt√≥re systemy napotykajƒÖ du≈ºe op√≥≈∫nienia odczytu lub zapisu danych w centralnym katalogu transportu. Sytuacja jest podobna do konfiguracji krajobrazowych SAP, w kt√≥rych r√≥≈ºne systemy sƒÖ roz≈Ço≈ºone w r√≥≈ºnych centrach danych ze znacznƒÖ odleg≈Ço≈õciƒÖ miƒôdzy centrami danych.

Aby obej≈õƒá takie op√≥≈∫nienie i mieƒá systemy dzia≈ÇajƒÖ szybko w odczytie lub zapisie do lub z katalogu transportu, mo≈ºna skonfigurowaƒá dwie domeny transportu STMS (jeden dla lokalnych i jeden z systemami na platformie Azure i po≈ÇƒÖczyƒá domen transportu. Proszƒô sprawdziƒá tƒô dokumentacjƒô, kt√≥ra wyja≈õnia zasady le≈ºƒÖce u <https://help.sap.com/saphelp_me60/helpdata/en/c4/6045377b52253de10000009b38f889/content.htm?frameset=/en/57/38dd924eb711d182bf0000e829fbfe/frameset.htm>podstaw tej koncepcji w SAP TMS: .

Instrukcje:

* Konfigurowanie domeny transportu w ka≈ºdej lokalizacji (lokalnej i azure) przy u≈ºyciu us≈Çugi STMS transakcji<https://help.sap.com/saphelp_nw70ehp3/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm>
* Po≈ÇƒÖcz domeny z ≈ÇƒÖczem domeny i potwierd≈∫ ≈ÇƒÖcze miƒôdzy dwiema domenami.
  <https://help.sap.com/saphelp_nw73ehp1/helpdata/en/a3/139838280c4f18e10000009b38f8cf/content.htm>
* Roz≈Ç√≥≈º konfiguracjƒô do po≈ÇƒÖczonego systemu.

#### <a name="rfc-traffic-between-sap-instances-located-in-azure-and-on-premises-cross-premises"></a>Ruch RFC miƒôdzy wystƒÖpieniami SAP znajdujƒÖcymi siƒô na platformie Azure i lokalnie (miƒôdzy lokalizacjami)

Ruch RFC miƒôdzy systemami, kt√≥re sƒÖ lokalne i na platformie Azure musi dzia≈Çaƒá. Aby skonfigurowaƒá transakcjƒô wywo≈Çania po≈ÇƒÖczenia SM59 w systemie ≈∫r√≥d≈Çowym, w kt√≥rym nale≈ºy zdefiniowaƒá po≈ÇƒÖczenie RFC do systemu docelowego. Konfiguracja jest podobna do standardowej konfiguracji po≈ÇƒÖczenia RFC.

Zak≈Çadamy, ≈ºe w scenariuszu miƒôdzy ≈õrodowiskami, maszyny wirtualne, kt√≥re uruchamiajƒÖ systemy SAP, kt√≥re muszƒÖ komunikowaƒá siƒô ze sobƒÖ, znajdujƒÖ siƒô w tej samej domenie. W zwiƒÖzku z tym konfiguracja po≈ÇƒÖczenia RFC miƒôdzy systemami SAP nie r√≥≈ºni siƒô od krok√≥w instalacji i danych wej≈õciowych w scenariuszach lokalnych.

#### <a name="accessing-local-fileshares-from-sap-instances-located-in-azure-or-vice-versa"></a>Uzyskiwanie dostƒôpu do lokalnych udzia≈Ç√≥w plik√≥w z wystƒÖpie≈Ñ SAP znajdujƒÖcych siƒô na platformie Azure lub odwrotnie

WystƒÖpienia SAP znajdujƒÖce siƒô na platformie Azure muszƒÖ uzyskiwaƒá dostƒôp do udzia≈Ç√≥w plik√≥w, kt√≥re znajdujƒÖ siƒô w pomieszczeniach firmowych. Ponadto lokalne wystƒÖpienia SAP muszƒÖ uzyskaƒá dostƒôp do udzia≈Ç√≥w plik√≥w, kt√≥re znajdujƒÖ siƒô na platformie Azure. Aby w≈ÇƒÖczyƒá udzia≈Çy plik√≥w, nale≈ºy skonfigurowaƒá uprawnienia i opcje udostƒôpniania w systemie lokalnym. Upewnij siƒô, ≈ºe otworzysz porty w sieci VPN lub po≈ÇƒÖczeniu Us≈Çugi ExpressRoute miƒôdzy platformƒÖ Azure a centrum danych.

## <a name="supportability"></a>Mo≈ºliwo≈õci obs≈Çugi

### <a name="azure-extension-for-sap"></a><a name="6f0a47f3-a289-4090-a053-2521618a28c3"></a>Rozszerzenie platformy Azure dla systemu SAP

Aby przekazaƒá czƒô≈õƒá informacji o infrastrukturze platformy Azure o krytycznych systemach SAP do wystƒÖpie≈Ñ agenta hosta SAP, zainstalowanych na maszynach wirtualnych, rozszerzenie platformy Azure (VM) dla sap musi zostaƒá zainstalowane dla wdro≈ºonych maszyn wirtualnych. Poniewa≈º wymagania sap by≈Çy specyficzne dla aplikacji SAP, firma Microsoft postanowi≈Ça nie implementowaƒá og√≥lnie wymaganych funkcji na platformie Azure, ale pozostawiƒá klientom wdro≈ºenie niezbƒôdnego rozszerzenia maszyny wirtualnej i konfiguracji na uruchomionych maszynach wirtualnych na platformie Azure. Jednak wdra≈ºanie i zarzƒÖdzanie cyklem ≈ºycia rozszerzenia maszyny wirtualnej platformy Azure dla sap bƒôdzie w wiƒôkszo≈õci zautomatyzowane przez platformƒô Azure.

#### <a name="solution-design"></a>Projekt rozwiƒÖzania

RozwiƒÖzanie opracowane w celu umo≈ºliwienia agentowi hosta SAP uzyskiwania wymaganych informacji jest oparte na architekturze platformy Azure VM Agent i rozszerzenie. IdeƒÖ platformy Agent maszyny Wirtualnej platformy Azure i rozszerzenia jest umo≈ºliwienie instalacji aplikacji dostƒôpnych w galerii rozszerzenia maszyny Wirtualnej platformy Azure w ramach maszyny Wirtualnej. IdeƒÖ tej koncepcji jest umo≈ºliwienie (w przypadkach takich jak rozszerzenie platformy Azure dla SAP), wdro≈ºenie specjalnych funkcji na maszynie wirtualnej i konfiguracja takiego oprogramowania w czasie wdra≈ºania.

"Agent maszyny wirtualnej platformy Azure", kt√≥ry umo≈ºliwia obs≈Çugƒô okre≈õlonych rozszerze≈Ñ maszyn wirtualnych platformy Azure w ramach maszyny wirtualnej jest wstrzykiwany do maszyn wirtualnych systemu Windows domy≈õlnie podczas tworzenia maszyn wirtualnych w witrynie Azure portal. W przypadku SUSE, Red Hat lub Oracle Linux agent maszyny Wirtualnej jest ju≈º czƒô≈õciƒÖ obrazu portalu Azure Marketplace. W przypadku, gdy mo≈ºna przekazaƒá maszynƒô wirtualnƒÖ z systemem Linux z lokalnego do platformy Azure agent maszyny Wirtualnej musi byƒá zainstalowany rƒôcznie.

Podstawowe bloki konstrukcyjne rozwiƒÖzania zapewniajƒÖcego agentowi sap hosta platformy SAP informacje o infrastrukturze platformy Azure wyglƒÖda nastƒôpujƒÖco:

![Sk≈Çadniki rozszerzenia platformy Microsoft Azure][planning-guide-figure-2400]

Jak pokazano na powy≈ºszym diagramie blokowym, jedna czƒô≈õƒá rozwiƒÖzania jest hostowana w obrazie maszyny wirtualnej platformy Azure i galerii rozszerze≈Ñ platformy Azure, kt√≥re jest globalnie replikowanym repozytorium zarzƒÖdzanym przez us≈Çugƒô Azure Operations. Jest odpowiedzialny za wsp√≥lny zesp√≥≈Ç SAP/MS pracujƒÖcy nad implementacjƒÖ platformy Azure sap do pracy z us≈ÇugƒÖ Azure Operations, aby opublikowaƒá nowe wersje rozszerzenia platformy Azure dla SAP.

Po wdro≈ºeniu nowej maszyny Wirtualnej systemu Windows agent maszyny wirtualnej platformy Azure jest automatycznie dodawany do maszyny Wirtualnej. Funkcja tego agenta jest koordynowanie ≈Çadowania i konfiguracji rozszerzenia platformy Azure maszyn wirtualnych. W przypadku maszyn wirtualnych z systemem Linux agent maszyny wirtualnej platformy Azure jest ju≈º czƒô≈õciƒÖ obrazu systemu operacyjnego portalu Azure Marketplace.

Istnieje jednak krok, kt√≥ry nadal musi byƒá wykonany przez klienta. Jest to w≈ÇƒÖczenie i konfiguracja kolekcji wydajno≈õci. Proces zwiƒÖzany z konfiguracjƒÖ jest zautomatyzowany przez skrypt programu PowerShell lub polecenie interfejsu wiersza polecenia. Skrypt programu PowerShell mo≈ºna pobraƒá w Centrum skrypt√≥w platformy Microsoft Azure zgodnie z opisem w [Przewodniku wdra≈ºania][deployment-guide].

Og√≥lna architektura rozszerzenia platformy Azure dla sap wyglƒÖda nastƒôpujƒÖco:

![rozszerzenie platformy Azure dla sap ][planning-guide-figure-2500]

**Aby uzyskaƒá szczeg√≥≈Çowe instrukcje i szczeg√≥≈Çowe instrukcje korzystania z tych polece≈Ñ cmdlet programu PowerShell lub polecenia interfejsu wiersza polecenia podczas wdro≈ºe≈Ñ, postƒôpuj zgodnie z instrukcjami podanymi w [Przewodniku wdra≈ºania][deployment-guide].**

### <a name="integration-of-azure-located-sap-instance-into-saprouter"></a>Integracja wystƒÖpienia SAP z us≈ÇugƒÖ SAProuter

Sap wystƒÖpie≈Ñ dzia≈ÇajƒÖcych na platformie Azure muszƒÖ byƒá dostƒôpne z SAProuter, jak r√≥wnie≈º.

![Po≈ÇƒÖczenie sieciowe SAP-Router][planning-guide-figure-2600]

A SAProuter umo≈ºliwia komunikacjƒô TCP/IP miƒôdzy systemami uczestniczƒÖcymi, je≈õli nie ma bezpo≈õredniego po≈ÇƒÖczenia IP. Zapewnia to tƒô zaletƒô, ≈ºe na poziomie sieci nie jest konieczne po≈ÇƒÖczenie end-to-end miƒôdzy partnerami komunikacyjnymi. SAProuter domy≈õlnie nas≈Çuchuje na porcie 3299.
Aby po≈ÇƒÖczyƒá wystƒÖpienia SAP za po≈õrednictwem SAProuter, nale≈ºy podaƒá ciƒÖg SAProuter i nazwƒô hosta z ka≈ºdƒÖ pr√≥bƒÖ nawiƒÖzania po≈ÇƒÖczenia.

## <a name="sap-netweaver-as-java"></a>SAP NetWeaver AS Java

Do tej pory g≈Ç√≥wnym tematem dokumentu by≈Ç SAP NetWeaver w og√≥le lub stos SAP NetWeaver ABAP. W tej ma≈Çej sekcji znajdujƒÖ siƒô szczeg√≥≈Çowe zagadnienia dotyczƒÖce stosu SAP Java. JednƒÖ z najwa≈ºniejszych aplikacji opartych wy≈ÇƒÖcznie na sap NetWeaver Java jest SAP Enterprise Portal. Inne aplikacje oparte na SAP NetWeaver, takie jak SAP PI i SAP Solution Manager, u≈ºywajƒÖ stos√≥w SAP NetWeaver ABAP i Java. W zwiƒÖzku z tym z pewno≈õciƒÖ istnieje potrzeba rozwa≈ºenia konkretnych aspekt√≥w zwiƒÖzanych ze stosem SAP NetWeaver Java.

### <a name="sap-enterprise-portal"></a>SAP Enterprise Portal

Konfiguracja portalu SAP na maszynie wirtualnej platformy Azure nie r√≥≈ºni siƒô od instalacji lokalnej, je≈õli wdra≈ºasz w scenariuszach miƒôdzylokacyjnych. Poniewa≈º dns jest wykonywany przez lokalnie, ustawienia portu poszczeg√≥lnych wystƒÖpie≈Ñ mo≈ºna wykonaƒá jako skonfigurowane lokalnie. Zalecenia i ograniczenia opisane w tym dokumencie do tej pory majƒÖ zastosowanie do aplikacji, takich jak SAP Enterprise Portal lub SAP NetWeaver Java stosu w og√≥le.

![Ods≈Çoniƒôty portal SAP][planning-guide-figure-2700]

Specjalny scenariusz wdra≈ºania przez niekt√≥rych klient√≥w to bezpo≈õrednia ekspozycja sap enterprise portal do Internetu, podczas gdy host maszyny wirtualnej jest pod≈ÇƒÖczony do sieci firmy za po≈õrednictwem tunelu sieci VPN lokacja lokacja lub us≈Çugi ExpressRoute. W takim scenariuszu nale≈ºy upewniƒá siƒô, ≈ºe okre≈õlone porty sƒÖ otwarte i nie sƒÖ blokowane przez zaporƒô lub sieciowƒÖ grupƒô zabezpiecze≈Ñ. 

PoczƒÖtkowa warto≈õƒá URI portalu`<Portalserver` to http(s):>:5XX00/irj, gdzie port jest <https://help.sap.com/saphelp_nw70ehp1/helpdata/de/a2/f9d7fed2adc340ab462ae159d19509/frameset.htm>tworzony zgodnie z dokumentami SAP w .

![Konfiguracja punktu ko≈Ñcowego][planning-guide-figure-2800]

Je≈õli chcesz dostosowaƒá adres URL i/lub porty us≈Çugi SAP Enterprise Portal, zapoznaj siƒô z tƒÖ dokumentacjƒÖ:

* [Zmie≈Ñ adres URL portalu](https://wiki.scn.sap.com/wiki/display/EP/Change+Portal+URL)
* [Zmienianie domy≈õlnych numer√≥w port√≥w, numery port√≥w portalu](https://wiki.scn.sap.com/wiki/display/NWTech/Change+Default++port+numbers%2C+Portal+port+numbers)

## <a name="high-availability-ha-and-disaster-recovery-dr-for-sap-netweaver-running-on-azure-virtual-machines"></a>Wysoka dostƒôpno≈õƒá (HA) i odzyskiwanie po awarii (DR) dla sap NetWeaver uruchomionego na maszynach wirtualnych platformy Azure

### <a name="definition-of-terminologies"></a>Definicja terminologii

Termin **wysoka dostƒôpno≈õƒá (HA)** jest zazwyczaj zwiƒÖzany z zestawem technologii, kt√≥re minimalizujƒÖ zak≈Ç√≥cenia it, zapewniajƒÖc ciƒÖg≈Ço≈õƒá dzia≈Çania us≈Çug IT za po≈õrednictwem nadmiarowych, odpornych na uszkodzenia lub sk≈Çadnik√≥w chronionych przed awariƒÖ w **tym samym** centrum danych. W naszym przypadku w ramach jednego regionu platformy Azure.

**Odzyskiwanie po awarii (DR)** jest r√≥wnie≈º ukierunkowane na minimalizacjƒô zak≈Ç√≥ce≈Ñ w us≈Çugach IT i ich odzyskiwanie, ale w **r√≥≈ºnych** centrach danych, kt√≥re zwykle znajdujƒÖ siƒô setki kilometr√≥w od hotelu. W naszym przypadku zwykle miƒôdzy r√≥≈ºnymi regionami platformy Azure w tym samym regionie geopolitycznym lub zgodnie z ustaleniami przez Ciebie jako klienta.

### <a name="overview-of-high-availability"></a>Om√≥wienie wysokiej dostƒôpno≈õci

Mo≈ºemy podzieliƒá dyskusjƒô na temat wysokiej dostƒôpno≈õci sap na platformie Azure na dwie czƒô≈õci:

* **Infrastruktura platformy Azure wysoka dostƒôpno≈õƒá**, na przyk≈Çad ha oblicze≈Ñ (maszyny wirtualne), sieƒá, magazyn itp.
* **Wysoka dostƒôpno≈õƒá aplikacji SAP**, na przyk≈Çad wysokiej dostƒôpno≈õci sk≈Çadnik√≥w oprogramowania SAP:
  * Serwery aplikacji SAP
  * WystƒÖpienie SAP ASCS/SCS
  * Serwer DB

i jak mo≈ºna go ≈ÇƒÖczyƒá z wysokiej haw infrastruktury platformy Azure.

Wysoka dostƒôpno≈õƒá sap na platformie Azure ma pewne r√≥≈ºnice w por√≥wnaniu do wysokiej dostƒôpno≈õci SAP w lokalnym ≈õrodowisku fizycznym lub wirtualnym. W poni≈ºszym dokumencie firmy SAP opisano standardowe konfiguracje SAP <https://scn.sap.com/docs/DOC-44415>High Availability w ≈õrodowiskach zwirtualizowanych w systemie Windows: . Nie ma sapinst zintegrowanej konfiguracji SAP-HA dla Linuksa, jak istnieje dla systemu Windows. W odniesieniu do SAP HA lokalnie dla <https://scn.sap.com/docs/DOC-8541>Linuksa znale≈∫ƒá wiƒôcej informacji tutaj: .

### <a name="azure-infrastructure-high-availability"></a>Wysoka dostƒôpno≈õƒá infrastruktury platformy Azure

Obecnie istnieje jednolita umowy SLA o pojedynczej maszynie wirtualnej w wysoko≈õci 99,9%. Aby zorientowaƒá siƒô, jak mo≈ºe wyglƒÖdaƒá dostƒôpno≈õƒá pojedynczej maszyny Wirtualnej, mo≈ºna utworzyƒá produkt r√≥≈ºnych <https://azure.microsoft.com/support/legal/sla/>dostƒôpnych zestaw√≥w SLA platformy Azure: .

PodstawƒÖ oblicze≈Ñ jest 30 dni w miesiƒÖcu lub 43200 minut. W zwiƒÖzku z tym 0.05% przest√≥j odpowiada 21.6 minut. Jak zwykle dostƒôpno≈õƒá r√≥≈ºnych us≈Çug bƒôdzie mno≈ºyƒá w nastƒôpujƒÖcy spos√≥b:

(Us≈Çuga dostƒôpno≈õci #1/100) * (us≈Çuga dostƒôpno≈õci #2/100) * (us≈Çuga dostƒôpno≈õci #3/100) 

Jak:

(99,95/100) * (99,9/100) * (99,9/100) = 0,9975 lub og√≥lna dostƒôpno≈õƒá 99,75%.

#### <a name="virtual-machine-vm-high-availability"></a>Wysoka dostƒôpno≈õƒá maszyny wirtualnej

IstniejƒÖ dwa typy zdarze≈Ñ platformy Azure, kt√≥re mogƒÖ mieƒá wp≈Çyw na dostƒôpno≈õƒá maszyn wirtualnych: planowana konserwacja i nieplanowana konserwacja.

* Zdarzenia planowanej konserwacji to okresowe aktualizacje tworzone przez firmƒô Microsoft dla podstawowej platformy Azure w celu zwiƒôkszenia og√≥lnej niezawodno≈õci, wydajno≈õci i bezpiecze≈Ñstwa infrastruktury platformy dzia≈Çania maszyn wirtualnych.
* Zdarzenia nieplanowanej konserwacji wystƒôpujƒÖ w przypadku wystƒÖpienia awarii sprzƒôtu lub infrastruktury fizycznej zawierajƒÖcej maszynƒô wirtualnƒÖ. MogƒÖ byƒá to awarie sieci lokalnej, b≈Çƒôdy na dysku lokalnym lub inne awarie na poziomie rega≈Çu. Po wykryciu takiego b≈Çƒôdu platforma Azure automatycznie migruje maszynƒô wirtualnƒÖ ze z≈Çej kondycji serwera fizycznego hostowanego maszyny wirtualnej na zdrowy serwer fizyczny. Te zdarzenia wystƒôpujƒÖ rzadko, ale mogƒÖ r√≥wnie≈º spowodowaƒá ponowne uruchomienie maszyny wirtualnej.

Wiƒôcej szczeg√≥≈Ç√≥w mo≈ºna znale≈∫ƒá w tej dokumentacji:<https://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability>

#### <a name="azure-storage-redundancy"></a>Nadmiarowo≈õƒá us≈Çugi Azure Storage

Dane na koncie us≈Çugi Microsoft Azure Storage sƒÖ zawsze replikowane w celu zapewnienia trwa≈Ço≈õci i wysokiej dostƒôpno≈õci, spe≈ÇniajƒÖc umowy SLA us≈Çugi Azure Storage nawet w przypadku przej≈õciowych awarii sprzƒôtu.

Poniewa≈º us≈Çuga Azure Storage domy≈õlnie przechowuje trzy obrazy danych, RAID5 lub RAID1 na wielu dyskach platformy Azure nie sƒÖ konieczne.

Wiƒôcej szczeg√≥≈Ç√≥w mo≈ºna znale≈∫ƒá w tym artykule:<https://azure.microsoft.com/documentation/articles/storage-redundancy/>

#### <a name="utilizing-azure-infrastructure-vm-restart-to-achieve-higher-availability-of-sap-applications"></a>Korzystanie z ponownego uruchamiania maszyny Wirtualnej infrastruktury platformy Azure w celu uzyskania wiƒôkszej dostƒôpno≈õci aplikacji SAP

Je≈õli zdecydujesz siƒô nie u≈ºywaƒá funkcji, takich jak klastrowanie trybu failover systemu Windows Server (WSFC) lub Rozrusznik w systemie Linux (obecnie obs≈Çugiwany tylko dla SLES 12 lub nowszego), ponowne uruchomienie maszyny Wirtualnej platformy Azure jest wykorzystywane do ochrony systemu SAP przed planowanymi i nieplanowanymi przestojami platformy Azure infrastruktury serwera fizycznego i og√≥lnej podstawowej platformy Azure.

> [!NOTE]
> Nale≈ºy wspomnieƒá, ≈ºe ponowne uruchomienie maszyny wirtualnej platformy Azure chroni przede wszystkim maszyny wirtualne i nie aplikacje. Ponowne uruchomienie maszyny Wirtualnej nie oferuje wysokiej dostƒôpno≈õci dla aplikacji SAP, ale oferuje pewien poziom dostƒôpno≈õci infrastruktury, a zatem po≈õrednio wy≈ºszƒÖ dostƒôpno≈õƒá system√≥w SAP. Nie ma r√≥wnie≈º umowy SLA na czas, kt√≥ry zajmie ponowne uruchomienie maszyny wirtualnej po planowanej lub nieplanowanej awarii hosta. W zwiƒÖzku z tym ta metoda wysokiej dostƒôpno≈õci nie jest odpowiednia dla krytycznych sk≈Çadnik√≥w systemu SAP, takich jak (A)SCS lub DBMS.
>
>

Innym wa≈ºnym elementem infrastruktury dla wysokiej dostƒôpno≈õci jest magazyn. Na przyk≈Çad us≈Çuga Azure Storage SLA jest dostƒôpno≈õƒá 99,9 %. Je≈õli jeden wdra≈ºa wszystkie maszyny wirtualne z dyskami do jednego konta us≈Çugi Azure Storage, potencjalna niedostƒôpno≈õƒá us≈Çugi Azure Storage spowoduje niedostƒôpno≈õƒá wszystkich maszyn wirtualnych, kt√≥re sƒÖ umieszczane na tym koncie us≈Çugi Azure Storage, a tak≈ºe wszystkie sk≈Çadniki SAP dzia≈ÇajƒÖce wewnƒÖtrz tych maszyn wirtualnych.  

Zamiast umieszczaƒá wszystkie maszyny wirtualne w jednym koncie us≈Çugi Azure Storage, mo≈ºna r√≥wnie≈º u≈ºyƒá dedykowanych kont magazynu dla ka≈ºdej maszyny Wirtualnej i w ten spos√≥b zwiƒôkszyƒá og√≥lnƒÖ dostƒôpno≈õƒá aplikacji maszyny Wirtualnej i SAP przy u≈ºyciu wielu niezale≈ºnych kont us≈Çugi Azure Storage.

Dyski zarzƒÖdzane platformy Azure sƒÖ automatycznie umieszczane w domenie b≈Çƒôd√≥w maszyny wirtualnej, do kt√≥rych sƒÖ do≈ÇƒÖczone. Je≈õli umie≈õcisz dwie maszyny wirtualne w zestawie dostƒôpno≈õci i u≈ºyjesz dysk√≥w zarzƒÖdzanych, platforma zajmie siƒô dystrybucjƒÖ dysk√≥w zarzƒÖdzanych do r√≥≈ºnych domen b≈Çƒôd√≥w. Je≈õli planujesz u≈ºywaƒá magazynu w wersji Premium, zdecydowanie zalecamy r√≥wnie≈º korzystanie z funkcji ZarzƒÖdzaj dyskami.

Przyk≈Çadowa architektura systemu SAP NetWeaver, kt√≥ry u≈ºywa wysokiej infrastruktury platformy Azure i kont magazynu mo≈ºe wyglƒÖdaƒá nastƒôpujƒÖco:

![Wykorzystanie wysokiej dostƒôpno≈õci infrastruktury platformy Azure w celu uzyskania wiƒôkszej dostƒôpno≈õci aplikacji SAP][planning-guide-figure-2900]

Przyk≈Çadowa architektura systemu SAP NetWeaver, kt√≥ry u≈ºywa wysokiej sieci operacyjnej infrastruktury platformy Azure i dysk√≥w zarzƒÖdzanych, mo≈ºe wyglƒÖdaƒá nastƒôpujƒÖco:

![Wykorzystanie wysokiej dostƒôpno≈õci infrastruktury platformy Azure w celu uzyskania wiƒôkszej dostƒôpno≈õci aplikacji SAP][planning-guide-figure-2901]

W przypadku krytycznych komponent√≥w SAP osiƒÖgnƒôli≈õmy do tej pory nastƒôpujƒÖce osiƒÖgniƒôcia:

* Wysoka dostƒôpno≈õƒá serwer√≥w aplikacji SAP (AS)

  WystƒÖpienia serwera aplikacji SAP sƒÖ sk≈Çadnikami nadmiarowymi. Ka≈ºde wystƒÖpienie SAP AS jest wdra≈ºane na w≈Çasnej maszynie wirtualnej, kt√≥ra jest uruchomiona w innej domenie b≈Çƒôd√≥w i uaktualnie≈Ñ platformy Azure (zobacz rozdzia≈Çy [Domeny b≈Çƒôd√≥w][planning-guide-3.2.1] i [domeny uaktualnienia).][planning-guide-3.2.2] Jest to zapewnione przy u≈ºyciu zestaw√≥w dostƒôpno≈õci platformy Azure (patrz rozdzia≈Ç [Zestawy dostƒôpno≈õci platformy Azure).][planning-guide-3.2.3] Potencjalna planowana lub nieplanowana niedostƒôpno≈õƒá domeny b≈Çƒôdu lub uaktualnienia platformy Azure spowoduje niedostƒôpno≈õƒá ograniczonej liczby maszyn wirtualnych z ich wystƒÖpieniami SAP AS.

  Ka≈ºde wystƒÖpienie SAP AS jest umieszczane na w≈Çasnym koncie us≈Çugi Azure Storage ‚Äî potencjalna niedostƒôpno≈õƒá jednego konta us≈Çugi Azure Storage spowoduje niedostƒôpno≈õƒá tylko jednej maszyny Wirtualnej z jego wystƒÖpieniem SAP AS. Nale≈ºy jednak pamiƒôtaƒá, ≈ºe istnieje limit kont us≈Çugi Azure Storage w ramach jednej subskrypcji platformy Azure. Aby zapewniƒá automatyczne uruchamianie (A)wystƒÖpienia SCS po ponownym uruchomieniu maszyny Wirtualnej, upewnij siƒô, ≈ºe parametr Autostart w (A)profil startu wystƒÖpienia SCS opisany w rozdziale [Korzystanie z autostartu dla wystƒÖpie≈Ñ SAP][planning-guide-11.5].
  Aby uzyskaƒá wiƒôcej informacji, zapoznaj siƒô r√≥wnie≈º z [rozdzia≈Çem Wysoka dostƒôpno≈õƒá serwer√≥w aplikacji SAP.][planning-guide-11.4.1]

  Nawet je≈õli u≈ºywasz dysk√≥w zarzƒÖdzanych, te dyski sƒÖ r√≥wnie≈º przechowywane na koncie us≈Çugi Azure Storage i mogƒÖ byƒá niedostƒôpne w przypadku awarii magazynu.

* *Wy≈ºsza* Dostƒôpno≈õƒá wystƒÖpienia SAP (A)SCS

  W tym miejscu mo≈ºemy korzystaƒá z ponownego uruchomienia maszyny Wirtualnej platformy Azure, aby chroniƒá maszynƒô wirtualnƒÖ za pomocƒÖ zainstalowanego wystƒÖpienia SAP (A)SCS. W przypadku planowanych lub nieplanowanych przestoj√≥w platformy Azure severs maszyny wirtualne zostanƒÖ ponownie uruchomione na innym dostƒôpnym serwerze. Jak wspomniano wcze≈õniej, ponowne uruchomienie maszyny wirtualnej platformy Azure przede wszystkim chroni maszyny wirtualne i nie aplikacje, w tym przypadku (A)SCS wystƒÖpienie. Za po≈õrednictwem ponownego uruchamiania maszyny Wirtualnej osiƒÖgniemy po≈õrednio wy≈ºszƒÖ dostƒôpno≈õƒá wystƒÖpienia SAP (A)SCS. Aby ubezpieczyƒá automatyczne uruchamianie (A)wystƒÖpienia SCS po ponownym uruchomieniu maszyny Wirtualnej, upewnij siƒô, ≈ºe parametr Autostart w (A)profil startowy wystƒÖpienia SCS opisany w rozdziale [Korzystanie z autostartu dla wystƒÖpie≈Ñ SAP][planning-guide-11.5]. Oznacza to, ≈ºe (A)SCS wystƒÖpienie jako pojedynczy punkt awarii (SPOF) uruchomione w jednej maszynie wirtualnej bƒôdzie czynnikiem determinujƒÖcym dla dostƒôpno≈õci ca≈Çego ≈õrodowiska SAP.

* *Wy≈ºsza* Dostƒôpno≈õƒá serwera DBMS

  W tym miejscu, podobnie jak w przypadku wystƒÖpienia SAP (A)SCS, u≈ºywamy ponownego uruchamiania maszyny Wirtualnej platformy Azure do ochrony maszyny Wirtualnej za pomocƒÖ zainstalowanego oprogramowania DBMS i osiƒÖgamy wy≈ºszƒÖ dostƒôpno≈õƒá oprogramowania DBMS za po≈õrednictwem ponownego uruchamiania maszyny Wirtualnej.
  DbMS uruchomiony w jednej maszynie wirtualnej jest r√≥wnie≈º SPOF i jest czynnikiem decydujƒÖcym o dostƒôpno≈õci ca≈Çego ≈õrodowiska SAP.

### <a name="sap-application-high-availability-on-azure-iaas"></a>Wysoka dostƒôpno≈õƒá aplikacji SAP na platformie Azure IaaS

Aby uzyskaƒá pe≈ÇnƒÖ wysokƒÖ dostƒôpno≈õƒá systemu SAP, musimy chroniƒá wszystkie krytyczne sk≈Çadniki systemu SAP, na przyk≈Çad nadmiarowe serwery aplikacji SAP i unikatowe sk≈Çadniki (na przyk≈Çad pojedynczy punkt awarii), takie jak wystƒÖpienie SAP (A)SCS i dbms.

#### <a name="high-availability-for-sap-application-servers"></a><a name="5d9d36f9-9058-435d-8367-5ad05f00de77"></a>Wysoka dostƒôpno≈õƒá serwer√≥w aplikacji SAP

W przypadku wystƒÖpie≈Ñ serwer√≥w aplikacji SAP/okna dialogowego nie jest konieczne my≈õlenie o okre≈õlonym rozwiƒÖzaniu o wysokiej dostƒôpno≈õci. Wysoka dostƒôpno≈õƒá jest osiƒÖgana przez nadmiarowo≈õƒá, a tym samym posiadanie ich wystarczajƒÖcej ilo≈õci na r√≥≈ºnych maszynach wirtualnych. Wszystkie powinny byƒá umieszczone w tym samym zestawie dostƒôpno≈õci platformy Azure, aby uniknƒÖƒá, ≈ºe maszyny wirtualne mogƒÖ byƒá aktualizowane w tym samym czasie podczas planowanych przestoj√≥w konserwacji. Podstawowa funkcjonalno≈õƒá, kt√≥ra opiera siƒô na r√≥≈ºnych domenach uaktualnie≈Ñ i b≈Çƒôd√≥w w jednostce skalowania platformy Azure, zosta≈Ça ju≈º wprowadzona w rozdziale [Domeny uaktualnienia][planning-guide-3.2.2]. Zestawy dostƒôpno≈õci platformy Azure zosta≈Çy przedstawione w rozdziale [Zestawy dostƒôpno≈õci platformy Azure][planning-guide-3.2.3] tego dokumentu.

Nie ma niesko≈Ñczonej liczby domen b≈Çƒôd√≥w i uaktualnie≈Ñ, kt√≥re mogƒÖ byƒá u≈ºywane przez zestaw dostƒôpno≈õci platformy Azure w jednostce skalowania platformy Azure. Oznacza to, ≈ºe umieszczenie wielu maszyn wirtualnych w jednym zestawie dostƒôpno≈õci, prƒôdzej czy p√≥≈∫niej wiƒôcej ni≈º jedna maszyna wirtualna ko≈Ñczy siƒô w tej samej domenie b≈Çƒôd√≥w lub uaktualnienia.

Wdra≈ºanie kilku wystƒÖpie≈Ñ serwera aplikacji SAP w dedykowanych maszynach wirtualnych i przy za≈Ço≈ºeniu, ≈ºe mamy piƒôƒá domen uaktualnienia, na ko≈Ñcu pojawia siƒô nastƒôpujƒÖcy obraz. Rzeczywista maksymalna liczba b≈Çƒôd√≥w i aktualizacji domen w ramach zestawu dostƒôpno≈õci mo≈ºe ulec zmianie w przysz≈Ço≈õci:

![Ha serwer√≥w aplikacji SAP na platformie Azure][planning-guide-figure-3000]

Wiƒôcej szczeg√≥≈Ç√≥w mo≈ºna znale≈∫ƒá w tej dokumentacji:<https://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability>

#### <a name="high-availability-for-sap-central-services-on-azure"></a>Wysoka dostƒôpno≈õƒá us≈Çug SAP Central na platformie Azure

Aby uzyskaƒá architekturƒô wysokiej dostƒôpno≈õci us≈Çug SAP Central Services na platformie Azure, zapoznaj siƒô z [artyku≈Çem Architektura wysokiej dostƒôpno≈õci i scenariusze dla SAP NetWeaver](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/sap-high-availability-architecture-scenarios) jako informacje o wpisie. Artyku≈Ç wskazuje bardziej szczeg√≥≈Çowe opisy dla poszczeg√≥lnych system√≥w operacyjnych.

#### <a name="high-availability-for-the-sap-database-instance"></a>Wysoka dostƒôpno≈õƒá wystƒÖpienia bazy danych SAP

Typowa konfiguracja us≈Çugi SAP DBMS HA jest oparta na dw√≥ch maszynach wirtualnych dbms, w kt√≥rych funkcja wysokiej dostƒôpno≈õci systemu DBMS jest u≈ºywana do replikowania danych z aktywnego wystƒÖpienia DBMS do drugiej maszyny wirtualnej w pasywne wystƒÖpienie dbms.

Wysoka dostƒôpno≈õƒá i funkcje odzyskiwania po awarii dla systemu dbms w og√≥le, jak r√≥wnie≈º konkretne dbms sƒÖ opisane w [Przewodniku wdra≈ºania dbms][dbms-guide].

#### <a name="end-to-end-high-availability-for-the-complete-sap-system"></a>Wysoka dostƒôpno≈õƒá kompletnego systemu SAP

Oto dwa przyk≈Çady kompletnej architektury SAP NetWeaver HA na platformie Azure ‚Äî jeden dla systemu Windows i jeden dla systemu Linux.

Tylko dyski niezarzƒÖdzane: pojƒôcia opisane poni≈ºej mogƒÖ wymagaƒá naruszenia zabezpiecze≈Ñ nieco podczas wdra≈ºania wielu system√≥w SAP, a liczba wdro≈ºonych maszyn wirtualnych przekracza maksymalny limit kont magazynu na subskrypcjƒô. W takich przypadkach wirtualne maszyny wirtualne muszƒÖ byƒá ≈ÇƒÖczone w ramach jednego konta magazynu. Zwykle mo≈ºna to zrobiƒá, ≈ÇƒÖczƒÖc veds z SAP warstwy aplikacji maszyn wirtualnych r√≥≈ºnych system√≥w SAP.  Po≈ÇƒÖczyli≈õmy r√≥wnie≈º r√≥≈ºne dyski wirtualne r√≥≈ºnych maszyn wirtualnych DBMS r√≥≈ºnych system√≥w SAP w jednym koncie us≈Çugi Azure Storage. W ten spos√≥b nale≈ºy pamiƒôtaƒá o granicach us≈Çug<https://azure.microsoft.com/documentation/articles/storage-scalability-targets>We/Wy dla kont us≈Çugi Azure Storage ( )


##### <a name="windowslogo_windows-ha-on-windows"></a>![Windows][Logo_Windows] Ha w systemie Windows

![Architektura wysokiej klasy aplikacji SAP NetWeaver z programem SQL Server w us≈Çudze Azure IaaS][planning-guide-figure-3200]

NastƒôpujƒÖce konstrukcje platformy Azure sƒÖ u≈ºywane dla systemu SAP NetWeaver, aby zminimalizowaƒá wp≈Çyw problem√≥w z infrastrukturƒÖ i poprawek hosta:

* Kompletny system jest wdra≈ºany na platformie Azure (wymagane ‚Äî warstwa DBMS, (A)wystƒÖpienie SCS i pe≈Çna warstwa aplikacji muszƒÖ dzia≈Çaƒá w tej samej lokalizacji).
* Kompletny system dzia≈Ça w ramach jednej subskrypcji platformy Azure (wymagane).
* Kompletny system dzia≈Ça w ramach jednej sieci wirtualnej platformy Azure (wymagane).
* Oddzielenie maszyn wirtualnych jednego systemu SAP na trzy zestawy dostƒôpno≈õci jest mo≈ºliwe nawet w przypadku wszystkich maszyn wirtualnych nale≈ºƒÖcych do tej samej sieci wirtualnej.
* Ka≈ºda warstwa (na przyk≈Çad DBMS, ASCS, Serwery aplikacji) musi u≈ºywaƒá dedykowanego zestawu dostƒôpno≈õci.
* Wszystkie maszyny wirtualne z uruchomionymi wystƒÖpieniami DBMS jednego systemu SAP znajdujƒÖ siƒô w jednym zestawie dostƒôpno≈õci. Zak≈Çadamy, ≈ºe istnieje wiƒôcej ni≈º jedna maszyna wirtualna z uruchomionymi wystƒÖpieniami DBMS na system, poniewa≈º u≈ºywane sƒÖ natywne funkcje wysokiej dostƒôpno≈õci DBMS, takie jak SQL Server AlwaysOn lub Oracle Data Guard.
* Wszystkie maszyny wirtualne z uruchomionymi wystƒÖpieniami DBMS u≈ºywajƒÖ w≈Çasnego konta magazynu. Pliki danych i dziennik√≥w DBMS sƒÖ replikowane z jednego konta magazynu do innego konta magazynu przy u≈ºyciu funkcji wysokiej dostƒôpno≈õci DBMS, kt√≥re synchronizujƒÖ dane. Niedostƒôpno≈õƒá jednego konta magazynu spowoduje niedostƒôpno≈õƒá jednego wƒôz≈Ça klastra systemu SQL Windows, ale nie ca≈Çej us≈Çugi programu SQL Server.
* Wszystkie maszyny wirtualne uruchomione (A)SCS wystƒÖpienia jednego systemu SAP sƒÖ w jednym zestawie dostƒôpno≈õci. Klaster trybu failover systemu Windows Server (WSFC) jest skonfigurowany wewnƒÖtrz tych maszyn wirtualnych w celu ochrony (A)wystƒÖpienie SCS.
* Wszystkie uruchomione maszyny wirtualne (A)wystƒÖpienia SCS u≈ºywajƒÖ w≈Çasnego konta magazynu. 1lit. Pliki wystƒÖpienia SCS i folder globalny SAP sƒÖ replikowane z jednego konta magazynu na inne konto magazynu przy u≈ºyciu replikacji SIOS DataKeeper. Niedostƒôpno≈õƒá jednego konta magazynu spowoduje niedostƒôpno≈õƒá jednego wƒôz≈Ça klastra systemu Windows (A)SCS, ale nie ca≈Çej us≈Çugi SCS.
* Wszystkie maszyny wirtualne reprezentujƒÖce warstwƒô serwera aplikacji SAP znajdujƒÖ siƒô w trzecim zestawie dostƒôpno≈õci.
* WSZYSTKIE maszyny wirtualne z uruchomionymi serwerami aplikacji SAP u≈ºywajƒÖ w≈Çasnego konta magazynu. Niedostƒôpno≈õƒá jednego konta magazynu spowoduje niedostƒôpno≈õƒá jednego serwera aplikacji SAP, na kt√≥rym nadal dzia≈ÇajƒÖ inne serwery aplikacji SAP.

Na poni≈ºszym rysunku przedstawiono ten sam poziom przy u≈ºyciu dysk√≥w zarzƒÖdzanych.

![Architektura wysokiej klasy aplikacji SAP NetWeaver z programem SQL Server w us≈Çudze Azure IaaS][planning-guide-figure-3201]

##### <a name="linuxlogo_linux-ha-on-linux"></a>![Linux][Logo_Linux] HA na Linuksie

Architektura sap ha na linuksie na platformie Azure jest w zasadzie taka sama jak dla systemu Windows, jak opisano powy≈ºej. Lista obs≈Çugiwanych rozwiƒÖza≈Ñ o wysokiej dostƒôpno≈õci mo≈ºna znale≈∫ƒá w obiekcie SAP Note [1928533.]

### <a name="using-autostart-for-sap-instances"></a><a name="4e165b58-74ca-474f-a7f4-5e695a93204f"></a>Korzystanie z autostartu dla wystƒÖpie≈Ñ SAP

Firma SAP zaoferowa≈Ça funkcjƒô uruchamiania wystƒÖpie≈Ñ SAP natychmiast po uruchomieniu systemu operacyjnego w maszynie wirtualnej. Dok≈Çadne kroki zosta≈Çy udokumentowane w artykule [1909114]bazy wiedzy SAP. Jednak SAP nie zaleca siƒô ju≈º u≈ºywaƒá tego ustawienia, poniewa≈º nie ma kontroli w kolejno≈õci ponownego uruchamiania wystƒÖpienia, przy za≈Ço≈ºeniu, ≈ºe wiƒôcej ni≈º jedna maszyna wirtualna zosta≈Ça naruszona lub wiele wystƒÖpie≈Ñ uruchomionych na maszynƒô wirtualnƒÖ. Zak≈ÇadajƒÖc, ≈ºe typowy scenariusz platformy Azure jednego wystƒÖpienia serwera aplikacji SAP na maszynie Wirtualnej i przypadku pojedynczej maszyny Wirtualnej po pewnym czasie zostanie ponownie uruchomiony, Autostart nie jest krytyczny i mo≈ºna go w≈ÇƒÖczyƒá, dodajƒÖc ten parametr:

    Autostart = 1

Do profilu poczƒÖtkowego wystƒÖpienia SAP ABAP i/lub Java.

> [!NOTE]
> Autostart Parametr mo≈ºe mieƒá pewne upadki, jak r√≥wnie≈º. Bardziej szczeg√≥≈Çowo parametr wyzwala uruchomienie wystƒÖpienia SAP ABAP lub Java po uruchomieniu powiƒÖzanej us≈Çugi Windows/Linux wystƒÖpienia. Z pewno≈õciƒÖ jest tak, gdy system operacyjny uruchamia siƒô. Jednak ponowne uruchomienie us≈Çug SAP sƒÖ r√≥wnie≈º czƒôstƒÖ rzeczƒÖ dla funkcji zarzƒÖdzania cyklem ≈ºycia oprogramowania SAP, takich jak SUMA lub inne aktualizacje lub uaktualnienia. Te funkcje nie oczekujƒÖ wystƒÖpienia do ponownego uruchomienia automatycznie w og√≥le. W zwiƒÖzku z tym autostart parametr powinien byƒá wy≈ÇƒÖczony przed uruchomieniem takich zada≈Ñ. Parametr Autostart r√≥wnie≈º nie powinien byƒá u≈ºywany dla wystƒÖpie≈Ñ SAP, kt√≥re sƒÖ klastrowane, takich jak ASCS/SCS/CI.
>
>

Zobacz dodatkowe informacje dotyczƒÖce autostartu dla wystƒÖpie≈Ñ SAP tutaj:

* [Start/Stop SAP wraz z uruchomieniem/zatrzymaniem serwera Unix](https://scn.sap.com/community/unix/blog/2012/08/07/startstop-sap-along-with-your-unix-server-startstop)
* [Uruchamianie i zatrzymywanie agent√≥w zarzƒÖdzania SAP NetWeaver](https://help.sap.com/saphelp_nwpi711/helpdata/en/49/9a15525b20423ee10000000a421938/content.htm)
* [Jak w≈ÇƒÖczyƒá automatyczne uruchamianie bazy danych HANA](http://sapbasisinfo.com/blog/2016/08/15/enabling-autostart-of-sap-hana-database-on-server-boot-situation/)

### <a name="larger-3-tier-sap-systems"></a>Wiƒôksze 3-warstwowe systemy SAP
Aspekty wysokiej dostƒôpno≈õci konfiguracji SAP 3-warstwowych zosta≈Çy om√≥wione ju≈º we wcze≈õniejszych sekcjach. Ale co z systemami, w kt√≥rych wymagania serwera DBMS sƒÖ zbyt du≈ºe, aby mo≈ºna go by≈Ço zlokalizowaƒá na platformie Azure, ale warstwa aplikacji SAP mo≈ºe zostaƒá wdro≈ºona na platformie Azure?

#### <a name="location-of-3-tier-sap-configurations"></a>Lokalizacja konfiguracji 3-warstwowych SAP
Nie jest obs≈Çugiwana do dzielenia warstwy aplikacji, sam lub warstwy aplikacji i dbms miƒôdzy lokalnie i platformy Azure. System SAP jest ca≈Çkowicie wdro≈ºony lokalnie lub na platformie Azure. Nie jest r√≥wnie≈º obs≈Çugiwane, aby niekt√≥re serwery aplikacji by≈Çy uruchamiane lokalnie, a niekt√≥re inne na platformie Azure. To jest punkt wyj≈õcia dyskusji. Firma Microsoft nie obs≈Çuguje r√≥wnie≈º, aby sk≈Çadniki dbms systemu SAP i warstwy serwera aplikacji SAP wdro≈ºone w dw√≥ch r√≥≈ºnych regionach platformy Azure. Na przyk≈Çad dbms w zachodnie stany USA i warstwy aplikacji SAP w centralnej czƒô≈õci USA. Powodem nie obs≈ÇugujƒÖcych takich konfiguracji jest czu≈Ço≈õƒá op√≥≈∫nienia architektury SAP NetWeaver.

Jednak w ciƒÖgu ostatniego roku partnerzy centrum danych opracowali wsp√≥≈Çmiejsce w regionach platformy Azure. Te koloko≈õci czƒôsto znajdujƒÖ siƒô w pobli≈ºu fizycznych centr√≥w danych platformy Azure w regionie platformy Azure. Kr√≥tka odleg≈Ço≈õƒá i po≈ÇƒÖczenie zasob√≥w w kolokacji za po≈õrednictwem us≈Çugi ExpressRoute do platformy Azure mo≈ºe spowodowaƒá op√≥≈∫nienie, kt√≥re jest mniejsze ni≈º 2 ms. W takich przypadkach, aby zlokalizowaƒá warstwƒô DBMS (w tym magazynu SAN/NAS) w takiej kolokcji i warstwy aplikacji SAP na platformie Azure jest mo≈ºliwe. [Hana du≈ºe wystƒÖpienia](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/hana-overview-architecture). 

### <a name="offline-backup-of-sap-systems"></a>Tworzenie kopii zapasowych w trybie offline system√≥w SAP
W zale≈ºno≈õci od wybranej konfiguracji SAP (2-warstwowej lub 3-warstwowej) mo≈ºe byƒá konieczne utworzenie kopii zapasowej. Zawarto≈õƒá maszyny Wirtualnej, a tak≈ºe mieƒá kopiƒô zapasowƒÖ bazy danych. Oczekuje siƒô, ≈ºe kopie zapasowe zwiƒÖzane z us≈ÇugƒÖ DBMS bƒôdƒÖ wykonywane za pomocƒÖ metod bazy danych. Szczeg√≥≈Çowy opis r√≥≈ºnych baz danych mo≈ºna znale≈∫ƒá w [przewodniku dbms][dbms-guide]. Z drugiej strony mo≈ºna wyw.

Kopia zapasowa w trybie offline wymaga≈Çoby zamkniƒôcia maszyny Wirtualnej za po≈õrednictwem witryny Azure portal i kopii dysku podstawowej maszyny Wirtualnej oraz wszystkich do≈ÇƒÖczonych dysk√≥w do maszyny Wirtualnej. Pozwoli≈Çoby to zachowaƒá obraz punktu w czasie maszyny Wirtualnej i skojarzonego z niƒÖ dysku. Zaleca siƒô skopiowanie kopii zapasowych do innego konta us≈Çugi Azure Storage. W zwiƒÖzku z tym procedura opisana w rozdziale [Kopiowanie dysk√≥w miƒôdzy kontami us≈Çugi Azure Storage][planning-guide-5.4.2] tego dokumentu bƒôdzie mia≈Ça zastosowanie.
Opr√≥cz zamkniƒôcia przy u≈ºyciu witryny Azure portal mo≈ºna r√≥wnie≈º zrobiƒá za po≈õrednictwem programu Powershell lub interfejsu wiersza polecenia, jak opisano w tym miejscu:<https://azure.microsoft.com/documentation/articles/virtual-machines-deploy-rmtemplates-powershell/>

Przywracanie tego stanu polega≈Çoby na usuniƒôciu podstawowej maszyny Wirtualnej, a tak≈ºe oryginalnych dysk√≥w podstawowej maszyny Wirtualnej i dysk√≥w zainstalowanych, skopiowaniu zapisanych dysk√≥w do oryginalnego konta magazynu lub grupy zasob√≥w dla dysk√≥w zarzƒÖdzanych, a nastƒôpnie ponownemu rozmieszczeniu systemu.
W tym artykule przedstawiono przyk≈Çad sposobu skryptu tego procesu w programie PowerShell:<http://www.westerndevs.com/azure-snapshots/>

Upewnij siƒô, ≈ºe zainstalowano nowƒÖ licencjƒô SAP, poniewa≈º przywr√≥cenie kopii zapasowej maszyny Wirtualnej, jak opisano powy≈ºej, tworzy nowy klucz sprzƒôtowy.

### <a name="online-backup-of-an-sap-system"></a>Kopia zapasowa systemu SAP online

Kopia zapasowa us≈Çugi DBMS jest wykonywana metodami specyficznymi dla DBMS, zgodnie z opisem w [przewodniku dbms][dbms-guide].

Kopie zapasowe innych maszyn wirtualnych w systemie SAP mo≈ºna wykonaƒá przy u≈ºyciu funkcji tworzenia kopii zapasowej maszyny wirtualnej platformy Azure. Azure Virtual Machine Backup to standardowa metoda tworzenia kopii zapasowych pe≈Çnej maszyny wirtualnej na platformie Azure. Us≈Çuga Azure Backup przechowuje kopie zapasowe na platformie Azure i umo≈ºliwia ponowne przywracanie maszyny wirtualnej.

> [!NOTE]
> Od grudnia 2015 r. przy u≈ºyciu kopii zapasowej maszyny Wirtualnej NIE zachowuje unikatowy identyfikator maszyny Wirtualnej, kt√≥ry jest u≈ºywany do licencjonowania SAP. Oznacza to, ≈ºe przywracanie z kopii zapasowej maszyny Wirtualnej wymaga instalacji nowego klucza licencyjnego SAP, poniewa≈º przywr√≥cona maszyna wirtualna jest uwa≈ºana za nowƒÖ maszynƒô wirtualnƒÖ, a nie za zastƒÖpienie poprzedniej, kt√≥ra zosta≈Ça zapisana.
>
> ![Windows][Logo_Windows] Windows
>
> Teoretycznie maszyny wirtualne, kt√≥re uruchamiajƒÖ bazy danych, mogƒÖ byƒá archiwizowane w sp√≥jny spos√≥b, jak <https://msdn.microsoft.com/library/windows/desktop/bb968832(v=vs.85).aspx>r√≥wnie≈º wtedy, gdy system DBMS obs≈Çuguje windows VSS (Volume Shadow Copy Service), jak na przyk≈Çad SQL Server.
> Nale≈ºy jednak pamiƒôtaƒá, ≈ºe na podstawie kopii zapasowych platformy Azure VM przywracanie baz danych w czasie nie sƒÖ mo≈ºliwe. W zwiƒÖzku z tym zalecenie jest wykonywanie kopii zapasowych baz danych z funkcjƒÖ DBMS zamiast polegaƒá na kopii zapasowej maszyny wirtualnej platformy Azure.
>
> Aby zapoznaƒá siƒô z tworzeniem <https://docs.microsoft.com/azure/backup/backup-azure-vms>kopii zapasowej maszyny wirtualnej platformy Azure, rozpocznij tutaj: .
>
> Inne mo≈ºliwo≈õci to u≈ºycie kombinacji programu Microsoft Data Protection Manager zainstalowanej na maszynie Wirtualnej Platformy Azure i kopii zapasowej platformy Azure w celu tworzenia kopii zapasowych/przywracania baz danych. Wiƒôcej informacji mo≈ºna znale≈∫ƒá <https://docs.microsoft.com/azure/backup/backup-azure-dpm-introduction>tutaj: .  
>
> ![Linux][Logo_Linux] Linux
>
> Nie ma odpowiednika systemu Windows VSS w systemie Linux. W zwiƒÖzku z tym tylko kopie zapasowe sp√≥jne z plikami sƒÖ mo≈ºliwe, ale nie sp√≥jne z aplikacjami kopie zapasowe. Kopia zapasowa SAP DBMS powinna byƒá wykonywana przy u≈ºyciu funkcji DBMS. System plik√≥w, kt√≥ry zawiera dane zwiƒÖzane z SAP, mo≈ºna zapisaƒá, na przyk≈Çad przy u≈ºyciu smo≈Çy, jak opisano tutaj:<https://help.sap.com/saphelp_nw70ehp2/helpdata/en/d3/c0da3ccbb04d35b186041ba6ac301f/content.htm>
>
>

### <a name="azure-as-dr-site-for-production-sap-landscapes"></a>Platforma Azure jako lokacja odzyskiwania po awarii dla ≈õrodowiska sap produkcji

Od po≈Çowy 2014 r. rozszerzenia r√≥≈ºnych sk≈Çadnik√≥w wok√≥≈Ç funkcji Hyper-V, Programu System Center i platformy Azure umo≈ºliwiajƒÖ korzystanie z platformy Azure jako lokacji odzyskiwania po awarii dla maszyn wirtualnych dzia≈ÇajƒÖcych lokalnie na podstawie funkcji Hyper-V.

Blog szczeg√≥≈Çowo jak wdro≈ºyƒá to rozwiƒÖzanie jest <https://blogs.msdn.com/b/saponsqlserver/archive/2014/11/19/protecting-sap-solutions-with-azure-site-recovery.aspx>udokumentowane tutaj: .

## <a name="summary"></a>Podsumowanie

Kluczowe punkty wysokiej dostƒôpno≈õci dla system√≥w SAP na platformie Azure to:

* W tym momencie pojedynczy punkt awarii sap nie mo≈ºe byƒá zabezpieczony dok≈Çadnie tak samo, jak mo≈ºna to zrobiƒá w wdro≈ºeniach lokalnych. Powodem jest to, ≈ºe klastry dysk√≥w udostƒôpnionych nie mo≈ºna jeszcze zbudowaƒá na platformie Azure bez u≈ºycia oprogramowania innych firm.
* W warstwie DBMS nale≈ºy u≈ºyƒá funkcji DBMS, kt√≥ra nie opiera siƒô na technologii klastra dysk√≥w wsp√≥≈Çu≈ºytkowych. Szczeg√≥≈Çy sƒÖ udokumentowane w [przewodniku dbms][dbms-guide].
* Aby zminimalizowaƒá wp≈Çyw problem√≥w w domenach b≈Çƒôd√≥w w infrastrukturze platformy Azure lub konserwacji hosta, nale≈ºy u≈ºyƒá zestaw√≥w dostƒôpno≈õci platformy Azure:
  * Zaleca siƒô, aby mieƒá jeden zestaw dostƒôpno≈õci dla warstwy aplikacji SAP.
  * Zaleca siƒô, aby mieƒá oddzielny zestaw dostƒôpno≈õci dla warstwy SAP DBMS.
  * NIE zaleca siƒô stosowania tego samego zestawu dostƒôpno≈õci dla maszyn wirtualnych r√≥≈ºnych system√≥w SAP.
  * Zaleca siƒô u≈ºywanie dysk√≥w zarzƒÖdzanych w wersji Premium.
* Aby uzyskaƒá kopiƒô zapasowƒÖ warstwy SAP DBMS, sprawd≈∫ [przewodnik dbms][dbms-guide].
* Tworzenie kopii zapasowej wystƒÖpie≈Ñ okna dialogowego SAP nie ma wiƒôkszego sensu, poniewa≈º zwykle jest szybsze ponowne wdro≈ºenie prostych wystƒÖpie≈Ñ okna dialogowego.
* Tworzenie kopii zapasowej maszyny Wirtualnej, kt√≥ra zawiera globalny katalog systemu SAP, a wraz z nim wszystkie profile r√≥≈ºnych wystƒÖpie≈Ñ, ma sens i powinny byƒá wykonywane za pomocƒÖ kopii zapasowej systemu Windows lub, na przyk≈Çad, tar na Linuksie. Poniewa≈º istniejƒÖ r√≥≈ºnice miƒôdzy systemami Windows Server 2008 (R2) i Windows Server 2012 (R2), kt√≥re u≈ÇatwiajƒÖ tworzenie kopii zapasowych przy u≈ºyciu nowszych wersji systemu Windows Server, zaleca siƒô uruchamianie systemu Windows Server 2012 (R2) jako systemu operacyjnego windows guest.

## <a name="next-steps"></a>Nastƒôpne kroki
Przeczytaj artyku≈Çy:

- [Wdro≈ºenie maszyn wirtualnych platformy Azure dla us≈Çugi SAP NetWeaver](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/deployment-guide)
- [Zagadnienia dotyczƒÖce wdra≈ºania us≈Çugi DBMS maszyn wirtualnych platformy Azure dla obciƒÖ≈ºenia SAP](https://docs.microsoft.com/azure/virtual-machines/workloads/sap/dbms_guide_general)
- [Konfiguracje i operacje infrastruktury SAP HANA na platformie Azure] (https://docs.microsoft.com/
- azure/virtual-machines/workloads/sap/hana-vm-operations)
