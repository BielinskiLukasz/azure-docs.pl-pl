<properties 
   pageTitle="Service Bus の価格に関する FAQ |Microsoft Azure"
   description="Service Bus の価格体系についてよく寄せられる質問 (FAQ) とその回答を紹介します。"
   services="service-bus"
   documentationCenter="na"
   authors="sethmanheim"
   manager="timlt"
   editor="tysonn" />
<tags 
   ms.service="service-bus"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="09/09/2015"
   ms.author="sethm" />


# Service Bus の価格に関する FAQ

このセクションでは、Service Bus の価格体系についてよく寄せられる質問 (FAQ) とその回答を紹介します。 アクセスすることも、 [Azure サポートに関する FAQ](http://go.microsoft.com/fwlink/?LinkID=185083) 料金情報については Microsoft Azure の一般的なのです。 Service Bus の料金の詳細については、次を参照してください。 [Service Bus の料金詳細](http://azure.microsoft.com/pricing/details/service-bus/)します。
>[AZURE.NOTE] Event Hubs の料金体系については、「、 [イベント ハブの可用性とサポートに関する FAQ](event-hubs-availability-and-support-faq.md) トピックで、詳細については、 [Event Hubs の料金](http://azure.microsoft.com/pricing/details/event-hubs/) トピックです。

- [Service Bus の課金方法をでしょうか。](#how-do-you-charge-for-service-bus)
- [Service Bus の用途では、データ転送される可能性がありますか。 どのようなないですか?](#what-usage-of-service-bus-is-subject-to-data-transfer-what-is-not)
- [Service Bus「リレー」とは](#what-exactly-is-a-service-bus-quotrelayquot)
- [リレー時間のメーターの計算方法](#how-is-the-relay-hours-meter-calculated)
- [何がある場合は複数のリスナーが特定のリレーに接続されているか。](#what-if-i-have-more-than-one-listener-connected-to-a-given-relay)
- [リレーの場合のメッセージ数メーターの計算方法](#how-is-the-messages-meter-calculated-for-relays)
- [Service Bus は、ストレージの課金か。](#does-service-bus-charge-for-storage)
- [Service Bus には使用量のクォータがありますか。](#does-service-bus-have-any-usage-quotas)

## Service Bus の課金方法を教えてください

Service Bus の料金の詳細については、次を参照してください。 [Service Bus の料金と課金](https://msdn.microsoft.com/library/dn831889.aspx) と [Service Bus の料金詳細](http://azure.microsoft.com/pricing/details/service-bus/)します。 既に説明した価格に加え、ご利用のアプリケーションがプロビジョニングされているデータ センターから外部に送信される関連データ転送に料金が発生します。 詳細についてを見つけることができます、[Service Bus の用途では、データ転送される可能性がありますか。 どのようなないですか?](#what-usage-of-service-bus-is-subject-to-data-transfer-what-is-not) 後述します。

## Service Bus でデータ転送の対象となる用途と対象外の用途を教えてください

特定の Azure リージョン内でのデータ転送はすべて無料です。 リージョンの外部へのデータ転送では、北米リージョンとヨーロッパ リージョンからの送信の場合は 1 GB につき $0.15、アジア太平洋リージョンからの送信の場合は 1 GB につき $0.20 の送信料がかかります。 受信データ転送はすべて無料です。

## Service Bus の "リレー" について具体的に教えてください

リレーは、クライアントと Web サービスの間でメッセージを中継する Service Bus エンティティです。 リレーにより、Web サービスでは、永続性のある検出可能な Service Bus アドレス、ファイアウォール/NAT トラバーサル機能を使用した信頼性の高い接続に加え、自動負荷分散などの追加機能も利用できます。 リレー対応の WCF サービス (リレー リスナー) が特定の Service Bus アドレス (名前空間の URL) に初めて接続すると、その都度そのアドレスでリレーが暗黙的にインスタンス化されて開かれます。 リレー リスナーは、標準的な WCF バインドの、リレーに対応した特殊な形態である Service Bus .NET マネージ API を使用して、アプリケーションによって作成されます。

## リレー時間のメーターはどのようにして計算されますか

特定の請求期間中、各 Service Bus Relay が "開いている" 時間の累積がリレー時間として課金されます。 リレー対応の WCF サービス (リレー リスナー) が特定の Service Bus アドレス (サービスの名前空間の URL) に初めて接続すると、そのアドレスでリレーが暗黙的にインスタンス化されて開かれます。 リレーが閉じられるのは、最後のリスナーがそのアドレスから切断されたときだけです。 したがって、課金の目的上、最初のリレー リスナーが接続した時刻から最後のリレー リスナーがそのリレーの Service Bus アドレスから切断された時刻まで、リレーは "開いている" と見なされます。 言い換えると、Service Bus アドレスに接続されているリレー リスナーが 1 つでもあれば、リレーは "開いている" と見なされます。

## 特定のリレーに複数のリスナーを接続した場合はどうなりますか

場合によっては、Service Bus 内の 1 つのリレーに複数のリスナーが接続されていることも考えられます。 これで発生する可能性を使用する負荷分散されたサービス、 **netTCPRelay** または **HttpRelay** WCF バインドを使用するブロードキャスト イベント リスナー、 **netEventRelay** WCF バインドします。 Service Bus のリレーは、接続されているリレー リスナーが 1 つでもあれば、"開いている" と見なされます。 開いているリレーにリスナーを追加しても、課金の目的上、そのリレーの状態は変化しません。 また、リレーに接続されたリレー センダー (リレーに対するメッセージの呼び出しまたは送信を実行するクライアント) の数がリレー時間の計算に影響することもありません。

## リレーの場合、メッセージ数のメーターはどのようにして計算されますか

一般に、リレーの場合も、前述した仲介型エンティティ (キュー、トピック、サブスクリプション) と同じ方法で、課金対象メッセージが計算されます。 ただし、注目すべき違いがいくつかあります。

1. Service Bus Relay へのメッセージ送信は、Service Bus Relay への送信とその後のリレー リスナーへの配信としてではなく、そのメッセージを受信するリレー リスナーに対する "直接の" 送信として扱われます。したがって、リレー リスナーに対する (最大 64 KB の) 要求/応答形式のサービス呼び出しの場合、課金対象のメッセージは、要求のメッセージと応答のメッセージ (応答も 64 KB 以下を想定) の 2 つになります。クライアントとサービス間の仲介にキューを使用した場合は、この点が異なります。後者の場合、同じ要求/応答パターンでも、キューに対する要求の送信、そのキューからサービスへのデキュー/配信、別のキューへの応答の送信、そのキューからクライアントへのデキュー/配信の順番で実行することが必要になります。メッセージのサイズが最初から最後まで同じ (64 KB 以下) であると仮定した場合、仲介型キュー パターンでは課金対象のメッセージが 4 つとなり、同じパターンをリレーを使って実装した場合の 2 倍の料金が課金されることとなります。もちろん、キューを使用してこのパターンを実現すれば、持続性や負荷平準化などの利点が生まれます。これらは追加費用に見合った利点です。

2. 開いたリレーを使用して、 **netTCPRelay** WCF バインドは、個々 のメッセージとしてではなく、システムを流れるデータのストリームとしてにメッセージを処理します。 つまり、このバインドを使って送受信された個々のメッセージを 1 つのまとまりとして認識できるのは、センダーとリスナーだけです。 したがって、**netTCPRelay** バインドを使ったリレーの場合、課金対象のメッセージ数を計算するために、すべてのデータがストリームとして扱われます。 この場合、Service Bus は、個々のリレーを介して 5 分間に送受信されたデータの総量を計算し、その総量を 64 KB で割ることで、その期間における当該リレーの課金対象のメッセージ数を特定します。

## Service Bus ではストレージに対して課金されますか

いいえ、Service Bus ではストレージに対して課金されません。 ただし、キューまたはトピックごとに保持できる最大データ量を制限するクォータはあります。 次の FAQ を参照してください。

## Service Bus に使用量クォータはありますか

マイクロソフトは、既定で、任意のクラウド サービスに関して、お客様の全サブスクリプション全体で算出される月単位の総使用量クォータを設定しています。 実際のニーズがこれらの制限を上回る可能性があることは認識しておりますので、お客様のニーズを把握し、適宜制限を調整できるようにするためにも、お気軽にカスタマー サービスまでお問い合わせください。 Service Bus の総使用量クォータは次のとおりです。

- 50 億メッセージ

- 200 万リレー時間

マイクロソフトは、ある月に使用量クォータを超えた場合に、お客様のアカウントを無効にする権利を保有しています。ただし、その場合は電子メールでお客様にその旨をお知らせし、何度かお客様に連絡を試みたうえで、措置を講じることといたします。 このようなクォータを超えたお客様についても、その超過分が課金の対象となります。

Azure の他のサービスと同様、Service Bus では、リソースが公平に使用されるように一連のクォータを適用します。 このサービスで適用される使用量クォータは次のとおりです。

- **キュー/トピック サイズ** - キューまたはトピックの最大サイズは、その作成時にお客様が指定します。 このクォータには、1 GB、2 GB、3 GB、4 GB、5 GB のいずれかの値を指定できます。 最大サイズに達すると、それ以上の受信メッセージは拒否され、呼び出し元のコードが例外を受け取ります。

- **同時接続数**
    - **キュー/トピック/サブスクリプション** - キュー/トピック/サブスクリプションに対する同時 TCP 接続数は 100 に制限されています。 このクォータに達すると、その後の接続要求は拒否され、呼び出し元のコードが例外を受け取ります。 Service Bus は、メッセージング ファクトリによって作成されたクライアントのいずれかでアクティブな操作が保留状態になっている場合や、操作が完了してからの経過時間が 60 秒未満である場合、メッセージング ファクトリごとに 1 つの TCP 接続を維持します。 REST 操作は、TCP 同時接続数に加算されません。

- **リレーの同時リスナー数** – 同時実行の数 **netTcpRelay** と **netHttpRelay * * リレーのリスナーは 25 に制限されます (1 を * * NetOneway** リレー)。

- **名前空間あたりの同時リレー リスナー数** - Service Bus では、サービスの名前空間あたりの同時リレー リスナー数が 2000 に制限されます。 このクォータに達すると、その後のリレー リスナーのオープン要求は拒否され、呼び出し元のコードが例外を受け取ります。

- **サービスの名前空間あたりのトピック/キュー数** - サービスの名前空間のトピック/キュー (永続的なストレージを利用したエンティティ) の最大数は 10,000 に制限されます。 このクォータに達すると、以後、サービスの名前空間に対する新しいトピック/キューの作成要求は拒否されます。 ここで、 [Azure クラシック ポータルの [][] エラー メッセージを表示または作成しようと、ポータルまたはクライアント コード内に実行されたかどうかによって、例外を呼び出し元のクライアント コードが返されます。

- **メッセージ サイズ クォータ**
    - **キュー/トピック/サブスクリプション**
        - **メッセージ サイズ** – 各メッセージにつき 256 kb、メッセージ ヘッダーを含む合計サイズに制限されます。
        - **メッセージ ヘッダー サイズ** – 各メッセージ ヘッダーは 64 KB に制限します。

    - **NetOneway および NetEvent リレー** - メッセージ ヘッダーを含む合計サイズは、メッセージにつき 64 KB に制限されます。
    - **Http および NetTcp リレー** - Service Bus では、これらのメッセージのサイズについて上限を設けていません。

    上記のサイズ クォータを超えるメッセージは拒否され、呼び出し元のコードが例外を受け取ります。

- **トピックごとのサブスクリプション数** - トピックごとの最大サブスクリプション数は 2,000 に制限されます。 このクォータに達すると、以後、そのトピックに対する新しいサブスクリプションの作成要求は拒否されます。 ここで、 [Azure クラシック ポータルの [][] エラー メッセージを表示または作成しようと、ポータルまたはクライアント コード内に実行されたかどうかによって、例外を呼び出し元のクライアント コードが返されます。

- **トピックごとの SQL フィルター数** - トピックごとの最大 SQL フィルター数は 2,000 に制限されます。 このクォータに達すると、その後、そのトピックに追加のフィルターを作成する要求は拒否され、呼び出し元のコードが例外を受け取ります。

- **トピックごとの相関フィルター数** - トピックごとの相関フィルターの最大数は 100,000 に制限されます。 このクォータに達すると、その後、そのトピックに追加のフィルターを作成する要求は拒否され、呼び出し元のコードが例外を受け取ります。

クォータの詳細については、次を参照してください。 [Service Bus のクォータ](service-bus-quotas.md)します。

## 次のステップ

Service Bus メッセージングの詳細については、次のトピックをご覧ください。

- [Azure サービス バスの Premium メッセージング (ブログの投稿) の概要](http://azure.microsoft.com/blog/introducing-azure-service-bus-premium-messaging/)
- [Azure サービス バスの Premium (Channel9) メッセージングの概要](https://channel9.msdn.com/Blogs/Subscribe/Introducing-Azure-Service-Bus-Premium-Messaging)
- [Service Bus メッセージングの概要](service-bus-messaging-overview.md)
- [Azure Service Bus アーキテクチャの概要](fundamentals-service-bus-hybrid-solutions.md)
- [Service Bus キューの使用方法](service-bus-dotnet-how-to-use-queues.md)


[azure classic portal]: http://manage.windowsazure.com 

