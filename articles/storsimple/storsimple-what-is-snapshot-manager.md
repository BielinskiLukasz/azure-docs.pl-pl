<properties 
   pageTitle="StorSimple Snapshot Manager について | Microsoft Azure"
   description="StorSimple Snapshot Manager の概要、アーキテクチャ、および機能について説明します。"
   services="storsimple"
   documentationCenter="NA"
   authors="SharS"
   manager="carolz"
   editor="" />
<tags 
   ms.service="storsimple"
   ms.devlang="NA"
   ms.topic="article"
   ms.tgt_pltfrm="NA"
   ms.workload="TBD"
   ms.date="10/12/2015"
   ms.author="v-sharos" />

# StorSimple Snapshot Manager について

## 概要

StorSimple Snapshot Manager は、Microsoft Azure StorSimple 環境でのデータ保護とバックアップ管理を簡素化する、Microsoft 管理コンソール (MMC) スナップインです。 StorSimple Snapshot Manager では、データ センター内やクラウド内の Microsoft Azure StorSimple データを 1 つの統合ストレージ ソリューションとして管理できるため、バックアップ プロセスが簡素化され、コストが削減されます。

ここでは、StorSimple Snapshot Manager の概要、機能、Microsoft Azure StorSimple における役割について説明します。 

StorSimple デバイス、StorSimple Manager サービス、StorSimple Snapshot Manager、および StorSimple アダプターを含む、SharePoint の Microsoft Azure StorSimple システム全体の概要については、次を参照してください。 [StorSimple 8000 シリーズ: ハイブリッド クラウドの記憶域ソリューション](storsimple-overview.md)します。 
 
## StorSimple Snapshot Manager の目的とアーキテクチャ

StorSimple Snapshot Manager は、ローカルとクラウドのデータについて、特定の時点の整合性のあるバックアップ コピーを作成できる中央管理コンソールです。 たとえば、このコンソールを使用して次の操作を実行できます。

- ボリュームを構成、バックアップ、削除する。
- ボリューム グループを構成してバックアップ データのアプリケーション整合性を確保する。
- 事前に指定されたスケジュールでデータがバックアップされるようにバックアップ ポリシーを管理する。
- クラウドに保存して障害復旧に使用できる、データの独立したコピーを作成する。

StorSimple Snapshot Manager では、ボリュームをマウントし、(通常はアプリケーションごとに) それらをボリューム グループとして構成します。 StorSimple Snapshot Manager では、これらのボリューム グループを使用して、アプリケーション整合性のあるバックアップ コピーを生成します  ("アプリケーション整合性" とは、関連するすべてのファイルとデータベースが同期されており、特定の時点におけるアプリケーションの正確な状態が反映されていることをいいます)。 

StorSimple Snapshot Manager のバックアップの形式は増分スナップショットであり、前回のバックアップ以降の変更部分だけがキャプチャされます。 そのため、バックアップに必要なストレージが減り、バックアップの作成と復元を短時間で実行できます。 StorSimple Snapshot Manager では、スナップショットでキャプチャされるデータのアプリケーション整合性を確保するために、Windows ボリューム シャドウ コピー サービス (VSS) を使用します  (詳細については、「Windows ボリューム シャドウ コピー サービスとの統合」をご覧ください)。StorSimple Snapshot Manager では、バックアップ スケジュールを作成することも、必要に応じて即時バックアップを作成することもできます。 バックアップからデータを復元する必要がある場合は、StorSimple Snapshot Manager を使用してローカル スナップショットまたはクラウド スナップショットのカタログから選択できます。 Azure StorSimple は、必要なときに必要なデータだけを復元するので、復元操作の実行中にデータの可用性が長時間損なわれることはありません。

![StorSimple Snapshot Manager のアーキテクチャ](./media/storsimple-what-is-snapshot-manager/HCS_SSM_Overview.png)

**図 1: StorSimple Snapshot Manager のアーキテクチャ** 

## 各種ボリュームのサポート

StorSimple Snapshot Manager を使用して構成およびバックアップできるボリュームの種類は次のとおりです。 

- **ベーシック ボリューム** – ベーシック ボリュームは、ベーシック ディスク上の 1 つのパーティションです。 

- **シンプル ボリューム** – シンプル ボリュームは単一のダイナミック ディスクからディスク スペースを含むダイナミック ボリュームです。 シンプル ボリュームは、ディスク上の 1 つの領域、または同じディスク上の連結された複数の領域で構成されます  (シンプル ボリュームは、ダイナミック ディスク上にのみ作成できます)。シンプル ボリュームはフォールト トレラントではありません。

- **ダイナミック ボリューム** – ダイナミック ボリュームはダイナミック ディスク上に作成されるボリュームです。 ダイナミック ディスクでは、データベースを使用して、コンピューターのダイナミック ディスクに含まれているボリュームの情報を追跡します。 

- **ダイナミック ボリューム + ミラーリング** – ダイナミック ボリューム + ミラーリングは、RAID 1 アーキテクチャに基づいて構築されます。 RAID 1 では、まったく同じデータを複数のディスクに書き込むことで、ミラー セットを生成します。 これにより、要求されたデータを格納するどのディスクでも読み取り要求に対応できます。

- **クラスター共有ボリューム** -クラスターの共有ボリューム (Csv) でフェールオーバー クラスターでは同時に読み取りまたは同じディスクへの書き込みで複数のノードに置き換えます。 ドライブの所有権の変更や、マウント、マウントの解除、ボリュームの削除を行わずに、ノード間でのフェールオーバーを迅速に実行できます。 

>[AZURE.IMPORTANT] Csv と非 Csv を同じスナップショットを混在させないでください。 1 つのスナップショット内での CSV と非 CSV の混在はサポートされていません。 
 
StorSimple Snapshot Manager を使用すると、ボリューム グループ全体を復元したり、個々のボリュームを複製して個々のファイルを回復したりできます。

- [ボリュームとボリューム グループ](#volumes-and-volume-groups) 
- [バックアップの種類とバックアップ ポリシー](#backup-types-and-backup-policies) 

StorSimple Snapshot Manager の機能およびその使用方法の詳細については、次を参照してください。 [StorSimple Snapshot Manager ユーザー インターフェイス](storsimple-use-snapshot-manager.md)します。

## ボリュームとボリューム グループ

StorSimple Snapshot Manager を使用して、ボリュームを作成し、それらのボリュームをボリューム グループとして構成します。 

StorSimple Snapshot Manager では、ボリューム グループを使用して、アプリケーション整合性のあるバックアップ コピーを作成します。 "アプリケーション整合性" とは、関連するすべてのファイルとデータベースが同期されており、特定の時点におけるアプリケーションの正確な状態が反映されていることをいいます。 ボリューム グループ (とも呼ばれますが *コンシステンシー グループ*) と復元ジョブのバックアップの基礎です。

ボリューム グループはボリューム コンテナーとは異なります。 ボリューム コンテナーには、クラウド ストレージ アカウントと他の属性 (暗号化や帯域幅消費量など) を共有する 1 つ以上のボリュームが含まれます。 1 つのボリューム コンテナーに、仮想プロビジョニングされた最大 256 個の StorSimple ボリュームを含めることができます。 ボリューム コンテナーの詳細についてを参照してください [ボリューム コンテナーの管理](storsimple-manage-volume-containers.md)します。 ボリューム グループは、バックアップ操作を容易にするために構成するボリュームの集まりです。 異なるボリューム コンテナーに属する 2 つのボリュームを選択し、それらを同じボリューム グループに配置して、そのボリューム グループのバックアップ ポリシーを作成すると、適切なストレージ アカウントを使用して、適切なボリューム コンテナーで各ボリュームがバックアップされます。

>[AZURE.NOTE] ボリューム グループ内のすべてのボリュームは、1 つのクラウド サービス プロバイダーから取得されます。

## Windows ボリューム シャドウ コピー サービスとの統合

StorSimple Snapshot Manager では、Windows ボリューム シャドウ コピー サービス (VSS) を使用して、アプリケーション整合性のあるデータをキャプチャします。 VSS は、VSS 対応アプリケーションとやり取りして増分スナップショットの作成を調整することで、アプリケーション整合性を促進します。 VSS は、スナップショットの作成時に、アプリケーションが一時的に非アクティブ状態 (休止状態) になるようにします。 

StorSimple Snapshot Manager における VSS の実装は、SQL Server および汎用の NTFS ボリュームと連携します。 このプロセスは次のとおりです。 

1. 要求元が VSS を呼び出し、ターゲット アプリケーション内のライター ソフトウェアから情報を収集するよう VSS に要求します。通常、要求元は、データ管理/保護ソリューション (StorSimple Snapshot Manager など) またはバックアップ アプリケーションです。

2. VSS は、データの説明を取得するためにライター コンポーネントに問い合わせます。 ライターは、バックアップ対象となるデータの説明を返します。 

3. VSS は、バックアップに備えてアプリケーションを準備するようライターに合図を送ります。 ライターは、開いているトランザクションを完了し、トランザクション ログを更新するなどして、バックアップ用のデータを準備し、VSS に通知します。

4. VSS は、アプリケーションのデータ ストアを一時的に停止するようライターに指示し、シャドウ コピーの作成中にデータがボリュームに書き込まれないようにします。 このステップにより、データ整合性が確保されます。所要時間は 60 秒程度です。

5. VSS は、シャドウ コピーを作成するようプロバイダーに指示します。 プロバイダー (ソフトウェア ベースまたはハードウェア ベース) は、現在稼働しているボリュームを適切に操作し、要求に応じてボリュームのシャドウ コピーを作成します。 プロバイダーは、シャドウ コピーの作成が完了すると、VSS に通知します。

6. VSS は、ライターを介して、I/O を再開できることをアプリケーションに通知すると共に、シャドウ コピーの作成中に I/O が正常に一時停止されていたことを確認します。 

7. コピーが正常に完了していた場合、VSS はコピーの場所を要求元に返します。 

8. シャドウ コピーの作成中にデータが書き込まれていた場合、バックアップに整合性がなくなります。 VSS はシャドウ コピーを削除し、要求元に通知します。 要求元は、バックアップ プロセスを自動的に繰り返すことも、後で再試行するよう管理者に通知することもできます。

次の図を参照してください。

![VSS のプロセス](./media/storsimple-what-is-snapshot-manager/HCS_SSM_VSS_process.png)

**図 2: Windows ボリューム シャドウ コピー サービスのプロセス** 

## バックアップの種類とバックアップ ポリシー

StorSimple Snapshot Manager では、データをバックアップし、ローカルとクラウドに保存できます。 StorSimple Snapshot Manager を使用してデータをすぐにバックアップすることも、バックアップ ポリシーを使用して、自動バックアップのスケジュールを作成することもできます。 バックアップ ポリシーでは、保持するスナップショットの数を指定することもできます。 

### バックアップの種類

StorSimple Snapshot Manager を使用して作成できるバックアップの種類は次のとおりです。

- **ローカル スナップショット** – ローカル スナップショットは、StorSimple デバイスに格納されているボリューム データの特定の時点のコピー。 通常、この種のバックアップの作成と復元は短時間で実行できます。 ローカル スナップショットは、ローカル バックアップ コピーと同様に使用できます。

- **クラウド スナップショット** – クラウド スナップショットは、クラウドに保存されているボリューム データの特定の時点のコピー。 クラウド スナップショットは、別のオフサイト ストレージ システムにレプリケートされたスナップショットに相当します。 クラウド スナップショットは、障害復旧シナリオで特に役立ちます。

### オンデマンド バックアップとスケジュールされたバックアップ

StorSimple Snapshot Manager では、すぐに作成される 1 回限りのバックアップを開始することも、バックアップ ポリシーを使用して、定期的なバックアップ操作をスケジュールすることもできます。

バックアップ ポリシーとは、定期的なバックアップをスケジュールするために使用できる一連の自動化されたルールです。 バックアップ ポリシーでは、特定のボリューム グループのスナップショットを作成する頻度やパラメーターを定義できます。 ポリシーを使用して、ローカル スナップショットとクラウド スナップショットの両方について、開始日と有効期限、時刻、頻度、保持要件などを指定できます。 ポリシーは定義した直後に適用されます。 

StorSimple Snapshot Manager を使用して、必要に応じてバックアップ ポリシーを構成または再構成できます。 

作成するバックアップ ポリシーごとに、次の情報を構成します。

- **名前** – 選択したバックアップ ポリシーの一意の名前。

- **型** – バックアップ ポリシー、ローカル スナップショットとクラウド スナップショットの種類。

- **ボリューム グループ** – 選択したバックアップ ポリシーが割り当てられているボリューム グループ。

- **保有期間** – 保持するバックアップ コピーの数。 オンにした場合、 **すべて** ボックスで、すべてのバックアップ コピーを保持するボリュームごとのバックアップ コピーの最大数に到達するまで、この時点で、ポリシーは失敗し、エラー メッセージが生成されます。 保持するバックアップの数 (1 ～ 64) を指定することもできます。

- **日付** – バックアップ ポリシーが作成された日付。

バックアップ ポリシーの構成方法の詳細についてを参照してください [StorSimple Snapshot Manager を作成し、バックアップ ポリシーの管理を使用](storsimple-snapshot-manager-manage-backup-policies.md)します。

### バックアップ ジョブの監視と管理

StorSimple Snapshot Manager を使用して、今後予定されているバックアップ ジョブや完了したバックアップ ジョブの監視と管理を行うことができます。 さらに、StorSimple Snapshot Manager では、最大 64 個の完了したバックアップのカタログが提供されます。 このカタログを使用して、ボリュームまたは個々のファイルを検索し、復元できます。 

バックアップ ジョブの監視方法の詳細についてを参照してください [StorSimple Snapshot Manager を使用、バックアップ ジョブを表示および管理](storsimple-snapshot-manager-manage-backup-jobs.md)します。


## 次のステップ

- 詳細について [StorSimple Snapshot Manager を使用して、StorSimple ソリューションの管理に](storsimple-snapshot-manager-admin.md)します。

- ダウンロード [StorSimple Snapshot Manager](https://www.microsoft.com/download/details.aspx?id=44220)します。

