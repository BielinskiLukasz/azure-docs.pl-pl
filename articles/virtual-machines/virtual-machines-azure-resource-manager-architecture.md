<properties
   pageTitle="Azure リソース マネージャー アーキテクチャ | Microsoft Azure"
   description="リソース マネージャーのアーキテクチャと、コンピューティング、ネットワーク、およびストレージリソースプロバイダー間の関係について学ぶことができます。"
   services="virtual-machines"
   documentationCenter=""
   authors="davidmu1"
   manager="timlt"
   editor=""
   tags="azure-resource-manager,azure-service-management"/>

<tags
    ms.service="virtual-machines"
    ms.workload="infrastructure-services"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="12/01/2015"
    ms.author="davidmu"/>


# Azure リソース マネージャーのアーキテクチャ

[AZURE.INCLUDE [learn-about-deployment-models](../../includes/learn-about-deployment-models-rm-include.md)] 従来のデプロイ モデルです。



この記事はインフラストラクチャベースのアプリケーションとワークロードを作成するためにサービス管理とリソースマネージャーアーキテクチャ両方の概要を提供するものです。

## サービス管理用のアーキテクチャ

Azure リソース マネージャーに触れ、またさまざまなリソース プロバイダーのアーキテクチャについて説明する前に、Azure サービス管理に現在存在するアーキテクチャを確認してみましょう。 Azure サービス管理では、仮想マシンをホストするためのコンピューティング、ストレージ、またはネットワークは次によって提供されています:

- 仮想マシンをホストするためのコンテナーとして機能する必須のクラウド サービス (コンピューティング)  仮想マシンにはネットワーク インターフェイス カード (NIC) が自動的に提供され、IP アドレスは Azure によって割り当てられます。 さらに、クラウド サービスには、外部のロード バランサーのインスタンス、パブリック IP アドレス、および Windows ベースのバーチャル マシンのリモート デスクトップとリモート PowerShell トラフィックと Linux ベースのバーチャル マシン用の Secure Shell (SSH) トラフィックを許可する既定のエンドポイントが含まれています。
- オペレーティング システム、一時、および追加のデータ ディスク (ストレージ) を含む、仮想マシンの VHD を格納するのに必要なストレージ アカウント。
- サブネット化された構造を作成できる、また仮想マシンが配置されているサブネットを指定することができる、追加のコンテナーとして機能する、省略可能な仮想ネットワーク (ネットワーク)。

コンポーネントと Azure サービス管理のための関係を示します。

![](./media/virtual-machines-azure-resource-manager-architecture/arm_arch1.png)

## リソース マネージャーのアーキテクチャ

Azure リソース マネージャーでは、リソース プロバイダーは必要な構成で機能する仮想マシンを作成するための個別のリソースをサポートします。 仮想マシンには 3 つの主要なリソース プロバイダーがあります。

- コンピューティング リソース プロバイダー (CRP): 仮想マシンとオプションの可用性セットのインスタンスをサポートします。
- 記憶域リソースのプロバイダー (SRP): 必要とされるオペレーティング システム ディスクと追加のデータ ディスク、仮想マシンの VHD を保存するストレージ アカウントをサポートします。
- ネットワーク リソースプロバイダー (NRP): 必要とされる NIC、仮想マシンの IP アドレス、および仮想ネットワークとオプションのロード バランサー内のサブネット、Load Balancer の IP アドレスとネットワークのセキュリティ グループをサポートします。

さらに、リソース プロバイダー内にはリソース間の関係があります。

- 仮想マシンは BLOB ストレージにそのディスクを保存するための SRP で定義されている特定のストレージ アカウントに依存します。
- 仮想マシンは、NRP (必須) と、CRP で定義されている可用性セット (オプション) で定義されている、特定の NIC を参照します。
- NIC は、仮想マシンに割り当てられた IP アドレス (必須)、仮想ネットワークのサブネット(必須)、ネットワークのセキュリティ グループ (オプション) を参照します。
- 仮想ネットワーク内のサブネットは、ネットワークセキュリティ グループ (オプション) を参照します。
- Load Balancer のインスタンスは仮想マシンの NIC を含め(オプション)、Load Balancer パブリックまたはプライベート IP アドレス (オプション) を参照している IP アドレスのバックエンドプールを参照します。

![](./media/virtual-machines-azure-resource-manager-architecture/arm_arch2.png)

リソースのコンポーネント化では、Azure でホストされている IT ワークロードのインフラストラクチャを構成するときにより柔軟性を高めることができます。 Azure リソース マネージャーのテンプレートは、特定の構成に必要な依存のリソースのセットを作成するために、このような柔軟性を活用しています。 テンプレートを実行する時、リソース マネージャーはリソースの構成は、依存関係および参照を保持する適切な順序で作成されていることを確認します。 たとえば、リソース マネージャーは、サブネットと IP アドレス (ネットワークのセキュリティ グループはオプション) の仮想ネットワークが作成されるまで、仮想マシンの NIC を作成しません。

リソース グループは、複数の仮想マシン、NIC、IP アドレス、Load Balancer、サブネット、およびネットワーク セキュリティ グループで構成される、アプリケーションの関連リソースを保持するための論理コンテナーです。 たとえば、すべてのアプリケーションのリソースを1 つの管理単位として管理できます。 それらをすべて一緒に作成、更新、削除できます。 これは、1 つのリソース グループにデプロイされているサンプル アプリケーションです。

![](./media/virtual-machines-azure-resource-manager-architecture/arm_arch3.png)

アプリケーションは、次で構成されます。

- 同じストレージ アカウントを使用する 2 つのバーチャル マシンは、同じ可用性セットおよび仮想ネットワークの同じサブネット上にあります。
- 各仮想マシンの単一の NIC と VM IP アドレス。
- インターネット トラフィックを 2 つの仮想マシンの NIC に分散する外部 Load Balancer。

このアプリケーションのこれらのリソースのすべては、それらを含む 1 つのリソース グループによって管理されます。

また Azure PowerShell または Azure CLI を使用して、リソース マネージャー ベースの仮想マシンを作成するときに、コンポーネント化やリソースの依存関係も確認できます。 仮想マシンを作成するコマンドを実行する前に、 IP アドレスのあるサブネットと NICあるリソース グループ、ストレージ アカウント、仮想ネットワークを作成する必要があります。 詳細については、次を参照してください。 [の作成とリソース マネージャーと Azure PowerShell で Windows 仮想マシンを事前構成する](virtual-machines-ps-create-preconfigure-windows-resource-manager-vms.md)します。

## 次のステップ

[展開と管理仮想マシンが Azure リソース マネージャー テンプレートと Azure CLI を使用します。](virtual-machines-deploy-rmtemplates-azure-cli.md)

[展開し、Azure 仮想マシンを管理リソース マネージャー テンプレートと PowerShell を使用します。](virtual-machines-deploy-rmtemplates-powershell.md)

## その他のリソース

[Azure Compute、ネットワーク、記憶域プロバイダー Azure リソース マネージャーにおける](virtual-machines-azurerm-versus-azuresm.md)

[Azure リソース マネージャーの概要](resource-group-overview.md)





