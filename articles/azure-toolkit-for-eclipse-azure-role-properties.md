<properties
    pageTitle="Azure ロールのプロパティ"
    description="Azure Toolkit for Eclipse を使用して、Azure ロールの設定を構成する方法について説明します。"
    services=""
    documentationCenter="java"
    authors="rmcmurray"
    manager="wpickett"
    editor=""/>

<tags
    ms.service="multiple"
    ms.workload="na"
    ms.tgt_pltfrm="multiple"
    ms.devlang="Java"
    ms.topic="article"
    ms.date="11/20/2015" 
    ms.author="robmcm"/>

<!-- Legacy MSDN URL = https://msdn.microsoft.com/library/azure/hh690945.aspx -->

# Azure ロールのプロパティ #

Azure ロールに対する各種構成は、Azure Toolkit for Eclipse 内で設定することができます。

## Azure ロールのプロパティを構成する ##

Azure ロールのプロパティは、worker ロールのプロパティ ダイアログ ボックスで構成します。 Eclipse の Project Explorer ウィンドウで、ロールのコンテキスト メニューを開き、選択、 **Azure** サブメニューを選択します。 (Eclipse の Project Explorer でロールが表示されない場合は、Project Explorer で Azure プロジェクトを展開してください)。

![][ic789599]

設定できるさまざまなプロパティ、 **プロパティ** ダイアログ ボックスは、このトピックで説明されています。 多くのプロパティは、新しい Azure デプロイ プロジェクトを作成すると自動的に設定されます。

Azure のロールには、次のプロパティ ページが用意されています。

* [仮想マシン プロパティ](#virtual_machine_properties)
* [Caching のプロパティ](#caching_properties)
* [証明書のプロパティ](#certificates_properties)
* [コンポーネントのプロパティ](#components_properties)
* [デバッグのプロパティ](#debugging_properties)
* [エンドポイントのプロパティ](#endpoints_properties)
* [環境変数のプロパティ](#environment_variables_properties)
* [負荷分散/セッション アフィニティ (別名、"スティッキー セッション") のプロパティ](#session_affinity_properties)
* [ローカル ストレージのプロパティ](#local_storage_properties)
* [サーバー構成のプロパティ](#server_configuration_properties)
* [SSL オフロードのプロパティ](#ssl_offloading_properties)
    
<a name="virtual_machine_properties"></a>
### 仮想マシン プロパティ ###

開いている Eclipse の Project Explorer ウィンドウで、ロールのコンテキスト メニューをクリックして **Azure**, 、順にクリック **プロパティ**, が仮想マシンのサイズを変更する機能を与えられ、次の図のようにも、インスタンスの数を変更するとします。

![][ic719499]

>[AZURE.NOTE] Windows のみ: 設定するインスタンスの数の値に 1 を超えると、構成することも、アプリケーション サーバー、ツールキットによって、この設定に関係なく、エミュレーターで実行するロール インスタンスを 1 つだけです。 これは、同じコンピューター上で複数の異なるサーバー インスタンスを実行したときに (たとえば、すべてのサーバー インスタンスがポート 8080 にバインドしようとして発生する) ポート バインドの競合を回避するための動作です。 指定したインスタンス数の設定は保持されますが、その設定が有効になるのはクラウドにデプロイした場合のみです。

<a name="caching_properties"></a> 
### Caching のプロパティ ###

開いている Eclipse の Project Explorer ウィンドウで、ロールのコンテキスト メニューをクリックして **Azure**, 、] をクリックし、 **キャッシュ**します。 このダイアログ ボックスでは、併置された名前付きの memcache 互換キャッシュを有効にして、Web アプリケーションを高速化できます。

![][ic719483]

内で、 **キャッシュ** プロパティ ページで、次のグローバル設定を指定できます。

* 併置型キャッシュを有効にするかどうか。
* キャッシュ サイズ (メモリの割合で指定)。
* アプリケーションをクラウド サービスとして実行するときにキャッシュの状態を保存するためのストレージ アカウント名 (キャッシュの状態を保存しない場合は [none])。 コンピューティング エミュレーターでアプリケーションを実行するときは、ストレージ アカウント名は使用されません。ストレージ アカウント名を設定した場合 **(auto)** (既定値は、)、キャッシュの構成で選択したものと同じストレージ アカウントを自動的に使用します。、 **Publish to Azure** ダイアログ。

>[AZURE.NOTE]  **(Auto)** 設定が必要な Eclipse ツールキットを使用してデプロイを発行する場合にのみ発行ウィザード、効果を得られます。 手動でなどの外部メカニズムを使用して .cspkg ファイルを発行した場合、 [Azure 管理ポータル][], 、展開が正常に機能しません。

キャッシュのプロパティに関するダイアログ ボックスを次に示します。

![][ic719501]

* **[名前]:** 併置されているキャッシュの名前。
* **ポート番号:** キャッシュに使用するポート番号。
* **有効期限ポリシー:** キャッシュ内のキーが期限切れにするかを指定する値は次のいずれかです。
    * **絶対値:** キーでは、指定された時間と有効期限が切れる **live 分** に達した。
    * **NeverExpires:** キーには、有効期限はありません。
    * **スライディング ウィンドウ:** で指定された時間にわたってアクセスされていない場合に、キーが期限切れ **live 分**、たびにアクセスされる期限の時間がリセットされます。
* **有効期限の分:** live の有効期限ポリシーが適用される、memcached キーの分単位の最大数。
* **別のロール インスタンス上のレプリケートされたバックアップと高可用性:** を使用して高可用性のレプリケートされた別のロール インスタンスのバックアップに提供が有効な場合役立ちます。 この機能を使用するには、デプロイに対して少なくとも 2 つのロール インスタンスが有効になっている必要があります。

新しいキャッシュを追加する] をクリックして、 **追加** ボタンをクリックして、 **キャッシュ** プロパティ ページと **Configure Named Cache** ダイアログが表示されます。 前述のプロパティの値を指定してください。

名前付きキャッシュを変更する、キャッシュを選択し、クリックして、 **編集** ボタンをクリックして、 **キャッシュ** プロパティ ページです。 キャッシュのプロパティを変更するためのダイアログ ボックスが開きます。 キーを押して **OK** キャッシュ値を保存します。

キャッシュの削除、キャッシュを選択し、クリックして、 **削除** ボタンをクリックして、 **キャッシュ** クリックしてプロパティ ページで、 **[はい]** 削除を確認します。

キャッシュを使用する方法の詳細については、次を参照してください。 [併置型キャッシュを使用する方法][]します。

<a name="certificates_properties"></a> 
### 証明書のプロパティ ###

開いている Eclipse の Project Explorer ウィンドウで、ロールのコンテキスト メニューをクリックして **Azure**, 、] をクリックし、 **証明書**します。

![][ic710964]

このダイアログ ボックスでは、Eclipse プロジェクトで参照する証明書を追加または削除できます。 ここに表示された証明書は Java キーストア内に自動的には格納されないため、自動的に Java アプリケーション内で使用できるようにはなりません。 デプロイしたアプリケーションの実行環境となる仮想マシン上の Windows 証明書ストアにプリロードしておき、後で他の Windows ソフトウェアから使用することができるよう、これらの証明書は Azure に登録されるのみです。 現時点では、証明書を使用するツールキットの機能のみがこのようにで参照されている、 **証明書** ダイアログは [SSL オフロード][], 、インターネット インフォメーション サービス (IIS) と Application Request Routing (ARR)、この方法で使用可能にする適切な証明書を要求に依存しているのためです。

発行ウィザードを使用して Azure にプロジェクトをデプロイするとき、これらの証明書に対応する Personal Information Exchange (PFX) ファイルをパスワードと共に指定するように求められます。これにより、これらのファイルが以前に Azure サービスにアップロードされていない場合にのみ自動的に Azure サービスにアップロードされるようになります。

<a name="components_properties"></a> 
### コンポーネントのプロパティ ###

開いている Eclipse の Project Explorer ウィンドウで、ロールのコンテキスト メニューをクリックして **Azure**, 、] をクリックし、 **コンポーネント**します。 このダイアログ ボックスで、ロールのコンポーネントを追加、変更、削除できるほか、コンポーネントが処理される順序を変更することができます。

![][ic719502]

Java アプリケーション プロジェクト、特殊ファイル、実行可能コマンド ライン ステートメントなど、デプロイで必要な依存関係は、この機能を使って Azure デプロイ プロジェクトに追加することができます。

各コンポーネントに対し、次の項目を指定できます。

* Azure デプロイ プロジェクトのビルド時にコンポーネントをインポートするときの処理ステップ。
* コンポーネントを Azure のクラウドにデプロイするときの処理ステップ。

>[AZURE.NOTE] コンポーネントのファイルまたはコマンドラインを指定する場合、カスタムの手順は、Windows ベースのオペレーティング システムに対して有効である必要がありますのでに、展開、Windows 仮想マシンに発行することに注意してください。 

コンポーネントには、次のプロパティがあります。

* **[インポート:** 方法、コンポーネントをプロジェクトにインポートするプロジェクトのビルド時を示す方法。 次のいずれかの値を指定できます。
    * **コピー:** コンポーネントは、指定されたローカル パスからのコピー、 **から** プロパティに、ロールの **approot** ディレクトリ。
    * **EAR:** コンポーネントは Java エンタープライズ アーカイブ (EAR) で指定されたローカル パスでエンタープライズ アプリケーション プロジェクトからインポートでは、 **から** プロパティです。 (その場所にあるプロジェクトの種類に基づいてツールキットによって自動的に検出されます)。
    * **JAR:** コンポーネントは Java アーカイブ (JAR) で指定されたローカル パスにある Java プロジェクトからインポートされ、 **から** プロパティです。 (その場所にあるプロジェクトの種類に基づいてツールキットによって自動的に検出されます)。
    * **none:** コンポーネントをインポートする処理は行われません。 これは、コンポーネントは、ロールに既に存在するときに適用 **approot** ディレクトリに、コンポーネントがだけで、実行可能コマンド ライン ステートメントで指定されているか、 **として** プロパティと、 **展開** メソッドは **exec**します。
    * **WAR:** コンポーネントは Java web アプリケーション アーカイブ (WAR) で指定されたローカル パスで動的 Web プロジェクトからインポートされ、 **から** プロパティです。 (その場所にあるプロジェクトの種類に基づいてツールキットによって自動的に検出されます)。
    * **zip:** コンポーネントは zip ファイルであり、ディレクトリまたはによって指定されたファイルを zip 圧縮してインポートした、 **から** プロパティです。
* **インポート元:** フォルダーまたはデプロイメントにインポートするアイテムを表すファイルをローカル コンピューター上のソース パス。 このプロパティには Windows の環境変数を使用できます。 ロールのすべての可能なコンポーネントがインポートされる **approot** ディレクトリ、プロジェクトのビルド時にします。
    
    (コンピューティング エミュレーターにではなく) クラウドにデプロイするときは、ダウンロードによってコンポーネントをデプロイすることができます。 コンポーネントの追加については、以下の関連情報を参照してください。    
    
* **As:** 、ロールに、コンポーネントをインポートするファイル名 **approot** ディレクトリおよび最終的に、Azure クラウドにデプロイします。 ローカル コンピューター上のファイルの名前と同じ名前を使用する場合は、このプロパティを空欄にしておいてください。 (実行可能なコンポーネント、つまり、いる **展開** メソッドに設定されている **exec**, 、任意の Windows コマンド ライン ステートメントを指定できます)。

    >[AZURE.IMPORTANT] この値に空白文字を使用する場合は、配置方法によって異なる方法で、処理されます。 デプロイ方法が場合 **exec**, 、スペースは、ファイル名の一部ではなく、コマンドライン引数の区切り記号として解釈されます。 その他のデプロイ方法ではいずれも、空白がファイル名の一部として解釈されます。
    
* **配置:** デプロイが開始されるときに、コンポーネントに適用される動作を示す方法。 次のいずれかの値を指定できます。
    * **コピー:** によって指定された宛先パスにコンポーネントのコピー、 **に** プロパティです。
    * **exec:** コンポーネントが実行可能な Windows コマンド ライン ステートメントで指定されたパスのコンテキストで実行される、 **に** 、デプロイメントの開始時のプロパティです。
    * **none:** 、デプロイメントの開始時に、コンポーネントにアクションを適用してなし。
    * **zip:** コンポーネントが指定された宛先パスに zip 形式ではない、 **に** プロパティです。 このメソッドは、使用可能な場合にのみ、 **インポート** プロパティは **zip**します。
* **インポート先:** 先コンポーネントが配置されるバーチャル マシン上のパス。 このプロパティには、Windows 環境変数を使用できますされ、ファイルのパスに対する相対 **approot**します。
    
新しいコンポーネントを追加する] をクリックして、 **追加** ボタンをクリックして、 **コンポーネント** プロパティ ページで、および **Azure ロール コンポーネント** ダイアログが表示されます。 前述のプロパティの値を指定してください。 

新しい WAR コンポーネントを追加する例を次に示します。

![][ic719503]

ときに、ダウンロードからコンポーネントを展開する場合は、(コンピューティング エミュレーターではなく) クラウドに展開することを確認 **で、パッケージではなく、クラウドからデプロイ** がオンになっています。 Azure ストレージ アカウントからダウンロードする場合からストレージ アカウントを選択、 **ストレージ アカウント** ドロップダウン リスト (クリックすることができます、 **アカウント** が一覧にどのような変更へのリンク) を部分的に入力されます、 **URL** フィールドをクリックし、URL の残りの部分です。 Azure のストレージを使用したくない場合は、選択 **(なし)** から、 **ストレージ アカウント** ドロップ ダウン ボックスの一覧し、内のコンポーネントに URL を入力、 **URL** フィールドです。 次のいずれかの方法を指定します。

* **コピー:** で指定された宛先パスにダウンロードしたコンポーネントがコピー、 **ディレクトリに** パス。
* **同じ:** のと同じ方法 **ダウンロードからデプロイ** としての **展開パッケージから**します。
* **zip:** 、ダウンロードしたコンポーネントは、指定された宛先パスに解凍、 **ディレクトリに** パス。

コンポーネントを変更するコンポーネントを選択し、をクリックして、 **編集** ボタンをクリックして、 **コンポーネント** プロパティ ページです。 コンポーネントのプロパティを変更するためのダイアログ ボックスが開きます。 キーを押して **OK** コンポーネント値を保存します。

コンポーネントを削除するコンポーネントを選択し、をクリックして、 **削除** ボタンをクリックして、 **コンポーネント** クリックしてプロパティ ページで、 **はい** 削除を確認します。

コンポーネントは、リストの先頭から順に処理されます。 使用して、 **上へ移動** と **下へ移動** に順序を配置します。

>[AZURE.NOTE] サーバーの構成機能は、同様にコンポーネントに依存します。 それらのコンポーネントを削除したり編集したりするには、対応するサーバーの構成を削除する必要があります。 そのようなコンポーネントに変更を加えようとすると、この点を確認するメッセージが表示されます。

<a name="debugging_properties"></a> 
### デバッグのプロパティ ###

開いている Eclipse の Project Explorer ウィンドウで、ロールのコンテキスト メニューをクリックして **Azure**, 、] をクリックし、 **デバッグ**します。 次の図に示すように、このダイアログ ボックスでリモート デバッグを有効または無効にしたり、デバッグ構成を作成したりできます。

![][ic719504]

デバッグの関連情報については、次を参照してください。 [Eclipse で Azure アプリケーションのデバッグ][]します。

<a name="endpoints_properties"></a> 
### エンドポイントのプロパティ ###

開いている Eclipse の Project Explorer ウィンドウで、ロールのコンテキスト メニューをクリックして **Azure**, 、] をクリックし、 **エンドポイント**します。 次の図に示すように、このダイアログ ボックスではエンドポイントを作成、編集、削除することができます。

![][ic719505]

エンドポイントを追加する] をクリックして、 **追加** ボタンをクリックして、 **エンドポイント** プロパティ ページで、および **エンドポイントの追加** ダイアログが表示されます。

![][ic710897]

エンドポイントの名前を入力して、種類を選択 (どちらか **入力**, 、**内部**, 、または **[instanceinput]**)、パブリックとプライベート ポートを指定します。 キーを押して **OK** 新しいエンドポイント値を保存します。

エンドポイントの種類によっては、次のようにポート範囲を使用できます。

* 入力インスタンス エンドポイントの場合は、パブリック ポートがポートの範囲を指定できます (たとえば **2000年-2010年**) とプライベート ポートには固定値。
* 内部エンドポイントの場合、パブリック ポートは使用されません。プライベート ポートに範囲を指定してください。空欄またはアスタリスクを指定して Azure で自動的にポートを設定することもできます。
* 入力エンドポイントの場合、パブリック ポートに指定できるのは固定値のみです。プライベート ポートには固定値を指定できるほか、空欄またはアスタリスクを指定して Azure で自動的にポートを設定することもできます。

範囲ではなく単一のポート番号を使用する場合は、範囲の終わりを示すテキスト ボックスは空欄にしてください。

設定されている場合は、自動的に、するポートは、実行時に実際に使用されているポートを決定する必要があります、アプリケーション使用できる Azure サービス ランタイム API に記載されている、 [com.microsoft.windowsazure.serviceruntime パッケージの概要][]します。

インスタンス入力エンドポイントを使用して、複数インスタンス デプロイメントのデバッグを支援する方法を参照してください [複数インスタンス配置で特定のロール インスタンスのデバッグ][]します。

エンドポイントを変更するエンドポイントを選択し、をクリックして、 **編集** ボタンをクリックして、 **エンドポイント** プロパティ ページです。 エンドポイントの名前、種類、パブリック ポート、プライベート ポートを変更するためのダイアログ ボックスが開きます。 キーを押して **OK** 変更したエンドポイント値を保存します。

エンドポイントを削除するエンドポイントを選択し、をクリックして、 **削除** ボタンをクリックして、 **エンドポイント** クリックしてプロパティ ページで、 **はい** 削除を確認します。

ロールのユーザーによって有効にされた機能 (キャッシュ、リモート デバッグ、セッション アフィニティ、SSL オフロードなど) を適切に構成するために、特殊なエンドポイントがツールキットによって自動的に構成されることがあります。これらのエンドポイントは、ユーザー定義のエンドポイントと共に一覧に表示されます。 関連付けられている機能が有効になっている限り、これらの自動生成されたエンドポイントをユーザーが編集または削除することはできません。

<a name="environment_variables_properties"></a> 
### 環境変数のプロパティ ###

開いている Eclipse の Project Explorer ウィンドウで、ロールのコンテキスト メニューをクリックして **Azure**, 、] をクリックし、 **環境変数**します。 次の図に示すように、このダイアログ ボックスで環境変数を作成、変更、削除することができます。

![][ic719506]

スタートアップ スクリプトの中で指定された環境変数の値は、ロールの起動時に与えられます。

>[AZURE.NOTE] 環境変数を指定する場合は、環境変数は、Windows ベースのオペレーティング システムに対して有効である必要がありますのでに、デプロイメントを Windows 仮想マシンに発行されることに留意してください。

クリックして新しい環境変数を作成、ロールの起動時に使用される環境変数の例として、 **追加** ] ボタンをクリックします。 という名前の環境変数を次に示します **MyRoleVersion** 作成し、値が割り当てられている **1.0**します。

![][ic659268]

jsp コードでは、`System.getenv` メソッドを使用してこの値を表示できます。

    <body>
      <b> Hello World!</b>
      <p>Running role version: <%= System.getenv("MyRoleVersion") %></p>
    </body>

アプリケーションを実行すると、次の出力が得られます。

![][ic552233]

環境変数を変更するには、環境変数を選択し、をクリックして、 **編集** ボタンをクリックして、 **環境変数** プロパティ ページです。 環境変数のプロパティを変更するためのダイアログ ボックスが開きます。 キーを押して **OK** 、環境変数の値を保存します。

環境変数を削除する環境変数を選択し、をクリックして、 **削除** ボタンをクリックして、 **環境変数** クリックしてプロパティ ページで、 **はい** 削除を確認します。

ロールのユーザーによって有効にされた機能 (サーバー構成、リモート デバッグ、ローカル ストレージなど) を適切に構成するために、特殊な環境変数がツールキットによって自動的に構成されることがあります。これらの環境変数は、ユーザー定義の環境変数と共に一覧に表示されます。 関連付けられている機能が有効になっている限り、これらの自動生成された環境変数をユーザーが編集または削除することはできません。

<a name="session_affinity_properties"></a> 
### 負荷分散/セッション アフィニティ (別名、"スティッキー セッション") のプロパティ ###

開いている Eclipse の Project Explorer ウィンドウで、ロールのコンテキスト メニューをクリックして **Azure**, 、] をクリックし、 **負荷分散**します。 次の図に示すように、このダイアログ ボックスでセッション アフィニティを有効または無効にすることができます。

![][ic719492]

関連情報については、次を参照してください。 [セッション アフィニティ][]します。 また、」の説明に従って、SSL オフロードのコンテキストでこの機能の動作に注意してください [SSL オフロード][]します。

<a name="local_storage_properties"></a> 
### ローカル ストレージのプロパティ ###

開いている Eclipse の Project Explorer ウィンドウで、ロールのコンテキスト メニューをクリックして **Azure**, 、] をクリックし、 **ローカル記憶域**します。 アプリケーションを実行している仮想マシンの一時ローカル ストレージは、このダイアログ ボックスで作成、変更、削除することができます。 次の図に示すように、ローカル ストレージのサイズとして特定の値を設定したり、ロールをリサイクルするときに内容を保持するかどうかを設定したりすることができます。

![][ic719508]

また、必要に応じて、ローカル ストレージに対応する環境変数を指定することもできます。

既定では、すべての Azure に展開することに配置 (および解凍) で、 **approot** 、ロール インスタンスのフォルダーです。 ほとんどの単純な展開が収まります解凍した後も、割り当てられる領域、 **approot** ディレクトリは限られ、適切に定義されません (未満妥当な経験則では 1 GB)。 そのため、Azure ことを確認するに収まらない可能性がある大規模なデプロイメントのための十分なディスク領域の割り当て、 **approot** フォルダーを使用して、ローカル ストレージ リソースを設定する必要があります、 **ローカル記憶域** ダイアログ。 これを行う簡単な方法を参照してください。 [大規模な展開を展開する][]です。

スタートアップ スクリプトから、ストレージ リソースを簡単に参照できます (たとえば、 **startup.cmd**) のように、リソースに Eclipse ツールキットによって自動的に関連付けられている環境変数を使用して、 **ローカル記憶域** ダイアログ。 環境変数には、構成したローカル リソースの完全なパスが、スタートアップ スクリプトの実行時に格納されます。 

ローカル ストレージ リソースを変更するには、ローカル ストレージ リソースを選択し、をクリックして、 **編集** ボタンをクリックして、 **ローカル記憶域** プロパティ ページです。 ローカル ストレージ リソースのプロパティを変更するためのダイアログ ボックスが開きます。 キーを押して **OK** ローカル ストレージ リソースの値を保存します。

ローカル ストレージ リソースを削除するには、ローカル ストレージ リソースを選択し、クリックして、 **削除** ボタンをクリックして、 **ローカル記憶域** クリックしてプロパティ ページで、 **[はい]** 削除を確認します。

<a name="server_configuration_properties"></a> 
### サーバー構成のプロパティ ###

開いている Eclipse の Project Explorer ウィンドウで、ロールのコンテキスト メニューをクリックして **Azure**, 、] をクリックし、 **サーバー構成**します。 このダイアログ ボックスで、デプロイで使用される JDK や Java アプリケーション サーバーを追加、削除、変更できるほか、デプロイで使用されるアプリケーション (WAR、JAR、EAR ファイルなど) を追加したり削除したりすることができます。

### JDK の構成 ###

このダイアログ ボックスでは、デプロイに使用する JDK パッケージを指定できます。 Windows 上で Eclipse を使用している場合は、Azure エミュレーターで実行したときにローカルで使用する JDK パッケージを指定できるほか、そのローカル インストールを Azure にデプロイすることができます。 Windows 以外のオペレーティング システムでは、エミュレーター JDK の設定は適用されません。Windows との互換性がないため、ローカルにインストールされた JDK をデプロイすることはできません。 ただし、Azure にデプロイするサード パーティ製の JDK パッケージを選択したり、代替となるダウンロード場所から Windows と互換性のある独自の JDK パッケージを参照したりすることは、使用しているオペレーティング システムに関係なくいつでも行うことができます。

Windows 上の JDK を指定する方法の例を次に示します。

![][ic780647]

Windows で Eclipse を使用している場合は、コンピューティング エミュレーターで使用する JDK を指定できます。これを行うことを確認 **ローカルでテストするためにこのファイル パスから JDK を使用** がオンになって、 **エミュレーター デプロイ** セクションです。 そのうえで JDK のローカル パスを指定します。必要な JDK が自動選択されない場合は、目的の JDK を参照画面で選択してください。 また、Azure クラウド サービスを JDK をデプロイするオプションがあります。これを行うには、選択、 **Deploy my local JDK (クラウドの記憶域には自動アップロード)** オプション、 **クラウド デプロイ** セクションです。

注: Windows 以外のオペレーティング システムで、 **エミュレーター デプロイ** 設定、および **Deploy my local JDK** オプションは使用できません。 Windows 以外のサポート対象オペレーティング システム (Mac など) 上で JDK を指定する例を次に示します。

![][ic789643]

次の 2 つがある場合に、オペレーティング システムに関係なく **クラウド デプロイ** ソースと JDK パッケージの種類のオプション。

* **[Deploy a 3rd party JDK package available on Azure]** 
* **[Deploy from a custom download]** 

使用している場合、 **Azure から使用可能なサード パーティ JDK パッケージを展開** オプション。

1. チェック ボックスをオンに **Azure から使用可能なサード パーティ JDK パッケージを展開**します。
1. ドロップダウン リストから、Azure で利用可能なサード パーティ製の JDK パッケージを選択します。
1.  **JDK** ] タブは Windows では、次のようになります。
    ![][ic780648]
    Mac OS またはサポートされている他の非 Windows オペレーティング システムでは、次のように表示されます。
    ![][ic789643]
1. クリックして **OK** して変更を保存します。
1. サード パーティ製の JDK パッケージ プロバイダーからライセンス契約に同意することを求められたら、ライセンス条項を確認します。 クリックして、条項に同意する場合 **[はい]** を閉じる、 **使用許諾契約書に同意** ダイアログ。
    ドロップダウン リストに表示される項目を基になるロジックを **Azure から使用可能なサード パーティ JDK パッケージを展開** オプションをカスタマイズすることができます。 項目をカスタマイズする、 **JDK** ダイアログ ボックスで、をクリックして、 **カスタマイズ** リンクします。 終了して、 **JDK** プロパティ ページ、開く、 **componentsets.xml** ファイルを eclipse で、必要に応じて変更することができます。 ドキュメントを **componentsets.xml** に含まれる、 **componentsets.xml** ファイル自体です。

使用している場合、 **カスタム ダウンロードから JDK をデプロイする** オプション。

1. JDK インストール ディレクトリの ZIP を作成します。このとき、ディレクトリの内容ではなくノード自体が ZIP 構造の子になるようにします。 後で必要になるのでこのディレクトリの名前を控えておきます。この JDK インストールは Windows 仮想マシンにデプロイされることに注意してください。
1. Azure ストレージ アカウントに ZIP を BLOB としてアップロードします。 Azure Storage への BLOB のアップロードには、外部のツールを使用できます。 プライベート BLOB を使用することをお勧めします。 ZIP コンテンツの BLOB の URL を書き留めます。
1. チェック ボックスをオンに **カスタム ダウンロードから JDK をデプロイする**です。
    Azure ストレージ アカウントからダウンロードする場合からストレージ アカウントを選択、 **ストレージ アカウント** ドロップダウン リスト (クリックすることができます、 **アカウント** が一覧にどのような変更へのリンク) を部分的に入力されます、 **URL** フィールドをクリックし、URL の残りの部分です。 Azure のストレージを使用したくない場合は、選択 **(なし)** から、 **ストレージ アカウント** ドロップ ダウン ボックスの一覧し、JDK ダウンロードの URL を入力、 **URL** フィールドです。 Azure Storage を使用する場合、URL 内の BLOB 名は小文字で指定してください。
1. いることを確認、 **JAVA_HOME** ] テキスト ボックスは、適切なディレクトリ名を参照します。 既定では、ローカルでの使用のために選択した値と同じ JDK ディレクトリ名が参照されます。 かどうか、zip ファイルに含まれるディレクトリは、別の名前 (たとえば、別のバージョンを使用)、ためにディレクトリ名を更新、 **JAVA_HOME** textbox 同様に、この設定がため (コンピューティング エミュレーター) ではなくクラウドで使用します。
1. クリックして **OK** して変更を保存します。

これで終了です。 以上で完了です。ここでクラウド向けにビルドすると、パッケージ サイズが大幅に縮小されることがわかります。通常、ビルド プロセスに要する時間も短くなり、クラウドに発行するときのデプロイ自体の時間も短縮されます。 なお、 **Deploy my local JDK (クラウドの記憶域には自動アップロード)** または **カスタム ダウンロードから JDK をデプロイする** オプションは、クラウドでアプリケーションが展開されたときにのみ有効にします。 これらのオプションは、コンピューティング エミュレーター環境には作用しません。コンピューティング エミュレーターにデプロイするときは、ローカルに置かれている方のコンポーネントが使用されます。 

### サーバー構成 ###

アプリケーション サーバーを指定する方法の例を次に示します。

![][ic796926]

いることを確認、 **この種類のサーバーを展開** ] チェック ボックスが選択されを使用するアプリケーション サーバーの種類を選択します。

クラウド デプロイに使用するサーバーを指定する場合、次のオプションを利用できます。

1. **Azure で使用できるサード パーティ サーバーを展開** -これは特に、効率と単純さは優先順位があり、サーバーにカスタム構成が必要としない開発およびテスト シナリオに該当します。 また、これらのサーバーのいずれかを開始点として使用するものの、必要なサーバー カスタマイズ手順をデプロイのスタートアップ ロジックに含める場合も、このオプションを使用します。
1. **カスタム ダウンロードからデプロイ** -これは、特別に準備および構成されたサーバー、クラウドで使用する場合がある場合に特に実稼働のシナリオに該当します。
1. **ローカル サーバーのインストールを展開** -これは特に、ローカル サーバーのインストールは、使用するためのカスタム構成が既に場合に該当します。 このオプションを選択する場合は、ローカル サーバーのパスも指定する必要があります、 **ローカル サーバーのパス** 下のテキスト ボックスです。

使用している場合、 **Azure で使用できるサード パーティ サーバーを展開** オプション。

1. チェック ボックスをオンに **Azure で使用できるサード パーティ サーバーを展開**します。
1. ドロップダウン メニューから、クラウド上のデプロイで使用する目的のサーバー ソフトウェアを選択します。 使用するサーバーの種類を既に指定してある場合、選択できるのは、そのサーバーの種類と同じファミリに属するクラウド サーバーに限定されます。 まだサーバーの種類を選択していない場合は、Azure で現在使用できる任意のサーバーから選択できます。サーバーの種類は自動的に選択されます。
1. クリックして **OK** して変更を保存します。

使用する場合、 **カスタム ダウンロードからデプロイ** オプション。

1. 前の手順に従ってサーバーの種類が既に選択されていることを確認します。 サーバーは選択したサーバーの種類と同じファミリに属している必要があるため、この選択で、カスタム ダウンロードからサーバーをデプロイする方法をプラグインに指示します。
1. チェック ボックスをオンに **カスタム ダウンロードからデプロイ**します。
    Azure ストレージ アカウントからダウンロードする場合からストレージ アカウントを選択、 **ストレージ アカウント** ドロップダウン リスト (をクリックすることができます、 **アカウント** 一覧には、どのような変更へのリンク) 部分的に読み込みますが、 **URL** フィールド、および記入して、サーバーへの URL の残りの部分 (Azure ストレージ URL 内の blob 名を使用して小文字にする必要があります) と ZIP のダウンロードです。 Azure のストレージを使用したくない場合は、選択 **(なし)** から、 **ストレージ アカウント** ドロップ ダウン ボックスの一覧し、サーバーに、URL を入力で ZIP のダウンロード、 **URL** フィールドです。 通常この ZIP に、アプリケーション サーバーのインストール ディレクトリを表す子フォルダーが格納されます。 たとえば、Apache Tomcat 7.0.35 の zip を使用している場合、zip 内なるなどのインストール ディレクトリを表す子フォルダー **apache tomcat-7.0.35**します。 
1. ホーム ディレクトリの環境変数の値を指定します。 この値は、ローカル アプリケーション サーバーがある場合に既定で使用される値になりますが、クラウドのアプリケーション サーバーがローカル アプリケーション サーバーと異なる場合は別の値を指定することができます。 ただし、クラウド アプリケーション サーバーは、前に選択したサーバーの種類と同じファミリに属している必要があります。
    今後、クラウド アプリケーション サーバーの zip を更新する場合は、ホーム ディレクトリ設定を手動で変更するか、ローカル設定に合わせて変更することができます (ローカル アプリケーション サーバーも変更した場合)。
1. クリックして **OK** して変更を保存します。

表示するアイテムを基になるロジック、 **Server** のタブ、 **サーバー構成** プロパティ ページをカスタマイズすることができます。 これは、実際のニーズが既定値を超える場合や他のサーバーを追加する場合に必要となる高度な機能です。 ロジックをカスタマイズする、 **サーバー** ダイアログ ボックスで、をクリックして、 **をカスタマイズする** リンクします。 終了して、 **サーバー構成** プロパティ ページおよび開く、 **componentsets.xml** ファイルを eclipse で、サーバーの構成テンプレートを拡張する必要に応じて変更することができます。 ドキュメントを **componentsets.xml** に含まれる、 **componentsets.xml** ファイル自体です。

使用している場合、 **自分のローカル サーバー (クラウドの記憶域には自動アップロード) を展開** オプション。

1. チェック ボックスをオンに **自分のローカル サーバー (クラウドの記憶域には自動アップロード) を展開**します。
1. 使用して、 **ストレージ アカウント** ドロップダウン リストで、 **(auto)**します。 指定した場合 **(auto)** ここでは、Eclipse ツールキットは、同じストレージ アカウントを使用、サーバーでデプロイメントに対して選択したものとして、 **Publish to Azure** ダイアログ。
1. クリックして **OK** して変更を保存します。

コンピューター上のサーバーのインストール パスを選択、 **ローカル サーバーのパス** テキスト ボックスの次の条件のいずれかに該当する場合。

* デプロイをエミュレーターでテストする (Windows にのみ適用されます)。
* ローカルにインストールされているサーバーをクラウドにデプロイする。
* ケースをクラウドで独自のカスタム サーバー ダウンロードを使用して、またことを確認する、 **自分のローカル サーバー (クラウドの記憶域には自動アップロード) を展開** 上オプションを選択します。

これらの条件のいずれにも該当しない場合は、ローカル サーバーの設定を省略できます。

### アプリケーションの構成 ###

アプリケーションを指定する方法の例を次に示します。

![][ic719512]

をクリックして **追加** を別のアプリケーションを追加するまたは **削除** 、アプリケーションを削除します。 効率を高めるために使用して、クラウドに展開するときに、アプリケーションのソースのダウンロードを使用する場合の [コンポーネントのプロパティ](#components_properties) などのストレージ アカウントの URL を指定します。 

2014 年 4 月リリース以降、アプリケーションは自動的に、同じストレージ アカウントにアップロード (下にある、 **eclipsedeploy** コンテナー) と、展開用に選択します。 デプロイのスタートアップ ロジックには、このストレージ アカウントから最初にそれらのアプリケーションをダウンロードする手順が含まれています。 これは、デプロイ内のアプリケーションをアップグレードする際にパッケージ全体を再ビルドして再デプロイする必要がないことを意味します。つまり、手動で (たとえば、Azure ポータルを使用して) 新しいバージョンのアプリケーションをストレージ アカウントに直接アップロードして、ツールキットによってそこにアップロードされていた WAR ファイルを置き換える必要はありません。 Azure の管理ポータルまたはコマンド ライン ユーティリティを使用して、これらのすべてのロール インスタンスのリサイクルを開始するだけです  (現在、Eclipse ツールキット内から直接リサイクルをトリガーすることはできません)。

### サーバーの構成に関する注意事項 ###

加えられた変更、 **サーバー構成** プロパティ ページに反映される、 `<component>` package.xml ファイルの要素。

使用すると、 **Automatically upload...]** または **Deploy from download...** JDK またはアプリケーション サーバー、およびそのするためのオプションが (コンピューティング エミュレーターではなく) クラウド用にビルドして、ネットワークに接続している、Ant ビルダーがダウンロードの可用性を確認するときも、コンソール出力では、次のようなメッセージの構築が発生する可能性があります。

`[windowsazurepackage] Verifying blob availability (https://example.blob.core.windows.net/temp/tomcat6.zip)...` 

選択した場合、 **Deploy from download...** オプションは、次の警告が表示されるが、ビルドは続行されます。

`[windowsazurepackage] warning: Failed to confirm blob availability! Make sure the URL and/or the access key is correct (https://example.blob.core.windows.net/temp/tomcat6.zip).` 

この警告は、単にダウンロードの利用の可否が検証されていないことを示しています。 したがって、何かの理由でクラウドでのデプロイに失敗した場合は、この警告を受け取っていないか確認してください。

(たとえば、ダウンロードの検証が原因でビルドが不必要に遅くなっていると思われる場合に) ダウンロードの検証を無効にするには、package.xml の `<windowsazurepackage>` 要素の `verifydownloads` 属性を `false` に設定します。 

`<windowsazurepackage verifydownloads="false" ...>` 

選択した場合、 **Automatically upload...]** が表示されます、コンソール ウィンドウに次のオプションが 5 秒ごとにアップロードが必要なときに、アップロードの進行状況を報告するメッセージを構築します。

<a name="ssl_offloading_properties"></a> 
### SSL オフロードのプロパティ ###

開いている Eclipse の Project Explorer ウィンドウで、ロールのコンテキスト メニューをクリックして **Azure**, 、] をクリックし、 **SSL オフロード**します。 

![][ic719481]

このダイアログ ボックスで SSL オフロードを有効にすると、Azure に対する Java のデプロイにおいてハイパー テキスト転送プロトコル セキュア (HTTPS) のサポートを簡単に有効にすることができます。Java アプリケーション サーバーで SSL を構成する必要はありません。 詳細については、次を参照してください。 [SSL オフロード][] と [SSL オフロードを使用する方法][]します。

## 関連項目 ##

[Azure Toolkit for Eclipse][]

[Azure Toolkit for Eclipse のインストール][]

[Azure 向け Hello World アプリケーションを Eclipse で作成する][]

[Azure プロジェクトのプロパティ][]

[Azure ストレージ アカウントの一覧][]

Java で Azure を使用する方法の詳細については、次を参照してください。、 [Azure Java デベロッパー センター][]します。

<!-- URL List -->

[Azure Java Developer Center]: http://go.microsoft.com/fwlink/?LinkID=699547
[Azure Management Portal]: http://go.microsoft.com/fwlink/?LinkID=512959
[Azure Toolkit for Eclipse]: http://go.microsoft.com/fwlink/?LinkID=699529
[Azure Project Properties]: http://go.microsoft.com/fwlink/?LinkID=699524
[Azure Storage Account List]: http://go.microsoft.com/fwlink/?LinkID=699528
[com.microsoft.windowsazure.serviceruntime package summary]: http://azure.github.io/azure-sdk-for-java/com/microsoft/windowsazure/serviceruntime/package-summary.html
[Creating a Hello World Application for Azure in Eclipse]: http://go.microsoft.com/fwlink/?LinkID=699533
[Debugging a specific role instance in a multi-instance deployment]: http://go.microsoft.com/fwlink/?LinkID=699535#debugging_specific_role_instance
[Debugging Azure Applications in Eclipse]: http://go.microsoft.com/fwlink/?LinkID=699535
[Deploying Large Deployments]: http://go.microsoft.com/fwlink/?LinkID=699536
[How to Use Co-located Caching]: http://go.microsoft.com/fwlink/?LinkID=699542
[How to Use SSL Offloading]: http://go.microsoft.com/fwlink/?LinkID=699545
[Installing the Azure Toolkit for Eclipse]: http://go.microsoft.com/fwlink/?LinkId=699546
[Session Affinity]: http://go.microsoft.com/fwlink/?LinkID=699548
[SSL Offloading]: http://go.microsoft.com/fwlink/?LinkID=699549

<!-- IMG List -->

[ic789599]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic789599.png
[ic719499]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic719499.png
[ic719483]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic719483.png
[ic719501]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic719501.png
[ic710964]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic710964.png
[ic719502]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic719502.png
[ic719503]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic719503.png
[ic719504]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic719504.png
[ic719505]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic719505.png
[ic710897]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic710897.png
[ic719506]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic719506.png
[ic659268]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic659268.png
[ic552233]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic552233.png
[ic719492]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic719492.png
[ic719508]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic719508.png
[ic780647]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic780647.png
[ic789643]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic789643.png
[ic780648]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic780648.png
[ic789643]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic789643.png
[ic796926]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic796926.png
[ic719512]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic719512.png
[ic719481]: ./media/azure-toolkit-for-eclipse-azure-role-properties/ic719481.png

