<properties
    pageTitle="Azure クラシック ポータルを使用してオンプレミスのエンコーダーからマルチ ビットレートのライブ ストリームを受信するチャネルを作成する | Microsoft Azure"
    description="このチュートリアルでは、チャネルがオンプレミスのライブ エンコーダーからマルチ ビットレートのライブ ストリームを受信する基本的な Media Services のライブ ストリーミング アプリケーションを実装する手順について説明します。"
    services="media-services"
    documentationCenter=""
    authors="Juliako,cenkdin" 
    manager="dwrede" 
    editor=""/>

<tags 
    ms.service="media-services" 
    ms.workload="media" 
    ms.tgt_pltfrm="na" 
    ms.devlang="ne" 
    ms.topic="article" 
    ms.date="10/15/2015"  
    ms.author="juliako"/>


# Azure クラシック ポータルを使用してオンプレミスのエンコーダーからマルチ ビットレートのライブ ストリームを受信するチャネルを作成する

[AZURE.INCLUDE [media-services-selector-manage-channels](../../includes/media-services-selector-manage-channels.md)]


このチュートリアルでは、チャネルがオンプレミスのライブ エンコーダーからマルチ ビットレートのライブ ストリームを受信する基本的な Media Services のライブ ストリーミング アプリケーションを実装する手順について説明します。 チャネルと関連コンポーネントの操作に関するより詳細な概要については、次を参照してください。 [を内部設置型のエンコーダーからマルチ ビットレートのライブ ストリームを受信するチャネルの操作](media-services-manage-channels-overview.md)します。

このチュートリアルでは、Azure クラシック ポータルを使用して、次のタスクを実行します。

2.  ストリーミング エンドポイントを構成します。
3.  チャネルを作成します。
1.  ライブ エンコーダーを作成し、チャネルにライブ ストリームを取り込みます (この手順で Wirecast を使用します)。
1.  プログラム (およびアセット) を作成します。
1.  アセットを公開し、ストリーミング URL を取得します。
1.  コンテンツの再生
2.  クリーンアップします。

## 前提条件
チュートリアルを完了するには次のものが必要です。

- このチュートリアルを完了するには、Azure アカウントが必要です。 アカウントがない場合は、無料試用版のアカウントを数分で作成することができます。
詳細については、[Azure の無料試用版サイト](azure.microsoft.com)をご覧ください。
- Media Services アカウント。 Media Services アカウントを作成するを参照してください。 [アカウントの作成](media-services-create-account.md)します。
- マルチ ビットレートのライブ ストリームを送信できる Web カメラとエンコーダー。


## Azure クラシック ポータルを使用したストリーミング エンドポイントの構成

クライアントに対するアダプティブ ビットレート ストリーミング配信は、Azure Media Services の代表的な用途の 1 つです。 アダプティブ ビットレート ストリーミングでは、現在のネットワーク帯域幅、CPU 使用率などの条件に基づいてビデオが表示されるため、高低のビットレート ストリームの切り替えをクライアント側で行うことができます。 Media Services でサポートされるアダプティブ ビットレート ストリーミング テクノロジは、HTTP ライブ ストリーミング (HLS)、スムーズ ストリーミング、MPEG DASH、HDS (Adobe PrimeTime/Access のライセンスが必要) です。

ライブ ストリーミングを使用する場合、オンプレミスのライブ エンコーダー (この例では Wirecast) が、マルチ ビットレートのライブ ストリームをチャネルに取り込みます。 ストリームがユーザーによって要求されると、Media Services は動的パッケージ化機能を使用して、ソース ストリームを要求されたアダプティブ ビットレート ストリーム (HLS、DASH、またはスムーズ) に再パッケージ化します。

動的パッケージングを利用するには、少なくとも 1 つのストリーミング ユニットを取得する必要があります、 *ストリーミング エンドポイント* 予定の配信コンテンツです。

ストリーミング占有ユニットの数を変更するには、以下の手順を実行します。

1.  [Azure Classic Portal](https://manage.windowsazure.com/), 、クリックして **Media Services**します。 次に、メディア サービスの名前をクリックします。

2. 選択、 **ストリーミング エンドポイントを** ページです。 次に、変更するストリーミング エンドポイントをクリックします。

3. ストリーミング ユニットの数を指定するには、選択、 **スケール** タブし、占有容量] スライダーを移動します。

![[スケール] ページ](./media/media-services-portal-get-started-with-live/media-services-origin-scale.png)

4. クリックして、 **保存** ] ボタンをクリックして変更を保存します。

新しいユニットの割り当ては完了するまでに約 20 分かかります。

>[AZURE.NOTE] 現在のところ、ストリーミング ユニットをゼロに戻すの正の値から、無効になりますストリーミングが最大 1 時間です。
>
> コストの計算時には、24 時間の期間内に指定されたユニットの最大数が使用されます。 料金の詳細については、次を参照してください。 [Media Services の料金詳細](http://go.microsoft.com/fwlink/?LinkId=275107)します。


## チャネルの作成

Azure クラシック ポータルで、選択、 **チャネル** ページです。 クリックして **新規**します。  **新しいライブ チャネルを作成する** ページには、チャネルの名前を入力してください。

![createchannel](./media/media-services-portal-get-started-with-live/media-services-create-channel.png)

ページの右下隅にあるチェック マークをクリックして、更新を保存します。

数分でチャネルが作成され開始します。

## 取り込み URL の取得

チャネルが作成されると、ライブ エンコーダーに提供する取り込み URL を取得できます。 エンコーダーは、これらの URL を使用して、ライブ ストリームを入力します。

![readychannel](./media/media-services-portal-get-started-with-live/media-services-ready-channel.png)


![ingesturls](./media/media-services-portal-get-started-with-live/media-services-ingest-urls.png)

取り込み Url に関する詳細については、次を参照してください。 [マルチ ビットレートのライブ ストリームをチャネルに送信する内部設置型のエンコーダーを使用して](../media-services-channels-overview.md)します。

## ライブ エンコーダーの構成、およびライブ ストリームの取り込み

>[AZURE.NOTE] この手順では、チャネルの取り込み URL で、前の手順に記載されている必要があります。

Wirecast およびストリームの取り込み開始を構成する方法の詳細については、次を参照してください。 [Wirecast の構成](http://azure.microsoft.com/blog/2014/09/18/azure-media-services-rtmp-support-and-live-encoders/)します。

>[AZURE.NOTE] 何らかの理由は、エンコーダーを停止して再起動する必要がありますをクリックして、チャネルを最初にリセットする必要がある場合、 **リセット** Azure クラシック ポータルでコマンドです。


## プログラムの作成と管理

### 概要

チャネルは、ライブ ストリームのセグメントの発行と保存を管理できるプログラムに関連付けられています。 プログラムはチャネルによって管理されます。 チャネルとプログラムの関係は、従来のメディアとよく似ています。チャネルが絶えずコンテンツのストリームを配信するのに対し、プログラムは、そのチャネル上で決まった時間に生じるイベントです。

設定して、プログラムの記録済みコンテンツを保持する時間数を指定する、 **アーカイブ ウィンドウ** の長さ。 この値は、最小 5 分から最大 25 時間までの範囲で設定できます。 クライアントが現在のライブ位置からさかのぼって検索できる最長時間も、Archive Window (アーカイブ ウィンドウ)の長さによって決まります。 プログラムの放送は、指定された期間継続しますが、ArchiveWindowLength を過ぎたコンテンツは絶えず破棄されていきます。 さらに、このプロパティの値によって、クライアント マニフェストが肥大した場合の最大サイズも決まります。

各プログラムはアセットに関連付けられています。 プログラムを公開するには、関連付けられたアセットの OnDemand ロケーターを作成する必要があります。 このロケーターを作成すると、ストリーミング URL を構築してクライアントに提供できます。

チャネルは、最大 3 つの同時実行プログラムをサポートするため、同じ受信ストリームのアーカイブを複数作成できます。 これにより、1 つのイベントのさまざまな部分を必要に応じて発行したりアーカイブしたりできます。 たとえば、ビジネス要件によって 1 つのプログラムの 6 時間分をアーカイブする一方、最後の 10 分間のみをブロードキャストする場合があります。 これを実現するには、2 つの同時実行プログラムを作成する必要があります。 1 つのプログラムは 6 時間分のイベントをアーカイブするように設定しますが、プログラムは発行されません。 もう 1 つのプログラムは 10 分間のアーカイブを行うように設定します。このプログラムは発行されます。

新しいイベントには既存のプログラムを再使用できません。 代わりに、イベントごとに新しいプログラムを作成し、起動します。

ストリーミングとアーカイブの開始を準備するときにプログラムを開始します。 イベントのストリーミングとアーカイブを停止するときにプログラムを停止します。

アーカイブ済みコンテンツを削除するには、プログラムを停止して削除し、次に関連付けられた資産を削除します。 プログラムが資産を使用している場合は資産を削除できません。まずプログラムを削除する必要があります。

プログラムを停止して削除した後も、資産を削除していなければアーカイブ済みコンテンツをオンデマンドでのビデオとしてストリームできます。

アーカイブ済みコンテンツを保持したいが、ストリーミングには使用したくない場合は、ストリーミング ロケーターを削除します。

### プログラムの作成、開始、および停止

ストリームがチャネルに流れ始めると、アセット、プログラム、およびストリーミング ロケーターを作成することにより、ストリーミング イベントを開始できます。 これにより、ストリームがアーカイブされ、ストリーミング エンドポイントを介して視聴者がストリームを使用できるようになります。

イベントを開始するには、次の 2 つの方法があります。

1.  **チャネル** ] ページで [ **追加** 新しいプログラムを追加します。

 **新しいプログラム作成** ] ページで、プログラム名、アセット名、アーカイブ ウィンドウ、および暗号化オプションを指定します。

![createprogram](./media/media-services-portal-get-started-with-live/media-services-create-program.png)

場合 **このプログラムを今すぐ発行** を選択すると、発行 Url が作成されます。

クリックして **開始** プログラムをストリーミングする準備ができたらするたびにします。

プログラムを起動した後は、クリックして **再生** コンテンツの再生を開始します。

![createdprogram](./media/media-services-portal-get-started-with-live/media-services-created-program.png)

2. または、ショートカットを使用して、クリックして、 **ストリーミングの開始** のボタンでは、 **チャネル** ページです。 これにより、資産、プログラム、およびストリーミング ロケーターが作成されます。

プログラム名は「DefaultProgram」となり、アーカイブ ウィンドウは 1 時間に設定されます。

公開されたプログラムを再生することができます、 **チャネル** ページです。

![channelpublish](./media/media-services-portal-get-started-with-live/media-services-channel-play.png)


クリックすると **ストリーミングの停止** 上、 **チャネル** ] ページで、既定のプログラムを停止し、削除します。 アセットが出席することも、公開したり非公開にしてから、 **コンテンツ**  ページです。

切り替えた場合、 **コンテンツ** ] ページで、プログラムの作成されたアセットに表示されます。

![contentasset](./media/media-services-portal-get-started-with-live/media-services-content-assets.png)


## コンテンツの再生

コンテンツをストリーミングするために使用する URL を使用して、ユーザーを提供する必要があります *発行* ロケーターを作成することで、資産 (前のセクションで説明) と (Azure クラシック ポータルを使用してアセットを発行するとロケーターが作成する)。 資産に含まれているファイルには、ロケーターを通じてアクセスできます。

取得する URL を変更する必要があります、コンテンツの再生に使用するストリーミング プロトコル、によって、 **URL の発行** 、channel\program のリンク。

動的パッケージ化機能により、ライブ ストリームは指定されたプロトコルにパッケージ化されます。

既定で、ストリーミング URL には次の形式があり、スムーズ ストリーミング アセットの再生に使用できます。

{ストリーミング エンドポイント名-Media Services アカウント名}.streaming.mediaservices.windows.net/{ロケーター ID}/{ファイル名}.ism/Manifest

HLS ストリーミング URL を作成するには、(format=m3u8-aapl) を URL に追加します。

{ストリーミング エンドポイント名-Media Services アカウント名}.streaming.mediaservices.windows.net/{ロケーター ID}/{ファイル名}.ism/Manifest(format=m3u8-aapl)

MPEG DASH ストリーミング URL を構築するには、追加 (形式 = mpd 時間-csf) の URL にします。

{ストリーミング エンドポイント名-Media Services アカウント名}.streaming.mediaservices.windows.net/{ロケーター ID}/{ファイル名}.ism/Manifest(format=mpd-time-csf)

コンテンツの配信の詳細については、次を参照してください。 [コンテンツを配信する](media-services-deliver-content-overview.md)です。

使用してスムーズ ストリームを再生することができます [AMS Player](http://amsplayer.azurewebsites.net/azuremediaplayer.html) か iOS および Android デバイスを使用して HLS バージョン 3 を再生します。

## クリーンアップ

ストリーミング イベントが完了し、以前にプロビジョニングされたリソースをクリーンアップする場合は、次の手順を使用します。

- エンコーダーからのストリームのプッシュを停止します。
- チャネルを停止します。 チャネルが停止すると、いかなる課金も発生しません。 もう一度開始する必要がある場合、取り込み URL は同一になるため、エンコーダーを再構成する必要はありません。
- ライブ イベントのアーカイブをオンデマンド ストリームとして提供し続けるのでない限り、ストリーミング エンドポイントを停止できます。 チャネルが停止状態の場合は、いかなる課金も発生しません。


##次のステップ: Media Services のラーニング パス

[AZURE.INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

##フィードバックの提供

[AZURE.INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]


### 他の情報をお探しですか。

このトピックに必要な情報が含まれていないか、不足しているか、あるいはニーズを満たしていない場合は、以下の Disqus スレッドを使用してフィードバックをお送りください。


## その他のリソース
- [Microsoft Azure クラシック ポータルを使用したライブ ストリーミングの開始](http://azure.microsoft.com/blog/getting-started-with-live-streaming-using-the-azure-management-portal/)

<!-- URLs. -->
[Azure Classic Portal]: http://manage.windowsazure.com/

<!-- Images -->

