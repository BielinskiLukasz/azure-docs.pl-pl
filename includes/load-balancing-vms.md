<properties title="Load Balancing for Azure Infrastructure Services" pageTitle="Azure インフラストラクチャ サービスの負荷分散" description="Traffic Manager とロード バランサーを利用して負荷分散を行う機能について説明します。" metaKeywords="" services="virtual-machines" solutions="" documentationCenter="" authors="cherylmc" videoId="" scriptId="" manager="adinah" />

<tags ms.service="virtual-machines" ms.workload="infrastructure-services" ms.tgt_pltfrm="" ms.devlang="na" ms.topic="article" ms.date="09/17/2014" ms.author="cherylmc" />

#Azure インフラストラクチャ サービスの負荷分散#

Azure インフラストラクチャ サービスで利用できる負荷分散には 2 つのレベルがあります。

- **DNS レベル**: 異なるデータ センター内または外部エンドポイントにある異なるクラウド サービスへのトラフィックを異なるデータ センターにある、異なる Azure web サイトの負荷分散します。 トラフィック マネージャーまたはラウンド ロビンの負荷分散方式で実行されます。
- **ネットワーク レベル**: クラウド サービスのさまざまな仮想マシンへの着信インターネット トラフィックの負荷分散またはクラウド サービスや仮想ネットワーク内の仮想マシン間でトラフィックの負荷分散します。 Azure ロード バランサーによって実行されます。

##トラフィック マネージャーによるクラウド サービスおよび Web サイトの負荷分散##

Azure トラフィック マネージャーを使用すると、ユーザーのトラフィックをエンドポイントまで制御できます。エンドポイントには、クラウド サービス、Web サイト、外部サイト、および他のトラフィック マネージャー プロファイルが含まれます。 トラフィック マネージャーは、インターネット リソースのドメイン名に関するドメイン ネーム システム (DNS) クエリに、インテリジェントなポリシー エンジンを適用することで機能します。 クラウド サービスや Web サイトは、世界中のさまざまなデータセンターで実行できます。 

外部エンドポイントの構成またはトラフィック マネージャー プロファイルのエンドポイントとしての構成には、REST または Windows PowerShell のいずれかを使用する必要があります。 

Azure トラフィック マネージャーは、トラフィックの分散に次の 3 つの異なる負荷分散方法を使用します。

- **フェールオーバー**: をすべてのトラフィックにプライマリ エンドポイントを使用して、プライマリが使用できなくなった場合に備えてバックアップを提供する場合は、このメソッドを使用します。
- **パフォーマンス**: 別の地理的場所にエンドポイントがあり、待機時間が最短という意味で「最も近い」のエンドポイントを使用するクライアントに要求するときに、このメソッドを使用します。
- **ラウンド ロビン:**  一連のクラウド サービスやクラウド サービスまたは異なるデータ センター内の web サイト全体で同じデータ センター間で負荷を分散する場合は、このメソッドを使用します。

詳細については、次を参照してください。 [Traffic Manager の負荷分散方法について](../traffic-manager/traffic-manager-load-balancing-methods.md)します。

次の図は、異なるクラウド サービス間でトラフィックを分散するラウンド ロビンの負荷分散方法の例を示します。

![負荷分散](./media/load-balancing-vms/TMSummary.png)

基本的なプロセスは次のとおりです。

1.  インターネット クライアントが、Web サービスに関してドメイン名を照会します。
2.  DNS は、この名前照会要求をトラフィック マネージャーに転送します。
3.  トラフィック マネージャーは、ラウンド ロビン リストにあるクラウド サービスの DNS 名を返します。 インターネット クライアントの DNS サーバーは、その名前を IP アドレスに解決してインターネット クライアントに送信します。
4.  インターネット クライアントは、選択されたクラウド サービスに接続します。

## Azure の仮想マシンの負荷分散 ##

同じクラウド サービスまたは仮想ネットワーク内の複数の仮想マシンは、プライベート IP アドレスを使用して直接やり取りすることができます。 クラウド サービスまたは仮想ネットワークの外側にあるコンピューターやサービスは、構成されたエンドポイント経由でのみ、クラウド サービスや仮想ネットワーク内の仮想マシンとやり取りすることができます。 エンドポイントとは、Azure クラウド サービス内の仮想マシンまたは Web ロールのパブリック IP アドレスとポートからプライベート IP アドレスとポートへのマッピングです。

Azure ロード バランサーは、特定の種類の着信トラフィックを、負荷分散セットと呼ばれる構成内の複数の仮想マシンまたはサービスにランダムに配分します。 たとえば、複数の Web サーバーまたは Web ロール間で Web 要求のトラフィックの負荷を分散できます。

次の図は、標準の (暗号化されていない) Web トラフィック用の負荷分散されたエンドポイントを示しています。このエンドポイントは、パブリックとプライベートの TCP ポートが 80 である 3 台の仮想マシン間で共有されています。 この 3 台の仮想マシンは、1 つの負荷分散セット内にあります。

![負荷分散](./media/load-balancing-vms/LoadBalancing.png)

詳細については、次を参照してください。 [Azure ロード バランサー](../articles/load-balancer/load-balancer-overview.md)します。 負荷分散セットを作成する手順については、次を参照してください。 [負荷分散セットを構成する](../load-balancer/load-balancer-overview.md)です。

Azure はまた、クラウド サービスや仮想ネットワーク内で負荷を分散することもできます。 これは内部負荷分散と呼ばれ、次の方法で使用できます。

- 多層アプリケーションの異なる層にあるサーバー間で負荷分散する (たとえば、Web 層とデータベース層の間)。
- 負荷分散用のハードウェアやソフトウェアの追加を必要とせずに、Azure でホストされている基幹業務 (LOB) アプリケーションの負荷を分散する。 
- 内部設置型のサーバーを含む一連のコンピューターの負荷を分散する。

Azure の負荷分散と同様、内部負荷分散セットを構成すると、内部負荷分散が容易になります。 

次の図では、基幹業務アプリケーションの負荷をクロスプレミス仮想ネットワーク内の 3 つの仮想マシン間で分配する内部負荷分散エンドポイントの例を示します。 

![負荷分散](./media/load-balancing-vms/LOBServers.png)

詳細については、次を参照してください。 [内部負荷分散](../load-balancer/load-balancer-internal-overview.md)します。 負荷分散セットを作成する手順については、次を参照してください。 [内部負荷分散セットを構成する](../load-balancer/load-balancer-internal-getstarted.md)です。

<!-- LINKS -->

