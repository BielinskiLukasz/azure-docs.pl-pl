<properties 
    pageTitle="ストレージ アカウントの BLOB データのカスタム ドメイン名の構成 | Microsoft Azure" 
    description="Azure ストレージ アカウントの BLOB データにアクセスするためにカスタム ドメインを構成する方法について学習します。" 
    services="storage" 
    documentationCenter="" 
    authors="tamram" 
    manager="adinah" 
    editor=""/>

<tags 
    ms.service="storage" 
    ms.workload="storage" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="09/03/2015" 
    ms.author="tamram"/>



# Azure ストレージ アカウントの BLOB データのカスタム ドメイン名の構成

## 概要

Azure ストレージ アカウントの BLOB データにアクセスするためのカスタム ドメインを構成できます。Blob サービスの既定のエンドポイントは https://<*mystorageaccount*>. >.blob.core.windows.net です。**www.contoso.com** などのカスタム ドメインおよびサブドメインをストレージ アカウントの BLOB エンドポイントにマッピングしている場合、ユーザーはそのドメインを使って、ストレージ アカウントの BLOB データにもアクセスできます。

> [AZURE.NOTE]  このタスクの手順は、Azure ストレージ アカウントに適用されます。 クラウド サービスを参照してください。 <a href = "/develop/net/common-tasks/custom-dns/">Azure クラウド サービスのカスタム ドメイン名の構成</a>Websites については、を参照してください <a href="/develop/net/common-tasks/custom-dns-web-site/">Azure Website のカスタム ドメイン名の構成</a>します。 

ストレージ アカウントの BLOB エンドポイントをカスタム ドメインで参照するには、2 つの方法があります。 最も簡単な方法は、CNAME レコードを作成して、カスタム ドメインおよびサブドメインを BLOB エンドポイントにマッピングすることです。 CNAME レコードは、ソース ドメインを目的のドメインにマッピングする DNS 機能です。 この場合、ソース ドメインは、カスタム ドメインおよびサブドメインです。サブドメインは常に必要であることに注意してください。 目的のドメインは、BLOB サービス エンドポイントです。

Blob エンドポイントにカスタム ドメインをマッピングする処理されることが、ただし、ドメインのダウンタイムの短時間でドメインの登録時、 [Azure Classic Portal](manage.windowsazure.com)します。 カスタム ドメインが現在、ダウンタイムが発生しないことを要求するサービス レベル アグリーメント (SLA) のアプリケーションをサポートしている場合は、DNS マッピングの実行中にユーザーがドメインにアクセスできるように、Azure **asverify** サブドメインを使用して中間登録ステップを提供できます。

次の表は、**mystorageaccount** というストレージ アカウントの BLOB データにアクセスするためのサンプル URL を示します。 ストレージ アカウントに登録されているカスタム ドメインは **www.contoso.com** です。

 リソースの種類| URL の形式
---|---
 ストレージ アカウント| **既定の URL:** http://mystorageaccount.blob.core.windows.net<p>**カスタム ドメインの URL:** http://www.contoso.com</td>
 BLOB| **既定の URL:** http://mystorageaccount.blob.core.windows.net/mycontainer/myblob<p>**カスタム ドメインの URL:** http://www.contoso.com/mycontainer/myblob
 ルート コンテナー| **既定の URL:** http://mystorageaccount.blob.core.windows.net/myblob or http://mystorageaccount.blob.core.windows.net/$ ルート/myblob<p>**カスタム ドメインの URL:** http://www.contoso.com/myblob または http://www.contoso.com/$ ルート/myblob

## ストレージ アカウントのカスタム ドメインの登録

ユーザーが短時間、ドメインを使用できなくても問題ではない場合、またはカスタム ドメインが現在、アプリケーションのホストでない場合は、この手順でカスタム ドメインを登録します。

カスタム ドメインが現在、ダウンタイムを持つことができないアプリケーションをサポートするかどうかに記載されている手順に従って、 <a href="#register-asverify">中間 asverify サブドメインを使用したストレージ アカウントのカスタム ドメインを登録</a>します。

カスタム ドメイン名を構成するには、ドメイン レジストラーで新しい CNAME レコードを作成する必要があります。 CNAME レコードによって、ドメイン名のエイリアスが指定されます。この場合、カスタム ドメインのアドレスが、ストレージ アカウントの BLOB サービス エンドポイントにマッピングされます。

それぞれのレジストラーでは CNAME レコードを指定するための同様の (多少異なる) 手段が用意されていますが、その概念は
同じです。 多くの基本ドメイン登録パッケージには DNS 構成が用意されていないため、CNAME レコードを作成するには、事前にドメイン登録パッケージのアップグレードが必要である可能性があります。

1.  [Azure Classic Portal](manage.windowsazure.com), に移動し、 **ストレージ** ] タブをクリックします。

2.  **[ストレージ]** タブで、カスタム ドメインをマッピングするストレージ アカウントの名前をクリックします。

3.  **[構成]** タブをクリックします。

4.  画面の下部で、**[ドメインの管理]** をクリックして **[カスタム ドメインの管理]** ダイアログを表示します。 ダイアログ上部のテキストには、CNAME レコードの作成方法に関する情報が含まれています。 この手順では、**asverify** サブドメインに関するテキストは無視してください。

5.  DNS レジストラーの Web サイトにログオンし、
    DNS の管理ページに移動します。 これにありますセクションなど、* * ドメイン
    名前**, 、* * DNS**, 、または **サーバーの管理という名前を**します。

6.  CNAME 管理セクションを見つけます。 詳細設定ページに進み、
    詳細設定] ページおよび探します **CNAME**, 、**エイリアス**,、
    または **サブドメイン**します。

7.  新しい CNAME レコードを作成し、"**www**" や "**photos**" などのサブドメイン エイリアスを指定します。 次に、
    形式で、Blob サービス エンドポイントをあるホスト名を提供 **mystorageaccount.blob.core.windows.net** (ここで **mystorageaccount** ストレージ アカウントの名前を指定します)。 使用するホスト名は、**[カスタム ドメインの管理]** ダイアログ内のテキストに含まれています。

8.  新しい CNAME レコードを作成したら、**[カスタム ドメインの管理]** ダイアログに戻り、サブドメインを含むカスタム ドメイン名を **[カスタム ドメイン名]** フィールドに入力します。 たとえば、ドメインが "**contoso.com**" で、サブドメインが "**www**" の場合は、"**www.contoso.com**" と入力します。サブドメインが "**photos**" の場合は、"**photos.contoso.com**" と入力します。 サブドメインは必須であることに注意してください。

9. **[登録]** ボタンをクリックしてカスタム ドメインを登録します。

    登録が成功すると、**"カスタム ドメインはアクティブです"** というメッセージが表示されます。 これで、ユーザーは、適切なアクセス許可を持っている限り、カスタム ドメインの BLOB データを表示できます。

## 中間 asverify サブドメインを使用したストレージ アカウントのカスタム ドメインの登録

カスタム ドメインが現在、ダウンタイムが発生しないことが SLA で要求されているアプリケーションをサポートしている場合は、この手順でカスタム ドメインを登録します。 asverify.&lt;subdomain&gt;.&lt;customdomain&gt; から asverify.&lt;storageaccount&gt;.blob.core.windows.net を指す CNAME を作成すると、ドメインを Azure に事前登録できます。 そして、&lt;subdomain&gt;.&lt;customdomain&gt; から &lt;storageaccount&gt;.blob.core.windows.net を指す、もう 1 つの CNAME を作成します。このポイントから、カスタム ドメインへのトラフィックが BLOB エンドポイントにダイレクトされます。

asverify サブドメインは、Azure で認識される特殊なサブドメインです。 自分のサブドメインの前に **asverify** を付けると、ドメインの DNS レコードを変更しなくても、カスタム ドメインが Azure に認識されます。 ドメインの DNS レコードを変更すると、ダウンタイムが発生することなく、ドメインが BLOB エンドポイントにマッピングされます。

1.  [Azure Classic Portal](manage.windowsazure.com), に移動し、 **ストレージ** ] タブをクリックします。

2.  **[ストレージ]** タブで、カスタム ドメインをマッピングするストレージ アカウントの名前をクリックします。

3.  **[構成]** タブをクリックします。

4.  画面の下部で、**[ドメインの管理]** をクリックして **[カスタム ドメインの管理]** ダイアログを表示します。 ダイアログ上部のテキストには、**asverify** サブドメインを使用して CNAME レコードを作成する方法に関する情報が含まれます。

5.  DNS レジストラーの Web サイトにログオンし、
    DNS の管理ページに移動します。 これにありますセクションなど、* * ドメイン
    名前**, 、* * DNS**, 、または **サーバーの管理という名前を**します。

6.  CNAME 管理セクションを見つけます。 詳細設定ページに進み、
    詳細設定] ページおよび探します **CNAME**, 、**エイリアス**,、
    または **サブドメイン**します。

7.  新しい CNAME レコードを作成し、asverify サブドメインを含むサブドメイン エイリアスを指定します。 たとえば、指定するサブドメインは、"**asverify.www**" または "**asverify.photos**" という形式になります。 次に、
    形式で、Blob サービス エンドポイントをあるホスト名を提供 **asverify.mystorageaccount.blob.core.windows.net** (ここで **mystorageaccount** ストレージ アカウントの名前を指定します)。 使用するホスト名は、**[カスタム ドメインの管理]** ダイアログ内のテキストに含まれています。

8.  新しい CNAME レコードを作成したら、**[カスタム ドメインの管理]** ダイアログに戻り、カスタム ドメイン名を **[カスタム ドメイン名]** フィールドに入力します。 たとえば、ドメインが "**contoso.com**" で、サブドメインが "**www**" の場合は、"**www.contoso.com**" と入力します。サブドメインが "**photos**" の場合は、"**photos.contoso.com**" と入力します。 サブドメインは必須であることに注意してください。

9.  **[高度: 'asverify' サブドメインを使ってカスタム ドメインを事前登録する]** チェックボックスをクリックします。

10. **[登録]** ボタンをクリックしてカスタム ドメインを事前登録します。

    事前登録が成功すると、**"カスタム ドメインはアクティブです"** というメッセージが表示されます。

11. この時点で、カスタム ドメインは Azure によって確認されていますが、ドメインへのトラフィックは、まだストレージ アカウントへはルーティングされません。 処理を完了するには、DNS レジストラーの Web サイトに戻り、サブドメインを BLOB サービス エンドポイントにマッピングする別の CNAME レコードを作成します。 たとえば、"**www**" または "**photos**" というサブドメインと、"**mystorageaccount.blob.core.windows.net**" (ここで、"**mystorageaccount**" はストレージ アカウントの名前です) というホスト名を指定します。 この手順で、カスタム ドメインの登録が完了します。

12. 最後に、**asverify** を使って作成した CNAME レコードを削除します。このレコードは、中間の手順としてだけ必要であったためです。

これで、ユーザーは、適切なアクセス許可を持っている限り、カスタム ドメインの BLOB データを表示できます。

## カスタム ドメインが BLOB サービス エンドポイントを参照することの確認

カスタム ドメインが実際に BLOB サービス エンドポイントにマッピングされていることを確認するために、ストレージ アカウントのパブリック コンテナーで BLOB を作成します。 そして、Web ブラウザーで、次の形式の URI を使って BLOB にアクセスします。

-   http://<*subdomain.customdomain*>/<*mycontainer*>/<*myblob*>

たとえば、myforms コンテナー内の BLOB にマップされている
**photos.contoso.com** カスタム サブドメインを blob にマップされる、
**myforms** コンテナー。

-   http://photos.contoso.com/myforms/applicationform.htm

## その他のリソース

-   <a href="http://msdn.microsoft.com/library/azure/gg680307.aspx">CDN コンテンツをカスタム ドメインにマップする方法</a>






