---
title: Rozszerzenie ochrony przed złośliwym oprogramowaniem firmy Microsoft dla maszyn wirtualnych z Windows na platformie Azure | Dokumentacja firmy Microsoft
description: Wdrażanie rozszerzenia Azure ochrony przed złośliwym kodem na maszynie wirtualnej Windows przy użyciu rozszerzenia.
services: virtual-machines-windows
documentationcenter: ''
author: TomShinder
manager: gwallace
editor: ''
ms.assetid: ''
ms.service: virtual-machines-windows
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure-services
ms.date: 04/12/2018
ms.author: tomsh
ms.openlocfilehash: f6599d327bdbba17b7a4d387e9527604a959aa87
ms.sourcegitcommit: c105ccb7cfae6ee87f50f099a1c035623a2e239b
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/09/2019
ms.locfileid: "67706690"
---
# <a name="microsoft-antimalware-extension-for-windows"></a>Rozszerzenia ochrony przed złośliwym oprogramowaniem firmy Microsoft dla Windows

## <a name="overview"></a>Przegląd

Nowoczesne zagrożeniach dla środowisk chmury jest bardzo dynamiczny, zwiększenie nacisku na firm IT subskrybentów, aby zachować skuteczną ochronę w celu spełnienia wymagań dotyczących zgodności i zabezpieczeń w chmurze. Microsoft Antimalware dla platformy Azure jest możliwość Bezpłatna ochrona w czasie rzeczywistym, która ułatwia identyfikowanie i usuwanie wirusów, programów szpiegujących, i inne złośliwe oprogramowanie, można skonfigurować alerty, gdy znany złośliwego lub niechcianego oprogramowania o próbach instalacji lub uruchomienia użytkownika Systemy usługi Azure. Rozwiązanie jest stworzone z tej samej platformy ochrony przed złośliwym oprogramowaniem jako Microsoft Security Essentials (MSE), program Microsoft Forefront Endpoint Protection, Microsoft System Center Endpoint Protection, Windows Intune i usługa Windows Defender dla Windows 8.0 lub nowszy.
Microsoft Antimalware dla platformy Azure to rozwiązanie jednego agenta dla aplikacji i środowisk dzierżawy, zaprojektowane do uruchamiania w tle bez interwencji człowieka. Można wdrożyć ochrony odpowiednio do potrzeb obciążeń aplikacji, za pomocą obu podstawowe secure domyślnie lub zaawansowanych konfiguracji niestandardowej, włącznie z monitorowaniem ochrony przed złośliwym oprogramowaniem.

## <a name="prerequisites"></a>Wymagania wstępne

### <a name="operating-system"></a>System operacyjny

Microsoft Antimalware dla rozwiązania platformy Azure obejmują Microsoft Antimalware Client i usługi ochrony przed złośliwym oprogramowaniem klasycznego modelu wdrażania przy użyciu poleceń cmdlet programu PowerShell ochrony przed złośliwym oprogramowaniem i rozszerzenie diagnostyki platformy Azure. Rozwiązanie Microsoft Antimalware jest obsługiwane w systemie Windows Server 2008 R2, Windows Server 2012 i rodzin systemów operacyjnych Windows Server 2012 R2. Nie jest obsługiwana w systemie operacyjnym Windows Server 2008, a także nie jest obsługiwana w systemie Linux. 

Usługa Windows Defender jest wbudowanej ochrony przed złośliwym kodem włączone w systemie Windows Server 2016. Interfejs programu Windows Defender jest również domyślnie na niektórych systemu Windows Server 2016 jednostek SKU.
Nadal można dodać rozszerzenia ochrony przed złośliwym kodem dla maszyny Wirtualnej platformy Azure do systemu Windows Server 2016 maszyny Wirtualnej platformy Azure za pomocą usługi Windows Defender, ale w tym scenariuszu rozszerzenia zostaną zastosowane wszystkie zasady opcjonalna konfiguracja, który będzie używany przez usługę Windows Defender, rozszerzenie nie wdroży dowolne Usługa dodatkowej ochrony przed złośliwym oprogramowaniem. Możesz dowiedzieć się więcej o tej aktualizacji [tutaj](https://blogs.msdn.microsoft.com/azuresecurity/2017/03/07/update-to-azure-antimalware-extension-for-cloud-services/).

### <a name="internet-connectivity"></a>Łączność z Internetem

Microsoft Antimalware dla Windows wymaga, że docelowej maszyny wirtualnej jest połączony z Internetem, aby otrzymywać regularne aktualizacje aparatu i podpis. 

## <a name="template-deployment"></a>Wdrażanie na podstawie szablonu
Rozszerzenia maszyn wirtualnych platformy Azure można wdrażać przy użyciu szablonów usługi Azure Resource Manager. Szablony są idealnym rozwiązaniem w przypadku wdrażania maszyn wirtualnych, które wymagają konfiguracji po wdrożeniu, takich jak dołączanie do usługi Azure ochrony przed złośliwym oprogramowaniem.

Konfiguracji JSON dla rozszerzenia maszyny wirtualnej mogą być zagnieżdżone wewnątrz zasobu maszyny wirtualnej lub umieszczone w katalogu głównego lub najwyższego poziomu szablon JSON usługi Resource Manager. Położenie konfiguracji JSON ma wpływ na wartości nazwy i typu zasobu. Aby uzyskać więcej informacji, zobacz [Ustaw nazwę i typ zasobów podrzędnych](../../azure-resource-manager/resource-group-authoring-templates.md#child-resources). 

W poniższym przykładzie założono, że rozszerzenie maszyny Wirtualnej jest zagnieżdżona w obrębie zasobu maszyny wirtualnej. Zagnieżdżanie rozszerzenia zasobu, za pomocą pliku JSON jest umieszczany w `"resources": []` obiektu maszyny wirtualnej.

```json
{
      "type": "Microsoft.Compute/virtualMachines/extensions",
      "name": "[concat(parameters('vmName'),'/', parameters('vmExtensionName'))]",
      "apiVersion": "2017-03-30",
      "location": "[resourceGroup().location]",
      "dependsOn": [
        "[concat('Microsoft.Compute/virtualMachines/', parameters('vmName'))]"
      ],

      "properties": {
        "publisher": "Microsoft.Azure.Security",
        "type": "IaaSAntimalware",
        "typeHandlerVersion": "1.3",
        "settings": {
          "AntimalwareEnabled": "true",
          "Exclusions": {
            "Extensions": ".log;.ldf",
            "Paths": "D:\\IISlogs;D:\\DatabaseLogs",
            "Processes": "mssence.svc"
          },

          "RealtimeProtectionEnabled": "true",
          "ScheduledScanSettings": {
            "isEnabled": "true",
            "scanType": "Quick",
            "day": "7",
            "time": "120"
          }
        },
        "protectedSettings": null
      }
}
```

## <a name="powershell-deployment"></a>Wdrożenie programu PowerShell
Zależy od typu wdrożenia, użyj odpowiedniego polecenia, aby wdrożyć rozszerzenie maszyny wirtualnej platformy Azure ochrony przed złośliwym kodem na istniejącej maszyny wirtualnej.

  * IaaS klasycznej maszyny wirtualnej — https://docs.microsoft.com/powershell/module/servicemanagement/azure/set-azureserviceantimalwareextension
  * Usługa Azure Resource Manager z siedzibą maszyny wirtualnej https://blogs.msdn.microsoft.com/azuresecurity/2016/02/24/update-on-microsoft-antimalware-and-azure-resource-manager-arm-vms/
  * Usługa Azure Service Fabric klastrów — https://blogs.msdn.microsoft.com/azuresecurity/2016/10/07/add-microsoft-antimalware-to-azure-service-fabric-clusters/
  * Klasyczną usługę w chmurze — https://docs.microsoft.com/powershell/module/servicemanagement/azure/set-azureserviceantimalwareextension

## <a name="troubleshoot-and-support"></a>Rozwiązywanie problemów i pomocy technicznej

### <a name="troubleshoot"></a>Rozwiązywanie problemów

Microsoft Antimalware dzienników rozszerzenia są dostępne pod adresem - %Systemdrive%\WindowsAzure\Logs\Plugins\Microsoft.Azure.Security.IaaSAntimalware (\CommandExecution.log lub PaaSAntimalware)\1.5.5.x (wersja #)

### <a name="error-codes-and-their-meanings"></a>Kody błędów i ich znaczenie

| Kod błędu | Znaczenie | Możliwe działania |
| :---: | --- | --- |
| -2147156224 | Plik MSI jest zajęta wykonywaniem innej instalacji | Spróbuj uruchomić jego instalację |
| -2147156221 | Instalator MSE już uruchomione | Jednocześnie uruchomione tylko jedno wystąpienie |
| -2147156208 | Małej ilości miejsca < 200 MB | Usuń nieużywane pliki i ponów próbę instalacji |
| -2147156187 | Ostatnie instalacji, uaktualniania, aktualizacji lub odinstalować o ponowne uruchomienie | Uruchom ponownie, a następnie ponów próbę instalacji |
| -2147156121 | Instalator próbował usunąć konkurencyjnych produktów. Ale konkurencyjnych produktów dezinstalacji nie powiodło się. | Spróbuj ręcznie usunąć produktu konkurenta, uruchom ponownie i ponów próbę instalacji  |
| -2147156116 | Nie można sprawdzić poprawności pliku zasad | Upewnij się, że plik XML prawidłowe zasady są przekazywane do Instalatora  |
| -2147156095 | Instalator nie można uruchomić usługi ochrony przed złośliwym kodem | Sprawdź wszystkie pliki binarne są poprawnie podpisane i jest zainstalowany prawidłowy plik licencji |
| -2147023293 | Wystąpił błąd krytyczny podczas instalacji. W większości przypadków będzie. EPP.msi, nie register\start\stop AM usługi lub mini filtrowanie sterowników | Dzienniki MSI z EPP.msi są wymagane w tym miejscu podczas przyszłych analiz |
| -2147023277 | Nie można otworzyć pakietu instalacyjnego | Sprawdź, czy pakiet istnieje i jest dostępny, lub skontaktuj się z dostawcą aplikacji, aby sprawdzić, czy jest to prawidłowy pakiet Instalatora Windows |
| -2147156109 | Usługa Defender są wymagane jako warunek wstępny |  |
| -2147205073 | Wystawca websso nie jest obsługiwane. | |
| -2147024893 | System nie może odnaleźć określonej ścieżki |  |
| -2146885619 | Nie wiadomości kryptograficznych lub wiadomości kryptograficznych nie jest prawidłowo sformatowany |  |
| -1073741819 | Instrukcji w lokalizacji 0 x %p odwołanie do pamięci w lokalizacji 0 x %p. Nie można załadować pamięć %s |  |
| 1 | Niepoprawna funkcja |  |


### <a name="support"></a>Pomoc techniczna

Jeśli potrzebujesz dodatkowej pomocy w dowolnym momencie, w tym artykule, możesz skontaktować się ze ekspertów platformy Azure na [forów platformy Azure z subskrypcją MSDN i Stack Overflow](https://azure.microsoft.com/support/forums/). Alternatywnie mogą zgłaszać zdarzenia pomocy technicznej platformy Azure. Przejdź do [witryny pomocy technicznej platformy Azure](https://azure.microsoft.com/support/options/)i wybierz Uzyskaj pomoc techniczną. Aby uzyskać informacje o korzystaniu z pomocy technicznej platformy Azure, przeczytaj [pomocy technicznej Microsoft Azure — często zadawane pytania](https://azure.microsoft.com/support/faq/).
