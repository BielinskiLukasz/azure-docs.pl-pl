<properties
   pageTitle="アプリケーション オブジェクトとサービス プリンシパル オブジェクト | Microsoft Azure"
   description="Azure Active Directory におけるアプリケーション オブジェクトと ServicePrincipal オブジェクトのリレーションシップについての説明"
   documentationCenter="dev-center-name"
   authors="msmbaldwin"
   manager="mbaldwin"
   services="active-directory"
   editor=""/>

<tags
   ms.service="active-directory"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="identity"
   ms.date="09/17/2015"
   ms.author="mbaldwin"/>


# アプリケーション オブジェクトおよびサービス プリンシパル オブジェクト

この図では、アプリケーション オブジェクトと ServicePrincipal オブジェクトというサンプル アプリケーションのコンテキストの間のリレーションシップを示しています。 **人事部アプリ**します。 3 つのテナントがある: **Adatum**, 、アプリを開発するテナントおよび **Contoso** と **Fabrikam**, 、使用するテナント、 **人事部アプリ**します。

![アプリケーション オブジェクトと ServicePrincipal オブジェクト間のリレーションシップ](./media/active-directory-application-objects/application-objects-relationship.png)


Microsoft Azure 管理ポータルにアプリを登録するときに、次の 2 つのオブジェクトがディレクトリ テナントに作成されます。

- **アプリケーション オブジェクト**: このオブジェクトは、アプリの定義を表します。 表示では、そのプロパティの詳細については、 **アプリケーション オブジェクト** 以下のセクションです。

- **ServicePrincipal オブジェクト**: このオブジェクトがディレクトリ テナントのアプリのインスタンスを表します。 アプリにテナントのディレクトリ データの読み取りを許可する ServicePrincipal に権限を割り当てるなど、ServicePrincipal オブジェクトにポリシーを適用できます。 アプリケーション オブジェクトを変更するたびに、その変更は、テナントの関連付けられた ServicePrincipal オブジェクトにも適用されます。


> [AZURE.NOTE] アプリケーションが外部アクセスに対して構成されている場合 [コンシューマー テナントがアクセス権を削除し、もう一度アクセスを許可するまで、コンシューマー テナントの ServicePrincipal にアプリケーションのオブジェクトへの変更は反映されません。



上記の図では、手順 "1." は、アプリケーション オブジェクトと ServicePrincipal オブジェクトを作成するプロセスです。

手順 2. では、会社の管理者がアクセス権を付与する際に、ServicePrincipal オブジェクトが会社の Azure AD テナントに作成され、ServicePrincipal オブジェクトに、会社の管理者が付与したディレクトリのアクセス レベルが割り当てられます。

手順 3. では、アプリのコンシューマー テナント (Contoso および Fabrikam) が、それぞれアプリのインスタンスを表す独自の ServicePrincipal オブジェクトを持ちます。 この例では、それぞれに人事部アプリを表す ServicePrincipal があります。





## アプリケーション オブジェクトのプロパティ

次の表は、アプリケーション オブジェクトのすべてのプロパティを一覧で示し、開発者向けの重要な詳細情報について説明しています。 これらのプロパティは、Web アプリケーション、Web API、および Azure AD に登録されているネイティブ クライアント アプリケーションに適用されます。


### 全般

プロパティ | 説明
| ------------- | -----------
| 名前 | アプリの表示名。 必須プロパティ、 **アプリケーションの追加** ウィザード。
| ロゴ | アプリや企業を表す、アプリのロゴ。 このロゴにより、外部のユーザーがアクセス権の付与の要求とアプリをより簡単に関連付けることができます。 ロゴをアップロードするときの仕様に従ってください、 **ロゴのアップロード** ウィザード。 ロゴを指定しない場合は、既定のロゴが表示されます。
| 外部アクセス | 外部の組織のユーザーが、アプリにシングル サインオンと、外部の組織のディレクトリ内のデータに対するアクセス権を付与できるかどうかを決定します。 この制御は、アクセス権を付与する機能のみに影響します。 既に付与されているアクセス権は変更されません。 会社の管理者だけが、アクセス権を付与することができます。


### シングル サインオン

プロパティ | 説明
| ------------- | -----------
| アプリ ID URI | アプリの一意の論理識別子。 必須プロパティ、 **アプリケーションの追加** ウィザード。 <br><br>アプリ ID URI は、論理識別子であるため、インターネット アドレスに解決する必要はありません。 Azure AD にシングル サインオン要求を送信するときに、アプリによって提供されます。 Azure AD はアプリを識別し、アプリの登録中に提供された応答 URL にサインオン応答 (SAML トークン) を送信します。 アプリ ID URI の値を使用して、サインイン要求を行うときに wtrealm プロパティ (WS-Federation の場合) または Issuer プロパティ (SAML-P の場合) を設定します。  **App ID URI** 、組織の Azure AD で一意の値にする必要があります<br><br>**注**: 外部ユーザー向けにアプリを有効にする場合、アプリのアプリ ID URI の値は、ディレクトリの確認済みドメインのいずれかでアドレスをする必要があります。 よって、URN にすることはできません。 これにより、組織に属している一意のプロパティを、他の組織が指定 (および取得) できないようにします。 開発時に、組織の最初のドメイン内の場所にアプリ ID URI を変更して (カスタム/バニティ ドメインを検証していない場合)、この新しい値を使用するようアプリを更新できます。 最初のドメインは、contoso.onmicrosoft.com のような 3 レベル ドメインで、サインアップ中に作成します。
| アプリ URL | ユーザーがサインインして、アプリを使用できる Web ページのアドレス。 必須プロパティ、 **アプリケーションの追加** ウィザード<br><BR>**。注**: アプリケーションの追加ウィザードでこのプロパティは、応答 URL の値としても設定を設定する値。
| 応答 URL | アプリの物理アドレス。 Azure AD は、このアドレスにシングル サインオン応答を含むトークンを送信します。 最初の登録時に、 **アプリケーションの追加** ウィザードは、値が、アプリの URL は、応答 URL の値としても設定を設定します。 要求時に、記号に返信 URL 値を使用して wreply プロパティ (Ws-federation) を設定または **AssertionConsumerServiceURL** プロパティ (SAML-P 用).<br><BR>**注**: 外部ユーザー向けにアプリを有効にする場合、応答 URL がある必要があります、 **https://** アドレス。
| フェデレーション メタデータ URL | (省略可能)。 アプリのフェデレーション メタデータ ドキュメントの物理的な URL を表します。 SAML-P サインアウトをサポートするために必要です。 Azure AD は、このエンドポイントでホストされているメタデータ ドキュメントをダウンロードし、証明書の公開部分を検出するために使用します。この公開部分は、サインアウトの要求とアプリのサインアウト URL の署名を確認するために使用します。 最初にアプリを追加するときには、このプロパティを構成することはできません。 後でその構成できます<br><BR>**。注**: 場合 SAML-P サインアウトをサポートする必要がありますが、アプリケーションが、フェデレーション メタデータ エンドポイントはありません、カスタマー サポートに問い合わせてその他のオプションです。


### Graph API または Web API の呼び出し

プロパティ | 説明
| ------------- | -----------
| クライアント ID | アプリの一意の識別子。 Graph API または Azure AD に登録されているその他の Web API への呼び出しで、この識別子を使用する必要があります。 Azure AD は、アプリの登録中にこの値を自動的に生成します。この値は変更することはできません。<BR><BR>Graph API を介してアプリがディレクトリにアクセス (読み取りまたは書き込みアクセス) できるようにするには、クライアント ID とキー (OAuth 2.0 ではクライアント シークレットと呼ばれます) が必要です。 アプリは、クライアント ID とキーを使用して、Azure AD の OAuth 2.0 トークン エンドポイントにアクセス トークンを要求します  (コマンド バーで、すべての Azure AD エンドポイントを表示するにはクリックして **エンドポイントを表示**.)Graph API を使用してディレクトリ データを取得または設定 (変更) する場合、アプリは Graph API への要求の承認ヘッダーで、このアクセス トークンを使用します。
| キー | Graph API を介して利用可能になるデータなど、アプリが Azure AD でデータの読み取りや書き込み行う場合は、アプリにキーが必要です。 Graph API を呼び出すアクセス トークンを要求すると、アプリを提供、 **クライアント ID** と **キー**します。 トークンのエンドポイントは、この ID とキーを使用してアプリを認証し、アクセス トークンを発行します。 キーのロール オーバーのシナリオに対応するために、複数のキーを作成できます。 また、有効期限が切れたキー、侵害されたキー、使用しなくなったキーを削除できます。
| アクセス管理 | 次の 3 つの異なるアクセス レベルのいずれかを選択します。シングル サインオン (SSO)、SSO とディレクトリ データの読み取り、または SSO とディレクトリ データの読み取り/書き込みです。 アクセス権を削除することもできます。 <br><BR>**注**: アプリのディレクトリ アクセスのレベルへの変更が、ディレクトリにのみ適用されます。 アプリへのアクセス権を付与したユーザーには、変更は適用されません。


### ネイティブ クライアント

プロパティ | 説明
| ------------- | -----------
| リダイレクト URI | OAuth 2.0 承認要求への応答で、Azure AD がユーザー エージェントをリダイレクトする URI。 この値は、物理的なエンドポイントである必要はありませんが、有効な URI である必要があります。

##

