## Service Bus トピックとサブスクリプションとは

Service Bus のトピックとサブスクリプションのサポート、 *パブリッシュ/サブスクライブ* メッセージング通信モデルです。 トピックとサブスクリプションを使用すると、分散アプリケーションのコンポーネントが互いに直接通信することがなくなり、仲介者の役割を果たすトピックを介してメッセージをやり取りすることになります。

![TopicConcepts](./media/howto-service-bus-topics/sb-topics-01.png)

各メッセージが 1 つのコンシューマーによって処理される Service Bus キューとは異なり、トピックとサブスクリプションでは、発行/サブスクライブ パターンを使用した "1 対多" 形式の通信を行います。 ことは
トピックへの複数のサブスクリプションを登録します。 トピックに送信されたメッセージはサブスクリプションに渡され、各サブスクリプションで独立して処理できます。

トピックにとってのサブスクリプションは、トピックに送信されたメッセージのコピーを受け取る仮想キューのようなものです。 トピックに対するフィルター ルールをサブスクリプション単位で登録することもできます。これを使用すると、トピックに送信されるどのメッセージをどのトピック サブスクリプションで受信するかのフィルター処理や制限ができます。

Service Bus のトピックとサブスクリプションを使用することで、多数のユーザーとアプリケーションの間でやり取りされる膨大な数のメッセージを処理することもできます。

## サービス名前空間の作成

Azure Service Bus トピックとサブスクリプションを使用するには、最初にサービス名前空間を作成する必要があります。 名前空間は、アプリケーション内で Service Bus リソースをアドレス指定するためのスコープ コンテナーを提供します。

サービス名前空間を作成するには:

1.  ログオン、 [Azure ポータル][]します。

2.  ポータルの左側のナビゲーション ウィンドウで、クリックして **Service Bus**します。

3.  ポータルの下のウィンドウで、クリックして **作成**します。   
    ![][0]

4.   **新しい名前空間を追加** ダイアログ ボックスで、名前空間の名前を入力します。 その名前が使用できるかどうかがすぐに自動で確認されます。   
    ![][2]

5.  入力した名前空間の名前が利用できることを確認できたら、名前空間をホストする国またはリージョンを選択します (コンピューティング リソースを展開する国またはリージョンと同じ国またはリージョンを必ず使用してください)。

    > [AZURE.IMPORTANT] 選択、 **同じリージョン** アプリケーションをデプロイを選択するようにします。 そうすることで、パフォーマンスが最高になります。

6.  既定値は、ダイアログ ボックスの他のフィールドのままに (**メッセージング** と **Standard レベル**)、チェック マークをクリックします。 これで、システムによってサービス名前空間が 作成および有効化されます。 システムがアカウントのリソースを準備し 終わるまでに、数分間かかる場合があります。

    ![][6]

## 名前空間の既定の管理資格情報の取得

新規作成した名前空間に対してトピックやサブスクリプションの作成などの管理操作を実行するには、名前空間の管理資格情報を取得する必要があります。 これらの資格情報は Azure ポータルから取得できます。

### ポータルから管理資格情報を取得する

1.  左側のナビゲーション ウィンドウで、クリックして、 **Service Bus** ノードを使用できる名前空間の一覧を表示します。   
    ![][0]

2.  表示された一覧から先ほど作成した名前空間を選択します。   
    ![][3]

3.  クリックして **接続情報**します。   
    ![][4]

4.   **接続情報にアクセス** ダイアログ ボックスで、SAS キーとキー名を含む接続文字列を検索します。 その値を書き留めておきます。この情報は、この後に名前空間に対して操作を実行するときに使用します。 


  [Azure portal]: http://manage.windowsazure.com
  [0]: ./media/howto-service-bus-topics/sb-queues-13.png
  [2]: ./media/howto-service-bus-topics/sb-queues-04.png
  [3]: ./media/howto-service-bus-topics/sb-queues-09.png
  [4]: ./media/howto-service-bus-topics/sb-queues-06.png
  
  [6]: ./media/howto-service-bus-topics/getting-started-multi-tier-27.png


